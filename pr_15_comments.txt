author:	coderabbitai
association:	none
edited:	true
status:	none
--
<!-- This is an auto-generated comment: summarize by coderabbit.ai -->
<!-- This is an auto-generated comment: review paused by coderabbit.ai -->

> [!NOTE]
> ## Reviews paused
> 
> It looks like this branch is under active development. To avoid overwhelming you with review comments due to an influx of new commits, CodeRabbit has automatically paused this review. You can configure this behavior by changing the `reviews.auto_review.auto_pause_after_reviewed_commits` setting.
> 
> Use the following commands to manage reviews:
> - `@coderabbitai resume` to resume automatic reviews.
> - `@coderabbitai review` to trigger a single review.
> 
> Use the checkboxes below for quick actions:
> - [ ] <!-- {"checkboxId": "7f6cc2e2-2e4e-497a-8c31-c9e4573e93d1"} --> â–¶ï¸ Resume reviews
> - [ ] <!-- {"checkboxId": "e9bb8d72-00e8-4f67-9cb2-caf3b22574fe"} --> ğŸ” Trigger review

<!-- end of auto-generated comment: review paused by coderabbit.ai -->
<!-- configuration_strict_warnings_start -->

> [!NOTE]
> ### `.coderabbit.yaml` has unrecognized properties
> 
> CodeRabbit is using all valid settings from your configuration. Unrecognized properties (listed below) have been ignored and may indicate typos or deprecated fields that can be removed.
> 
> <details>
> <summary>âš ï¸ Parsing warnings (1)</summary>
> 
> ```
> Validation error: Unrecognized key(s) in object: 'instructions'
> ```
> 
> </details>
> 
> <details>
> <summary>âš™ï¸ Configuration instructions</summary>
> 
> - Please see the [configuration documentation](https://docs.coderabbit.ai/guides/configure-coderabbit) for more information.
> - You can also validate your configuration using the [online YAML validator](https://docs.coderabbit.ai/configuration/yaml-validator).
> - If your editor has YAML language server enabled, you can add the path at the top of this file to enable auto-completion and validation: `# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json`
> 
> </details>

<!-- configuration_strict_warnings_end -->

<!-- walkthrough_start -->

<details>
<summary>ğŸ“ Walkthrough</summary>

## Walkthrough

ã‚³ã‚¢å‹è¨­è¨ˆã¨ãƒ–ãƒªãƒƒã‚¸/ãƒ•ã‚§ã‚¤ã‚µãƒ¼ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’å†å®šç¾©ã—ã€å®£è¨€ãƒãƒ¼ã‚¸ã«ã‚ˆã‚‹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å‹æ³¨å…¥ã€ownsAdapter ãƒ™ãƒ¼ã‚¹ã®æ‰€æœ‰æ¨©ã€EngineLoader ã®åŸå­çš„ãƒãƒ«ãƒãƒªã‚½ãƒ¼ã‚¹ãƒ­ãƒ¼ãƒ‰ã€BaseAdapter ã® setOption/sendOptionToWorker è¿½åŠ ã€æ–°è¦ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼ˆEdax/KataGo/Mortalï¼‰ã¨å¤šæ•°ã®ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ»ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

## Changes

|Cohort / File(s)|Summary|
|---|---|
|**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** <br> `docs/ARCHITECTURE.md`, `docs/en/ARCHITECTURE.md`, `docs/TECHNICAL_SPECS.md`, `docs/en/TECHNICAL_SPECS.md`, `docs/DECISION_LOG.md`, `docs/PROGRESS.md`, `docs/TASKS.md`, `docs/adr/024-handle-based-lifecycle.md`, `docs/adr/025-pure-domain-info.md`, `docs/implementation_plans/extended-adapters-design.md`, `docs/reviews/*`|ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡ã®å†ç·¨ï¼ˆPure Coreã€å®£è¨€ãƒãƒ¼ã‚¸ã€æœ€æ–° Web API ç­‰ï¼‰ã€ADR è¿½åŠ ã€é€²æ—ãƒ»å®Ÿè£…è¨ˆç”»ãƒ»ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆã®è¿½åŠ ãƒ»æ›´æ–°ã€‚|
|**ã‚³ã‚¢å‹ãƒ»å…¬é–‹APIå†è¨­è¨ˆ** <br> `packages/core/src/types.ts`, `packages/core/src/index.ts`, `packages/core/src/protocols/types.ts`, `packages/core/src/protocols/index.ts`|Brand<T,K>å°å…¥ã€EngineRegistry å®£è¨€ãƒãƒ¼ã‚¸è¿½åŠ ã€IEngine/IEngineAdapter/IEngineLoader/ISearchTask ç­‰ã®å‹å†è¨­è¨ˆã€‚ãƒ—ãƒ­ãƒˆã‚³ãƒ«é–¢é€£ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ç§»ç®¡ï¼å‰Šé™¤ã€‚|
|**Bridge / Facade / Loader æ”¹ä¿®** <br> `packages/core/src/bridge/EngineBridge.ts`, `packages/core/src/bridge/EngineFacade.ts`, `packages/core/src/bridge/EngineLoader.ts`, `packages/core/src/bridge/index.ts`|getEngine ã« EngineRegistry ãƒ™ãƒ¼ã‚¹ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰è¿½åŠ ã€EngineFacade ã« loaderProvider ã¨ ownsAdapter ã‚’å°å…¥ã€‚EngineLoader ã« loadResourcesï¼ˆåŸå­çš„ãƒãƒ«ãƒãƒªã‚½ãƒ¼ã‚¹ãƒ­ãƒ¼ãƒ‰ï¼‰ã¨ in-flight åˆ¶å¾¡ã‚’è¿½åŠ ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã‚‚å†ç·¨ã€‚|
|**BaseAdapter ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³çµŒè·¯** <br> `packages/core/src/adapters/BaseAdapter.ts`, `packages/core/src/adapters/index.ts`|searchRaw å…¥åŠ›å‹æ‹¡å¼µï¼ˆRecord ã‚’è¨±å®¹ï¼‰ã€å…±é€šã®æ¤œç´¢ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ã‚¹ãƒˆãƒªãƒ¼ãƒ å®Ÿè£…ã€stop/cleanupã€setOption ã¨ sendOptionToWorker ã®è¿½åŠ ã€dispose ã®å…·è±¡åŒ–ã€‚|
|**Worker / Communicator / Storage / Capabilities** <br> `packages/core/src/workers/WorkerCommunicator.ts`, `packages/core/src/storage/*`, `packages/core/src/capabilities/*`, `packages/core/src/errors/*`|WorkerCommunicator ã‚’ãƒãƒƒãƒ•ã‚¡ï¼‹æœŸå¾…ãƒ¢ãƒ‡ãƒ«ã¸å†è¨­è¨ˆã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆOPFS/IndexedDBï¼‰ã‚’ OPFS/IndexedDB æŠ½è±¡ã¸å¤‰æ›´ï¼ˆå¼•æ•°èª¿æ•´ï¼ç°¡ç´ åŒ–ï¼‰ã€SecurityAdvisor ã« SRI æ¤œè¨¼ã¨ checkStatusã€CapabilityDetector ã®æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯æ›´æ–°ã€‚|
|**æ—¢å­˜ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ç§»è¡Œãƒ»å‹åˆ†é›¢** <br> `packages/adapter-stockfish/src/*`, `packages/adapter-yaneuraou/src/*`|FEN/SFEN/Move ç­‰ã‚²ãƒ¼ãƒ å›ºæœ‰å‹ã‚’å„ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¸ç§»å‹•ã€‚UCI/USI ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’å…·ä½“å‹ã§æ›´æ–°ã—ã€EngineRegistry ã¸ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ‹¡å¼µã‚’è¿½åŠ ã€‚ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ãƒ­ãƒ¼ãƒ‰ï¼ãƒ†ã‚¹ãƒˆã‚’ç°¡ç´ åŒ–ã€‚|
|**æ–°è¦ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼è¿½åŠ ** <br> `packages/adapter-edax/*`, `packages/adapter-katago/*`, `packages/adapter-mortal/*`|Edaxï¼ˆOthelloï¼‰ã€KataGoï¼ˆGoï¼‰ã€Mortalï¼ˆMahjongï¼‰ã‚’è¿½åŠ ï¼šãƒ‘ãƒ¼ã‚µãƒ¼ã€Adapter å®Ÿè£…ï¼ˆWorker/WASMã€ãƒãƒ«ãƒãƒªã‚½ãƒ¼ã‚¹ãƒ­ãƒ¼ãƒ‰æƒ³å®šï¼‰ã€EngineRegistry å‹æ‹¡å¼µã€ãƒ†ã‚¹ãƒˆã€package.json/tsconfig ã‚’å«ã‚€ã€‚|
|**ãƒ†ã‚¹ãƒˆãƒ»ä¾‹ãƒ»ãƒ“ãƒ«ãƒ‰è¨­å®š** <br> `packages/*/__tests__/*`, `examples/simple-chess/index.html`, `examples/simple-shogi/index.html`, `packages/*/package.json`, `packages/*/tsconfig.json`|å¤šæ•°ã®ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£ï¼ˆMockWorker ç½®æ›ã€ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼ç°¡ç´ åŒ–ï¼‰ã€examples ã«å‹æ³¨è¨˜è¿½åŠ ã€å„ adapter ã® package.json ã¨ tsconfig è¿½åŠ ãƒ»build ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›´æ–°ï¼ˆtsup --dtsï¼‰ã€‚|

## Sequence Diagram(s)

```mermaid
sequenceDiagram
    participant App as App
    participant Bridge as EngineBridge
    participant Facade as EngineFacade
    participant Loader as EngineLoader
    participant Adapter as Adapter
    participant Worker as WebWorker

    App->>Bridge: getEngine('id') (registry-typed)
    Bridge->>Facade: new EngineFacade(adapter, middlewares, loaderProvider, ownsAdapter=false)
    App->>Facade: load()
    Facade->>Loader: loaderProvider() / getLoader()
    Loader-->>Facade: IEngineLoader (supports loadResources)
    Facade->>Adapter: load(loader)
    Adapter->>Loader: loadResources(engineId, configs)
    Loader->>Loader: SRIæ¤œè¨¼ / MIMEåˆ¤å®š / fetch (30s timeout)
    Loader-->>Adapter: { main: blobUrl, weights: blobUrl }
    Adapter->>Worker: init with blobUrl
    Worker-->>Adapter: ready
    Adapter-->>Facade: status=ready
    App->>Facade: searchRaw(command)
    Facade->>Adapter: searchRaw(command)
    Adapter->>Worker: postMessage(command)
    Worker-->>Adapter: info... (stream)
    Adapter-->>Facade: yield info (ReadableStream / AsyncIterable)
    Worker-->>Adapter: result
    Adapter-->>Facade: resolve result (Promise)
    Facade-->>App: ISearchTask { info, result }
```

## Estimated code review effort

ğŸ¯ 4 (Complex) | â±ï¸ ~75 minutes

## Possibly related PRs

- hdkz-dev/multi-game-engines#13: EngineLoader ã®ãƒãƒ«ãƒãƒªã‚½ãƒ¼ã‚¹åŸå­ãƒ­ãƒ¼ãƒ‰ã€SRI/Blob å‡¦ç†ã€ãƒ•ã‚§ã‚¤ã‚µãƒ¼ã®ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚„è³¼èª­ç®¡ç†ã¨å¤šãã®å®Ÿè£…é ˜åŸŸãŒé‡è¤‡ã—ã¦ã„ã¾ã™ã€‚  
- hdkz-dev/multi-game-engines#8: EngineBridge/EngineFacadeã€EngineLoaderï¼ˆloadResourcesï¼‰ã‚„ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ»ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã® API å¤‰æ›´ã¨é‡è¤‡ç®‡æ‰€ãŒã‚ã‚Šã¾ã™ã€‚  
- hdkz-dev/multi-game-engines#6: ã‚³ã‚¢å‹ï¼ˆBrand/EngineRegistryï¼‰ã‚„ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å‹æ³¨å…¥ã€getEngine ã®å®£è¨€ãƒãƒ¼ã‚¸é–¢é€£ã§ç›´æ¥çš„ã«é–¢é€£ã—ã¦ã„ã¾ã™ã€‚

</details>

<!-- walkthrough_end -->

<!-- pre_merge_checks_walkthrough_start -->

<details>
<summary>ğŸš¥ Pre-merge checks | âœ… 4</summary>

<details>
<summary>âœ… Passed checks (4 passed)</summary>

|        Check name        | Status   | Explanation                                                                                                |
| :----------------------: | :------- | :--------------------------------------------------------------------------------------------------------- |
|     Description Check    | âœ… Passed | Check skipped - CodeRabbitâ€™s high-level summary is enabled.                                                |
|        Title check       | âœ… Passed | ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒˆãƒ«ã¯ã€ãƒãƒ³ãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ã‚¢ãƒˆãƒŸãƒƒã‚¯èª­ã¿è¾¼ã¿ã®å®Ÿè£…ã¨ã„ã†ä¸»è¦ãªå¤‰æ›´ã‚’æ˜ç¢ºã«è¦ç´„ã—ã¦ãŠã‚Šã€å¤§è¦æ¨¡ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¤‰æ›´ã‚»ãƒƒãƒˆã®å…¨ä½“çš„ãªç›®çš„ã‚’åŠ¹æœçš„ã«ä¼ãˆã¦ã„ã¾ã™ã€‚          |
|    Docstring Coverage    | âœ… Passed | No functions found in the changed files to evaluate docstring coverage. Skipping docstring coverage check. |
| Merge Conflict Detection | âœ… Passed | âœ… No merge conflicts detected when merging into `main`                                                     |

</details>

<sub>âœï¸ Tip: You can configure your own custom pre-merge checks in the settings.</sub>

</details>

<!-- pre_merge_checks_walkthrough_end -->

<!-- finishing_touch_checkbox_start -->

<details>
<summary>âœ¨ Finishing touches</summary>

<details>
<summary>ğŸ§ª Generate unit tests (beta)</summary>

- [ ] <!-- {"checkboxId": "f47ac10b-58cc-4372-a567-0e02b2c3d479", "radioGroupId": "utg-output-choice-group-unknown_comment_id"} -->   Create PR with unit tests
- [ ] <!-- {"checkboxId": "07f1e7d6-8a8e-4e23-9900-8731c2c87f58", "radioGroupId": "utg-output-choice-group-unknown_comment_id"} -->   Post copyable unit tests in a comment
- [ ] <!-- {"checkboxId": "6ba7b810-9dad-11d1-80b4-00c04fd430c8", "radioGroupId": "utg-output-choice-group-unknown_comment_id"} -->   Commit unit tests in branch `feature/reliability-refinement`

</details>

</details>

<!-- finishing_touch_checkbox_end -->

<!-- tips_start -->

---

Thanks for using [CodeRabbit](https://coderabbit.ai?utm_source=oss&utm_medium=github&utm_campaign=hdkz-dev/multi-game-engines&utm_content=15)! It's free for OSS, and your support helps us grow. If you like it, consider giving us a shout-out.

<details>
<summary>â¤ï¸ Share</summary>

- [X](https://twitter.com/intent/tweet?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A&url=https%3A//coderabbit.ai)
- [Mastodon](https://mastodon.social/share?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A%20https%3A%2F%2Fcoderabbit.ai)
- [Reddit](https://www.reddit.com/submit?title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&text=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code.%20Check%20it%20out%3A%20https%3A//coderabbit.ai)
- [LinkedIn](https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcoderabbit.ai&mini=true&title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&summary=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code)

</details>

<sub>Comment `@coderabbitai help` to get the list of available commands and usage tips.</sub>

<!-- tips_end -->

<!-- internal state start -->


<!-- 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 -->

<!-- internal state end -->
--
author:	gemini-code-assist
association:	none
edited:	false
status:	none
--
## Summary of Changes

Hello @hdkz-dev, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!

This pull request significantly advances the multi-game engine ecosystem by implementing robust reliability patterns, optimizing inter-process communication, and enforcing strict type safety. It introduces a sophisticated handle-based lifecycle management system for shared engine adapters and an atomic loading mechanism to ensure consistent initialization. Furthermore, it enhances security by preventing command injection across various protocols and improves performance through direct object transfer to Web Workers. The changes also include the addition of new game adapters and comprehensive documentation updates, solidifying the project's architectural integrity and future extensibility.

### Highlights

* **Handle-based Lifecycle (ADR-024)**: Introduced an 'ownsAdapter' flag in EngineFacade to protect shared engine instances, ensuring that disposing one facade does not inadvertently terminate the underlying shared adapter. This enhances stability when multiple UI components interact with the same engine.
* **Atomic Loading Pattern**: Implemented a mechanism within EngineFacade to prevent race conditions during concurrent engine initialization, ensuring that multiple simultaneous load calls result in only a single, consistent loading process.
* **Zero-Serialization Transfer**: Enhanced IProtocolParser to allow direct return of objects, enabling efficient structured cloning for data transfer to Web Workers and reducing serialization overhead.
* **Cross-Protocol Security**: Applied command injection prevention measures to both USI (Shogi) and GTP (Go) parsers, bolstering security across different game protocols.
* **Zero-Any Compliance**: Achieved full 'Zero-Any' compliance by refactoring KataGo and Mortal adapters and their respective tests, eliminating the use of 'any' for improved type safety and maintainability.
* **Documentation Updates**: Added a new Architectural Decision Record (ADR-024) detailing the handle-based lifecycle and updated PROGRESS.md and TASKS.md to reflect the latest project milestones and architectural refinements.
* **New Adapter Packages**: Introduced new adapter packages for Edax (Othello), KataGo (Go), and Mortal (Mahjong), complete with their respective parsers, type definitions, and tests, demonstrating the extensibility of the core system.

<details>
<summary><b>Changelog</b></summary>

* **docs/ARCHITECTURE.md**
    * Updated design principles to emphasize pure core, pay-as-you-go, and decentralized type inference.
* **docs/DECISION_LOG.md**
    * Added a new entry for ADR-024: Handle-based lifecycle management and protection of shared adapters.
* **docs/PROGRESS.md**
    * Updated project highlights to reflect completion of Phase 2 Stage 1 refinement, including EngineFacade fixes, Zero-Any compliance, handle-based lifecycle, and communication optimization.
    * Updated tasks for Phase 3.
* **docs/TASKS.md**
    * Updated quality assurance and audit tasks to include Handle-based Lifecycle and completed Zero-Any compliance.
    * Refined descriptions for Phase 3 tasks.
* **docs/TECHNICAL_SPECS.md**
    * Refactored core type definitions to be game-agnostic, introduced adapter-based domain extension, and added atomic multi-resource loading to the EngineLoader section.
* **docs/adr/024-handle-based-lifecycle.md**
    * Added a new Architectural Decision Record (ADR) detailing the handle-based lifecycle management for shared adapters, introducing the 'ownsAdapter' flag in EngineFacade.
* **docs/en/ARCHITECTURE.md**
    * Updated English version of design principles to reflect pure core, pay-as-you-go, and decentralized type inference.
* **docs/en/TECHNICAL_SPECS.md**
    * Updated English version of technical specifications to reflect game-agnostic core types, adapter-based domain extension, and atomic multi-resource loading.
* **docs/implementation_plans/extended-adapters-design.md**
    * Added a new document outlining the detailed design for next-generation engine adapters (KataGo, Edax, Mortal), including protocol specifics, multi-resource loading, and Zero-Any policy.
* **examples/simple-chess/index.html**
    * Updated comments to reflect 2026 best practices for importing types and classes from adapter packages and automatic type inference.
* **examples/simple-shogi/index.html**
    * Updated comments to reflect 2026 best practices for importing types and classes from adapter packages and automatic type inference.
* **packages/adapter-edax/package.json**
    * Added a new package.json for the Edax (Othello) adapter.
* **packages/adapter-edax/src/EdaxParser.ts**
    * Added a new parser for the Edax (Othello) protocol, including type definitions for Othello board and moves, and command injection prevention.
* **packages/adapter-edax/src/__tests__/EdaxParser.test.ts**
    * Added unit tests for the EdaxParser.
* **packages/adapter-edax/src/__tests__/edax.test.ts**
    * Added unit tests for the EdaxAdapter, covering startup sequence and info streaming.
* **packages/adapter-edax/src/edax.ts**
    * Added a new adapter for the Edax (Othello) engine, extending BaseAdapter and implementing Edax-specific loading and search logic.
* **packages/adapter-edax/src/index.ts**
    * Added an index file for the Edax adapter, including declaration merging for EngineRegistry.
* **packages/adapter-edax/tsconfig.json**
    * Added a new tsconfig.json for the Edax adapter.
* **packages/adapter-katago/package.json**
    * Added a new package.json for the KataGo adapter.
* **packages/adapter-katago/src/GTPParser.ts**
    * Added a new parser for the GTP (Go Text Protocol), including type definitions for Go moves and search options, and command injection prevention.
* **packages/adapter-katago/src/__tests__/GTPParser.test.ts**
    * Added unit tests for the GTPParser.
* **packages/adapter-katago/src/__tests__/katago.test.ts**
    * Added unit tests for the KataGoAdapter, covering parallel loading of WASM and weights, and resource revocation.
* **packages/adapter-katago/src/index.ts**
    * Added an index file for the KataGo adapter, including declaration merging for EngineRegistry.
* **packages/adapter-katago/src/katago.ts**
    * Added a new adapter for the KataGo engine, supporting multi-resource loading and WebGPU acceleration.
* **packages/adapter-katago/tsconfig.json**
    * Added a new tsconfig.json for the KataGo adapter.
* **packages/adapter-mortal/package.json**
    * Added a new package.json for the Mortal (Mahjong) adapter.
* **packages/adapter-mortal/src/MahjongJSONParser.ts**
    * Added a new parser for the Mortal (Mahjong) engine, handling JSON-based communication and type definitions for Mahjong tiles and moves.
* **packages/adapter-mortal/src/__tests__/MahjongJSONParser.test.ts**
    * Added unit tests for the MahjongJSONParser.
* **packages/adapter-mortal/src/__tests__/mortal.test.ts**
    * Added unit tests for the MortalAdapter, covering JSON-based startup and info streaming.
* **packages/adapter-mortal/src/index.ts**
    * Added an index file for the Mortal adapter, including declaration merging for EngineRegistry.
* **packages/adapter-mortal/src/mortal.ts**
    * Added a new adapter for the Mortal (Mahjong) engine, supporting JSON-based communication for non-perfect information games.
* **packages/adapter-mortal/tsconfig.json**
    * Added a new tsconfig.json for the Mortal adapter.
* **packages/adapter-stockfish/src/UCIParser.ts**
    * Moved UCIParser to the Stockfish adapter package and updated its type parameters to be specific to chess.
* **packages/adapter-stockfish/src/__tests__/UCIParser.test.ts**
    * Moved UCIParser tests to the Stockfish adapter package and updated types.
* **packages/adapter-stockfish/src/__tests__/stockfish.test.ts**
    * Updated mock loader to include 'loadResources' and 'loadResource' for consistency.
* **packages/adapter-stockfish/src/index.ts**
    * Updated index file to include declaration merging for EngineRegistry and export UCIParser.
* **packages/adapter-stockfish/src/stockfish.ts**
    * Updated Stockfish adapter to use specific chess types and added 'sendOptionToWorker' method.
* **packages/adapter-yaneuraou/src/USIParser.ts**
    * Moved USIParser to the YaneuraOu adapter package and updated its type parameters to be specific to shogi.
* **packages/adapter-yaneuraou/src/__tests__/USIParser.test.ts**
    * Moved USIParser tests to the YaneuraOu adapter package, updated types, and added a test for USI command injection prevention.
* **packages/adapter-yaneuraou/src/__tests__/yaneuraou.test.ts**
    * Updated mock loader to include 'loadResources' and 'loadResource' for consistency.
* **packages/adapter-yaneuraou/src/index.ts**
    * Updated index file to include declaration merging for EngineRegistry and export USIParser and usi-types.
* **packages/adapter-yaneuraou/src/usi-types.ts**
    * Added a new file defining SFEN, Move, and ISHOGISearchOptions for shogi.
* **packages/adapter-yaneuraou/src/yaneuraou.ts**
    * Updated YaneuraOu adapter to use specific shogi types and added 'sendOptionToWorker' method.
* **packages/core/src/__tests__/BaseAdapter.test.ts**
    * Added a protected 'sendOptionToWorker' method to the mock adapter.
* **packages/core/src/__tests__/CapabilityDetector.test.ts**
    * Removed 'details?.opfs' checks from tests.
* **packages/core/src/__tests__/EngineBridge.test.ts**
    * Updated mock adapter to include 'createOptionCommand' and 'sendOptionToWorker', adjusted search result types, and modified 'getEngine' test to use a loader provider and test atomic loading.
* **packages/core/src/__tests__/EngineError.test.ts**
    * Updated expected error code from 'WASM_INIT_FAILED' to 'INTERNAL_ERROR' in a test.
* **packages/core/src/__tests__/EngineFacade.test.ts**
    * Updated mock adapter to include 'createOptionCommand' and 'setOption', adjusted search result types, removed FEN from options in tests, and added tests for 'ownsAdapter' flag and atomic loading.
* **packages/core/src/__tests__/EngineLoader.test.ts**
    * Updated error message for missing SRI.
    * Added a test for atomic multi-resource loading.
* **packages/core/src/__tests__/LoadingStrategy.test.ts**
    * Updated mock adapter search result type, removed FEN from options in tests, and adjusted expected result type.
* **packages/core/src/__tests__/SecurityAdvisor.test.ts**
    * Removed 'recommendedActions' checks from tests.
* **packages/core/src/adapters/BaseAdapter.ts**
    * Added 'setOption' method and abstract 'sendOptionToWorker' method.
* **packages/core/src/bridge/EngineBridge.ts**
    * Updated 'getEngine' method to support automatic type inference via EngineRegistry and pass 'ownsAdapter: false' to EngineFacade.
* **packages/core/src/bridge/EngineFacade.ts**
    * Added 'telemetryListeners', 'loadingPromise', 'loaderProvider', and 'ownsAdapter' to constructor.
    * Implemented atomic loading, improved info stream error handling with telemetry, and conditionally disposes adapter based on 'ownsAdapter' flag.
    * Added 'setOption' method.
* **packages/core/src/bridge/EngineLoader.ts**
    * Refactored 'loadResource' to use 'loadResources' internally, implemented 'loadResources' for atomic multi-resource loading, and improved Blob URL management.
* **packages/core/src/capabilities/SecurityAdvisor.ts**
    * Removed 'recommendedActions' from ISecurityStatus.
* **packages/core/src/index.ts**
    * Updated exports to use '.js' extensions and removed UCIParser and USIParser as they are now in adapter packages.
* **packages/core/src/protocols/index.ts**
    * Removed.
* **packages/core/src/protocols/types.ts**
    * Removed.
* **packages/core/src/types.ts**
    * Refactored IBaseSearchOptions, IBaseSearchInfo, IBaseSearchResult to be more abstract and game-agnostic.
    * Introduced Brand type, EngineErrorCode enum, EngineRegistry interface for declaration merging, and updated IProtocolParser to allow unknown for commands and direct object transfer.
    * Added setOption to IEngine and IEngineAdapter.
    * Updated IMiddleware to include T_OPTIONS.
* **pnpm-lock.yaml**
    * Updated pnpm-lock.yaml to include new adapter packages and their dependencies.
</details>

<details>
<summary><b>Activity</b></summary>

* All 101 existing tests passed across core and adapter packages.
* New tests were added to verify the Atomic Loading pattern.
* New tests were added to confirm USI command injection prevention.
</details>

<details>
<summary><b>Using Gemini Code Assist</b></summary>
<br>

The full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.

<b>Invoking Gemini</b>

You can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.

Feature | Command | Description
--- | --- | ---
Code Review | `/gemini review` | Performs a code review for the current pull request in its current state.
Pull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.
Comment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.
Help | `/gemini help` | Displays a list of available commands.

<b>Customization</b>

To customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).

<b>Limitations & Feedback</b>

Gemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).

<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>
</details>


[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).

--
author:	gemini-code-assist
association:	none
edited:	false
status:	commented
--
## Code Review

This pull request is a significant refactoring that greatly improves the library's architecture, type safety, and reliability, achieving a "Pure Core" principle by separating protocol-specific logic into adapters. It introduces robust handle-based lifecycle management and enhances performance through atomic loading and zero-serialization transfer, with new adapters demonstrating the architecture's flexibility. However, a critical security vulnerability exists: command injection prevention was missed in the newly added `createOptionCommand` methods across `UCI`, `USI`, `GTP`, and `Edax` protocol parsers. This could allow attackers to inject arbitrary engine commands if option names or values are from untrusted input. Please apply the same sanitization logic to these `createOptionCommand` methods.
--
author:	coderabbitai
association:	none
edited:	false
status:	commented
--
**Actionable comments posted: 15**

> [!NOTE]
> Due to the large number of review comments, Critical, Major severity comments were prioritized as inline comments.

> [!CAUTION]
> Some comments are outside the diff and canâ€™t be posted inline due to platform limitations.
> 
> 
> 
> <details>
> <summary>âš ï¸ Outside diff range comments (3)</summary><blockquote>
> 
> <details>
> <summary>docs/en/TECHNICAL_SPECS.md (1)</summary><blockquote>
> 
> `60-60`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **ãƒ†ã‚¹ãƒˆæ•°ãŒ PR ã®å®Ÿç¸¾ã¨ä¸€è‡´ã—ã¾ã›ã‚“**
> 
> ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ã€Œ82 Unit Testsã€ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€PR ã®èª¬æ˜ã§ã¯ã€ŒAll 101 tests passedã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€æ–°ã®ãƒ†ã‚¹ãƒˆæ•°ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
> 
> </blockquote></details>
> <details>
> <summary>docs/TECHNICAL_SPECS.md (1)</summary><blockquote>
> 
> `62-62`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **ãƒ†ã‚¹ãƒˆæ•°ãŒ PR ã®å®Ÿç¸¾ã¨ä¸ä¸€è‡´ï¼ˆè‹±èªç‰ˆã¨åŒä¸€ã®å•é¡Œï¼‰**
> 
> ã€Œ82é …ç›®ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€ã¯ PR ã®ã€ŒAll 101 tests passedã€ã¨ä¸€è‡´ã—ã¾ã›ã‚“ã€‚ä¸¡è¨€èªç‰ˆã‚’åˆã‚ã›ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
> 
> </blockquote></details>
> <details>
> <summary>packages/core/src/bridge/EngineFacade.ts (1)</summary><blockquote>
> 
> `279-296`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **`dispose()` ã§ `telemetryListeners` ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**
> 
> Line 288 ã§ `infoListeners` ã¯ã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã™ãŒã€`telemetryListeners` (Line 27) ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚dispose å¾Œã‚‚ `emitTelemetry` ãŒå‘¼ã°ã‚ŒãŸå ´åˆï¼ˆä¾‹: éåŒæœŸã‚¿ã‚¹ã‚¯ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã‹ã‚‰ï¼‰ã€æ—¢ã«ä¸è¦ãªãƒªã‚¹ãƒŠãƒ¼ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
> 
> <details>
> <summary>ğŸ› ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
>     this.adapterUnsubscribers.clear();
>     this.infoListeners.clear();
> +   this.telemetryListeners.clear();
> 
>     await this.stop();
> ```
> </details>
> 
> </blockquote></details>
> 
> </blockquote></details>

<details>
<summary>ğŸ¤– Fix all issues with AI agents</summary>

```
In `@packages/adapter-edax/src/edax.ts`:
- Around line 53-75: The load method's signature requires a loader but
IEngineAdapter defines load(loader?: IEngineLoader), so update the
implementation of load (the async load method in the Edax adapter) to handle a
possibly undefined loader: check if loader is present before using it (e.g., if
(!loader) { this.emitStatusChange("error"); throw EngineError.from(new
Error("loader not provided"), this.id); } or return early), avoid calling
loader.loadResource when loader is undefined, and ensure this.activeLoader is
only set when loader exists; mirror the same fix for other adapters that
implement load.

In `@packages/adapter-edax/src/EdaxParser.ts`:
- Line 62: createOptionCommand currently interpolates name and value directly,
allowing command injection; update createOptionCommand to sanitize/validate both
parameters (similar to createSearchCommand) before concatenation: restrict name
to the allowed token pattern (e.g., letters, digits, hyphen/underscore) and
convert/validate value by type (booleans to "true"/"false", numbers ensure
numeric, strings run through the same board/token sanitizer or escape/encode
invalid chars), or centralize the sanitizer into a shared helper used by
createOptionCommand and createSearchCommand to ensure safe, well-formed USI
option tokens.
- Around line 8-12: The interfaces are missing the depth and score properties
used elsewhere; add optional properties depth: number and score: number to
IOthelloSearchInfo and add depth?: number to IOthelloSearchOptions (or make both
optional as needed) so accesses in createSearchCommand and where depth/score are
assigned (referenced in IOthelloSearchInfo, IOthelloSearchOptions,
createSearchCommand, and the lines setting depth/score) match the type
definitions and satisfy TypeScript strict checks.

In `@packages/adapter-katago/src/GTPParser.ts`:
- Line 72: createOptionCommand ã«å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚ºãŒç„¡ã„ãŸã‚ name/value ã«æ”¹è¡ŒãŒå«ã¾ã‚Œã‚‹ã¨ GTP
ã‚³ãƒãƒ³ãƒ‰æ³¨å…¥ãŒå¯èƒ½ã§ã™ã€‚ä¿®æ­£ã¯ createOptionCommand(name: string, value: string | number |
boolean) å†…ã§å…¥åŠ›ã‚’æ¤œè¨¼ãƒ»æ­£è¦åŒ–ã—ã€name ã¯ /^[A-Za-z0-9_\-]+$/
ã®ã‚ˆã†ãªè¨±å¯ã•ã‚ŒãŸæ–‡å­—ã®ã¿è¨±å¯ã™ã‚‹ã‹ä¸æ­£ãªæ–‡å­—ãŒã‚ã‚Œã°ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã€value ãŒ string ã®å ´åˆã¯ "\n" ã¨ "\r"
ã‚’é™¤å»ã¾ãŸã¯ç©ºç™½ã«ç½®æ›ã—ã¦ã‹ã‚‰ `set ${name} ${value}` ã‚’çµ„ã¿ç«‹ã¦ã‚‹ï¼ˆboolean/number ã¯ãã®ã¾ã¾æ‰±ã†ãŒ string
åŒ–ã™ã‚‹å‰ã«ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã‚’è¡Œã†ï¼‰ã€‚ã“ã‚Œã«ã‚ˆã‚Šæ”¹è¡Œã«ã‚ˆã‚‹ã‚³ãƒãƒ³ãƒ‰åˆ†å‰²ã¨æ³¨å…¥ã‚’é˜²ãã¾ã™ã€‚
- Line 36: The code creates const info: IGOSearchInfo = { depth: 0, score: 0,
raw: line } but IGOSearchInfo (which extends IBaseSearchInfo) does not declare
depth or score, causing a TS excess property error; fix by either adding depth?:
number and score?: number to the IGOSearchInfo interface in the types definition
(so assignments like info.score = ... work) or remove depth and score from the
initializer and any uses (e.g., the later info.score assignment) if those fields
are unnecessaryâ€”update references in GTPParser.ts (the const info variable and
any info.score accesses) to match the chosen approach.

In `@packages/adapter-katago/src/katago.ts`:
- Around line 92-143:
cleanupPendingTask()ç¾åœ¨ã¯reasonãŒãªã„ã¨pendingRejectã‚’å‘¼ã°ãšä»¥å‰ã®resultPromiseãŒè§£æ±ºã•ã‚Œãªã„ã®ã§ã€cleanupPendingTask(â€¦)ã®å®Ÿè£…ã‚’å¤‰æ›´ã—ã¦reasonå¼•æ•°ãŒæ¸¡ã•ã‚Œãªã„å ´åˆã§ã‚‚ä»¥å‰ã®pendingRejectã‚’å‘¼ã‚“ã§promiseã‚’rejectã™ã‚‹ï¼ˆä¾‹ãˆã°
new Error("search
cancelled"ï¼‰ãªã©ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç†ç”±ã‚’æ¸¡ã™ï¼‰ã€ã‚ã‚‹ã„ã¯searchRawã§cleanupPendingTaskã‚’å‘¼ã¶éš›ã«æ˜ç¤ºçš„ãªç†ç”±ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã€pendingResolve/pendingRejectã®ä¸¡æ–¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹å‡¦ç†ã‚’å¿…ãšè¡Œã†ã‚ˆã†ã«ã—ã¦stop()/searchRawã®å‘¼ã³å‡ºã—çµŒè·¯ã§æœªè§£æ±ºã®PromiseãŒæ®‹ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ï¼ˆå‚ç…§:
cleanupPendingTask, pendingReject, pendingResolve, searchRaw, stopï¼‰ã€‚

In `@packages/adapter-mortal/src/mortal.ts`:
- Around line 41-48: The sources.main object currently contains a placeholder
SRI and size which must not be shipped; update the IEngineSourceConfig entry
named sources (key "main") in mortal.ts to use the real SHA384 SRI and the
actual byte size of the mortal.js bundle before release, or add a
runtime/build-time assertion in the same module to reject placeholder values
(e.g., detect "DummyHash" or size === 0) and fail the build or throw an explicit
error; reference the properties sources, main, sri and size so you can locate
and replace/validate them, and add a TODO/Issue reference if you cannot obtain
the real values immediately.

In `@packages/adapter-stockfish/src/stockfish.ts`:
- Line 80: The searchRaw method signature currently includes 'unknown' which
collapses the union and defeats type safety; update the searchRaw signature in
the Stockfish adapter (function searchRaw) to remove 'unknown' so it becomes
string | string[] | Uint8Array (matching other adapters like EdaxAdapter), then
adjust any callers to satisfy the stricter types or add explicit overloads/type
guards where truly needed; run the TypeScript checks to ensure no remaining
implicit-any/unknown usages and update related tests/export types if necessary.

In `@packages/adapter-stockfish/src/UCIParser.ts`:
- Around line 137-139: The createOptionCommand function lacks input sanitization
allowing newline/NULL/semicolon injection; update UCIParser.createOptionCommand
to sanitize both name and value (e.g., remove characters matching [\r\n\0;] or
reject/escape them) before building the `setoption name ... value ...` string,
following the same sanitization strategy used in createSearchCommand, and apply
the same fix to the analogous methods in GTPParser so all option/name/value
inputs are defensively cleaned.

In `@packages/adapter-yaneuraou/src/USIParser.ts`:
- Around line 140-142: createOptionCommand currently interpolates name and value
directly which allows USI command injection; follow the same sanitization
pattern used in createSearchCommand for sfen: reject or escape any
control/newline/null/semicolon characters (e.g. strip or replace [\r\n\0;]) from
both name and value and ensure value is serialized safely for
boolean/number/string cases before returning the `setoption name ... value ...`
string; update the createOptionCommand implementation (and any callers) to use
the sanitizedName/sanitizedValue variables to construct the command.

In `@packages/core/src/adapters/BaseAdapter.ts`:
- Line 38: The searchRaw signature in BaseAdapter (method searchRaw) uses
`string | string[] | Uint8Array | unknown`, which collapses to `unknown`; update
the signature to remove the top type and use a concrete allowed payload type
(e.g., `string | string[] | Uint8Array | Record<string, unknown>` or a named
alias like `SearchPayload = string | string[] | Uint8Array | Record<string,
unknown>`), then update any related interface IEngineAdapter in
packages/core/src/types.ts to the same new type so implementations (e.g.,
adapter-mortal) remain compatible and type-safe; ensure all implementations
compile against the new signature and adjust any call sites that pass arbitrary
values to conform to the defined payload shape.

In `@packages/core/src/bridge/EngineLoader.ts`:
- Around line 53-66: The cached data returned by this.storage.get(cacheKey)
isn't SRI-verified; compute the digest of the returned ArrayBuffer with
crypto.subtle.digest and compare it to config.sri (use the same hash
algorithm/encoding the network fetch uses) before using it; if the digest
doesn't match, treat it as a cache miss (discard data and call
this.fetchResource(config.url, config.sri, engineId)), and only convert the
verified ArrayBuffer to a Blob URL and proceed to use it; add logging on
mismatch and ensure you still attempt to write only verified data via
this.storage.set(cacheKey, data) after successful verification.
- Around line 97-103: The EngineError is being constructed with a wrapper object
({ cause: error }) as the fourth argument which hides the original exception;
update the EngineLoader code that throws EngineError (the throw new
EngineError(...) call using EngineErrorCode.NETWORK_ERROR) to pass the original
error directly as the originalError parameter (i.e., provide error instead of {
cause: error }) so EngineError.from() and downstream code can access the actual
exception.
- Around line 25-76: The loadResources implementation has a TOCTOU race when
concurrent calls with the same engineId manipulate activeBlobs; add a per-engine
Promise lock (e.g. a private inflightLoads: Map<string,
Promise<Record<string,string>>>) so concurrent callers reuse the same in-flight
Promise; refactor the current body into a private _loadResourcesImpl(engineId,
configs) that does the actual work (including revoke, fetchResource, storage
access, and activeBlobs.set) and then make loadResources check
inflightLoads.get(engineId), return it if present, or create and store promise =
_loadResourcesImpl(...).finally(() => inflightLoads.delete(engineId)); ensure
the lock key is engineId and that all blob mutation remains inside
_loadResourcesImpl to guarantee atomicity.

In `@packages/core/src/types.ts`:
- Around line 88-89: The empty placeholder interface EngineRegistry violates
`@typescript-eslint/no-empty-object-type`; change its declaration to include a
permissive index signature so declaration merging still worksâ€”replace "export
interface EngineRegistry {}" with "export interface EngineRegistry { [key:
string]: unknown }" and keep a short comment indicating it's a placeholder for
declaration merging.
```

</details>

<details>
<summary>ğŸŸ¡ Minor comments (9)</summary><blockquote>

<details>
<summary>packages/core/src/types.ts-208-213 (1)</summary><blockquote>

`208-213`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**`IMiddleware` ã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®é †åºãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ç´„ã¨ä¸ä¸€è‡´ã§ã™ã€‚**

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯ `T_OPTIONS`, `T_INFO`, `T_RESULT` ã®é †åºã‚’çµ±ä¸€ã™ã‚‹ã‚ˆã†å®šã‚ã¦ã„ã¾ã™ãŒã€`IMiddleware` ã¯ `<T_INFO, T_RESULT, T_OPTIONS>` ã®é †åºã«ãªã£ã¦ã„ã¾ã™ã€‚ä»–ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆ`IEngine`, `IEngineAdapter`, `IProtocolParser` ç­‰ï¼‰ã¨ã‚‚ä¸æ•´åˆã§ã™ã€‚


<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-export interface IMiddleware<T_INFO = unknown, T_RESULT = unknown, T_OPTIONS = IBaseSearchOptions> {
+export interface IMiddleware<T_OPTIONS = IBaseSearchOptions, T_INFO = unknown, T_RESULT = unknown> {
```
</details>

As per coding guidelines: ã€ŒEnsure consistent ordering of generics (`T_OPTIONS`, `T_INFO`, `T_RESULT`) across the entire project for type safetyã€

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/MahjongJSONParser.ts-48-53 (1)</summary><blockquote>

`48-53`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**`evaluations` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ¤œè¨¼ãªã—ã§ã‚­ãƒ£ã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚**

Line 51 ã§ `json.evaluations as IMahjongSearchInfo["evaluations"]` ã¨ã—ã¦ã„ã¾ã™ãŒã€å„è¦ç´ ã® `move` ã‚„ `ev` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‹ãƒ»å­˜åœ¨ãƒã‚§ãƒƒã‚¯ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ä¸æ­£ãª JSON ãŒå…¥åŠ›ã•ã‚ŒãŸå ´åˆã€å‹å®‰å…¨æ€§ãŒä¿è¨¼ã•ã‚Œãšãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã®åŸå› ã«ãªã‚Šå¾—ã¾ã™ã€‚


<details>
<summary>ğŸ›¡ï¸ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹</summary>

```diff
-     evaluations: json.evaluations as IMahjongSearchInfo["evaluations"],
+     evaluations: Array.isArray(json.evaluations)
+       ? (json.evaluations as unknown[])
+           .filter((e): e is Record<string, unknown> =>
+             typeof e === "object" && e !== null &&
+             typeof (e as Record<string, unknown>).move === "string" &&
+             typeof (e as Record<string, unknown>).ev === "number"
+           )
+           .map(e => ({ move: e.move as Move, ev: e.ev as number, prob: typeof e.prob === "number" ? e.prob : undefined }))
+       : undefined,
```
</details>

</blockquote></details>
<details>
<summary>docs/en/ARCHITECTURE.md-12-14 (1)</summary><blockquote>

`12-14`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ç•ªå·ã®é‡è¤‡ãŒã‚ã‚Šã¾ã™ã€‚**

Line 12 ã®ã€ŒFramework Agnosticã€ã¨ Line 14 ã®ã€ŒModern Web Standardsã€ãŒã©ã¡ã‚‰ã‚‚ `3.` ã«ãªã£ã¦ã„ã¾ã™ã€‚å¾Œè€…ã¯ `4.` ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚


<details>
<summary>ğŸ“ ä¿®æ­£æ¡ˆ</summary>

```diff
 3.  **Framework Agnostic**:
     - Engine thinking information (candidate moves, scores) is delivered via `AsyncIterable`. This allows for intuitive real-time updates using `for await...of` loops.
-3.  **Modern Web Standards (2026 Ready)**:
+4.  **Modern Web Standards (2026 Ready)**:
```
</details>

</blockquote></details>
<details>
<summary>docs/PROGRESS.md-26-27 (1)</summary><blockquote>

`26-27`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ãƒ†ã‚¹ãƒˆä»¶æ•°ãŒæ›´æ–°ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**

Line 26 ã«ã€Œç·æ•° 82 ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆåˆæ ¼ã€ã¨ã‚ã‚Šã¾ã™ãŒã€PR ã®èª¬æ˜ã§ã¯ã€ŒAll 101 tests passedã€ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆä»¶æ•°ã‚’æœ€æ–°ã®å€¤ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚


<details>
<summary>ğŸ“ ä¿®æ­£æ¡ˆ</summary>

```diff
-- [x] **å“è³ªä¿è¨¼**: ç·æ•° 82 ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆåˆæ ¼ã€PR `#1`ã€œ#13 ã®è¶…æ·±å±¤ç›£æŸ»å®Œäº†ã€‚
+- [x] **å“è³ªä¿è¨¼**: ç·æ•° 101 ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆåˆæ ¼ã€PR `#1`ã€œ#13 ã®è¶…æ·±å±¤ç›£æŸ»å®Œäº†ã€‚
```
</details>

</blockquote></details>
<details>
<summary>docs/ARCHITECTURE.md-12-14 (1)</summary><blockquote>

`12-14`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ç•ªå·ã®é‡è¤‡: ã€Œ3.ã€ãŒ2å›ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚**

Line 12 ã¨ Line 14 ã®ä¸¡æ–¹ã«ã€Œ3.ã€ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚Line 14 ã¯ã€Œ4.ã€ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

<details>
<summary>ğŸ“ ä¿®æ­£æ¡ˆ</summary>

```diff
 3.  **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯éä¾å­˜ (Framework Agnostic)**:
     - ã‚¨ãƒ³ã‚¸ãƒ³ã®æ€è€ƒçŠ¶æ³ï¼ˆæ¤œè¨ä¸­ã®æŒ‡ã—æ‰‹ã‚„ã‚¹ã‚³ã‚¢ï¼‰ã¯ `AsyncIterable` ã‚’ç”¨ã„ã¦é…ä¿¡ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`for await...of` ãƒ«ãƒ¼ãƒ—ã‚’ç”¨ã„ãŸç›´æ„Ÿçš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãŒå¯èƒ½ã§ã™ã€‚
-3.  **æœ€æ–°ã® Web æ¨™æº– API ã®æ´»ç”¨ (2026 Ready)**:
+4.  **æœ€æ–°ã® Web æ¨™æº– API ã®æ´»ç”¨ (2026 Ready)**:
```
</details>

</blockquote></details>
<details>
<summary>docs/TECHNICAL_SPECS.md-20-20 (1)</summary><blockquote>

`20-20`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ãŒé‡è¤‡ã—ã¦ã„ã¾ã™ï¼ˆè‹±èªç‰ˆã¨åŒä¸€ã®å•é¡Œï¼‰**

Line 12 ã®ã€Œ### 1-2. ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«ã‚ˆã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³æ‹¡å¼µã€ã¨ Line 20 ã®ã€Œ### 1-2. ãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥ã€ãŒåŒã˜ç•ªå·ã§ã™ã€‚

<details>
<summary>ğŸ“ ä¿®æ­£ææ¡ˆ</summary>

```diff
-### 1-2. ãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥ (Loading Strategy)
+### 1-3. ãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥ (Loading Strategy)
```
</details>

</blockquote></details>
<details>
<summary>docs/en/TECHNICAL_SPECS.md-20-20 (1)</summary><blockquote>

`20-20`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·ãŒé‡è¤‡ã—ã¦ã„ã¾ã™**

Line 12 ã®ã€Œ### 1-2. Domain Extension via Adaptersã€ã¨ Line 20 ã®ã€Œ### 1-2. Loading Strategyã€ãŒåŒã˜ç•ªå·ã§ã™ã€‚å¾Œè€…ã¯ã€Œ### 1-3. Loading Strategyã€ã«ã™ã¹ãã§ã™ã€‚

<details>
<summary>ğŸ“ ä¿®æ­£ææ¡ˆ</summary>

```diff
-### 1-2. Loading Strategy
+### 1-3. Loading Strategy
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/mortal.ts-96-97 (1)</summary><blockquote>

`96-97`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**é…åˆ—ã‚³ãƒãƒ³ãƒ‰ã®å…ˆé ­è¦ç´ ã®ã¿é€ä¿¡ã—ã¦ã„ã‚‹**

`command[0]` ã®ã¿é€ä¿¡ã•ã‚Œã¾ã™ã€‚`StockfishAdapter` ã§ã¯é…åˆ—ã®å…¨è¦ç´ ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚JSON ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã¯å˜ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‰æã§ã‚ã‚Œã°ã€ã‚·ã‚°ãƒãƒãƒ£ã‹ã‚‰ `string[]` ã‚’é™¤å¤–ã™ã‚‹ã‹ã€æ„å›³ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æ˜è¨˜ã™ã¹ãã§ã™ã€‚

<details>
<summary>â™»ï¸ ææ¡ˆA: å…¨è¦ç´ é€ä¿¡ï¼ˆStockfish ã¨ä¸€è‡´ã•ã›ã‚‹å ´åˆï¼‰</summary>

```diff
-    const message = Array.isArray(command) ? command[0] : command;
-    this.communicator?.postMessage(message);
+    if (Array.isArray(command)) {
+      for (const msg of command) {
+        this.communicator?.postMessage(msg);
+      }
+    } else {
+      this.communicator?.postMessage(command);
+    }
```
</details>

<details>
<summary>â™»ï¸ ææ¡ˆB: é…åˆ—ã‚’å—ã‘ä»˜ã‘ãªã„å ´åˆ</summary>

```diff
-  searchRaw(command: string | string[] | Uint8Array): ISearchTask<...> {
+  searchRaw(command: string | Uint8Array): ISearchTask<...> {
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/katago.ts-45-58 (1)</summary><blockquote>

`45-58`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

**ãƒ€ãƒŸãƒ¼ SRI ãƒãƒƒã‚·ãƒ¥ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã§ã™ã€‚**

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«ã‚ˆã‚Šã€å‹•çš„ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã¯ SRI ãƒãƒƒã‚·ãƒ¥ã®æ¤œè¨¼ãŒå¿…é ˆã§ã™ã€‚ç¾åœ¨ `"sha384-DummyHash..."` ã¨ã„ã†ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã®ã¾ã¾ãƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã¨æ¤œè¨¼ã‚’ç´ é€šã‚Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚TODO ã‚³ãƒ¡ãƒ³ãƒˆã®è¿½åŠ ã€ã¾ãŸã¯ CI ã§ãƒ€ãƒŸãƒ¼ãƒãƒƒã‚·ãƒ¥ã‚’æ¤œå‡ºã™ã‚‹ä»•çµ„ã¿ã®å°å…¥ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

</blockquote></details>

</blockquote></details>

<details>
<summary>ğŸ§¹ Nitpick comments (29)</summary><blockquote>

<details>
<summary>docs/adr/024-handle-based-lifecycle.md (1)</summary><blockquote>

`1-28`: **ADR ã®å†…å®¹ã¯æ˜ç¢ºã§ã€æ‰€æœ‰æ¨©ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆæ„å›³ãŒã‚ˆãä¼ã‚ã‚Šã¾ã™ã€‚**

ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã®è²¬å‹™åˆ†é›¢ãŒé©åˆ‡ã«æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä¸€ç‚¹ã€`EngineBridge.unregisterAdapter()` ã§ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒç ´æ£„ã•ã‚ŒãŸå¾Œã«ã€ã¾ã å‚ç…§ã‚’ä¿æŒã—ã¦ã„ã‚‹ `EngineFacade`ï¼ˆ`ownsAdapter: false`ï¼‰ã‹ã‚‰æ“ä½œãŒè¡Œã‚ã‚ŒãŸå ´åˆã®æŒ¯ã‚‹èˆã„ï¼ˆã‚¨ãƒ©ãƒ¼ã®ç¨®é¡ã‚„ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•ï¼‰ã«ã¤ã„ã¦ã€ã€Œå¸°çµã€ã¾ãŸã¯è£œè¶³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¼‰ãŒã‚ã‚‹ã¨ã€å®Ÿè£…è€…ã«ã¨ã£ã¦ã‚ˆã‚Šæœ‰ç”¨ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/USIParser.ts (1)</summary><blockquote>

`35-37`: **`Uint8Array` å…¥åŠ›ãŒæš—é»™çš„ã« `null` ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚**

ã‚·ã‚°ãƒãƒãƒ£ã§ã¯ `string | Uint8Array | unknown` ã‚’å—ã‘ä»˜ã‘ã¾ã™ãŒã€`Uint8Array` ã®å ´åˆã¯ãƒ‡ã‚³ãƒ¼ãƒ‰ã›ãšã«å³ `null` ã‚’è¿”ã—ã¾ã™ã€‚ç¾çŠ¶ USI ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ãªã®ã§å•é¡Œã«ã¯ãªã‚Šã¾ã›ã‚“ãŒã€å°†æ¥çš„ã« `Uint8Array` ã‚’å—ã‘å–ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Œã° `TextDecoder` ã§ã®ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/__tests__/USIParser.test.ts (1)</summary><blockquote>

`61-71`: **ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆã¯é©åˆ‡ã§ã™ã€‚`createOptionCommand` ã®åŒæ§˜ã®ãƒ†ã‚¹ãƒˆã‚‚è¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚**

`createSearchCommand` ã«å¯¾ã™ã‚‹ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆã¯æ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚`USIParser.ts` ã® `createOptionCommand` ã«ã‚‚åŒæ§˜ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’è¸ã¾ãˆï¼ˆåˆ¥ã‚³ãƒ¡ãƒ³ãƒˆå‚ç…§ï¼‰ã€å¯¾å¿œã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/MahjongJSONParser.ts (1)</summary><blockquote>

`56-64`: **`parseResult` ã§ `bestMove` ãŒæ–‡å­—åˆ—ã§ã‚ã‚‹ã“ã¨ã®æ¤œè¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚**

`json.bestMove` ãŒå­˜åœ¨ã—ã¦ã‚‚æ–‡å­—åˆ—ã§ãªã„å ´åˆã€`Move` å‹ã¸ã®ã‚­ãƒ£ã‚¹ãƒˆãŒä¸æ­£ã«ãªã‚Šã¾ã™ã€‚å‹ã‚¬ãƒ¼ãƒ‰ã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚


<details>
<summary>ğŸ›¡ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
  parseResult(data: string | Uint8Array | unknown): IMahjongSearchResult | null {
    const json = this.ensureObject(data);
-   if (!json || (json.type !== "result" && !json.bestMove)) return null;
+   if (!json || (json.type !== "result" && !json.bestMove)) return null;
+   if (typeof json.bestMove !== "string") return null;
    return {
      bestMove: json.bestMove as Move,
-     ponder: json.ponder as Move,
+     ponder: typeof json.ponder === "string" ? json.ponder as Move : undefined,
      raw: typeof data === "string" ? data : JSON.stringify(data),
    };
  }
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/__tests__/MahjongJSONParser.test.ts (1)</summary><blockquote>

`4-14`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä¸ååˆ†ã§ã™ã€‚**

`MahjongJSONParser` ã«ã¯ `parseInfo`ã€`parseResult`ã€`createSearchCommand`ã€`createStopCommand`ã€`createOptionCommand`ã€`ensureObject` ã®6ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆã¯ `parseInfo` ã®æ­£å¸¸ç³»1ã‚±ãƒ¼ã‚¹ã®ã¿ã§ã™ã€‚å°‘ãªãã¨ã‚‚ `parseResult`ï¼ˆæ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ï¼‰ã¨ç„¡åŠ¹ãªå…¥åŠ›ã«å¯¾ã™ã‚‹ `null` è¿”å´ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚



ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ã‚’ç”Ÿæˆã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ

</blockquote></details>
<details>
<summary>packages/core/src/types.ts (1)</summary><blockquote>

`155-162`: **`string | Uint8Array | unknown` ã®å‹ã‚·ã‚°ãƒãƒãƒ£ã¯å†—é•·ã§ã™ã€‚**

`unknown` ã¯ TypeScript ã®ãƒˆãƒƒãƒ—å‹ã§ã‚ã‚Šã€`string | Uint8Array | unknown` ã¯ `unknown` ã¨ç­‰ä¾¡ã§ã™ã€‚æ„å›³ã¨ã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆçš„ãªå½¹å‰²ã‚’æœãŸã—ã¦ã„ã‚‹ã“ã¨ã¯ç†è§£ã§ãã¾ã™ãŒã€å‹ãƒ¬ãƒ™ãƒ«ã§ã¯æ„å‘³ãŒãªãã€åˆ©ç”¨è€…ã« `unknown` ã§ä½•ã§ã‚‚æ¸¡ã›ã‚‹ã“ã¨ã‚’éš ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚JSDoc ã‚³ãƒ¡ãƒ³ãƒˆã§æœŸå¾…ã•ã‚Œã‚‹å‹ã‚’æ˜è¨˜ã—ã€ã‚·ã‚°ãƒãƒãƒ£ã¯ `unknown` ã®ã¿ã«ã™ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/__tests__/GTPParser.test.ts (1)</summary><blockquote>

`4-21`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒæœ€å°é™ã§ã™ â€” ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚’æ¨å¥¨**

`UCIParser.test.ts` ã«ã¯ FEN ã¸ã®ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆãŒã‚ã‚Šã¾ã™ãŒã€`GTPParser` ã® `createSearchCommand` ã«å¯¾ã™ã‚‹åŒç­‰ã®ãƒ†ã‚¹ãƒˆï¼ˆSGF ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºæ¤œè¨¼ï¼‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚PR ã®ç›®çš„ã«ã€ŒCross-Protocol Security: command injection prevention extended to USI and GTP parsersã€ã¨è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ä»¥ä¸Šã€GTP å´ã«ã‚‚ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ã®ãŒæœ›ã¾ã—ã„ã§ã™ã€‚

ã¾ãŸã€`createOptionCommand` ã‚„éæ–‡å­—åˆ—å…¥åŠ›ã«å¯¾ã™ã‚‹ `parseInfo`/`parseResult` ã® `null` è¿”å´ãƒ†ã‚¹ãƒˆã‚‚æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-stockfish/src/__tests__/UCIParser.test.ts (1)</summary><blockquote>

`50-60`: **ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ãƒ†ã‚¹ãƒˆã¯è‰¯ã„å®Ÿè·µã§ã™**

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹ç‚¹ã¯é«˜è©•ä¾¡ã§ã™ã€‚ãªãŠã€`createOptionCommand` ã«å¯¾ã™ã‚‹åŒæ§˜ã®ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚‚è¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ï¼ˆ`name` ã‚„ `value` ã«æ”¹è¡Œã‚’å«ã‚€ã‚±ãƒ¼ã‚¹ï¼‰ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/__tests__/EdaxParser.test.ts (1)</summary><blockquote>

`7-12`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚**

`parseInfo` ã®ãƒ†ã‚¹ãƒˆãŒ1ä»¶ã®ã¿ã§ã€`pv` ã‚„ `isExact` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¤œè¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€`parseResult`ã€`createSearchCommand`ï¼ˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã‚’å«ã‚€ï¼‰ã€`createStopCommand`ã€`createOptionCommand` ã®ãƒ†ã‚¹ãƒˆãŒæ¬ ã‘ã¦ã„ã¾ã™ã€‚ç‰¹ã«PRç›®æ¨™ã«ã€ŒCross-Protocol Security: command injection prevention extended toâ€¦ Edaxã€ã¨ã‚ã‚‹ãŸã‚ã€`createSearchCommand` ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºæ¤œè¨¼ã¯é‡è¦ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/EngineLoader.test.ts (1)</summary><blockquote>

`93-107`: **ã‚¢ãƒˆãƒŸãƒƒã‚¯ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸãƒ‘ã‚¹ã®ã¿ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚**

ã“ã®ãƒ†ã‚¹ãƒˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ™‚ã®æ­£å¸¸ç³»ã®ã¿ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚ã€Œã‚¢ãƒˆãƒŸãƒƒã‚¯ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æ ¸å¿ƒã§ã‚ã‚‹ã€**ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒå¤±æ•—ã—ãŸå ´åˆã«å…¨ä½“ãŒå¤±æ•—ã™ã‚‹**æŒ™å‹•ï¼ˆ`Promise.all` ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ï¼‰ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚ä¾‹ãˆã°ã€`extra` ã®ãƒ•ã‚§ãƒƒãƒãŒå¤±æ•—ã—ãŸå ´åˆã« `main` ã® Blob URL ãŒãƒªãƒ¼ã‚¯ã—ãªã„ã“ã¨ã®ç¢ºèªãªã©ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/__tests__/katago.test.ts (2)</summary><blockquote>

`4-4`: **æœªä½¿ç”¨ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ `Move` ãŒã‚ã‚Šã¾ã™ã€‚**

`Move` ã¯ã“ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ä¸è¦ã§ã‚ã‚Œã°å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚


<details>
<summary>ğŸ§¹ ä¿®æ­£æ¡ˆ</summary>

```diff
-import { Move } from "../GTPParser.js";
```
</details>

---

`58-75`: **å†…éƒ¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯ãƒ†ã‚¹ãƒˆã®è„†å¼±æ€§ã«ã¤ãªãŒã‚Šã¾ã™ã€‚**

`as unknown as { communicator: ...; _status: string }` ã«ã‚ˆã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ“ä½œã¯ã€å†…éƒ¨å®Ÿè£…ã®å¤‰æ›´æ™‚ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªããƒ†ã‚¹ãƒˆãŒå£Šã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚å¯èƒ½ã§ã‚ã‚Œã°ã€ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾Œã« `searchRaw` ã‚’å‘¼ã¶çµ±åˆçš„ãªãƒ†ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼ã«ã™ã‚‹ã‹ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ `KataGoAdapter` ã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/LoadingStrategy.test.ts (1)</summary><blockquote>

`26-39`: **ãƒ¢ãƒƒã‚¯ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã« `setOption` ãŒä¸è¶³ã—ã¦ã„ã¾ã™ãŒã€ç¾çŠ¶ã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚**

`IEngineAdapter` ã« `setOption` ãŒå¿…é ˆãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã®ãƒ¢ãƒƒã‚¯ã§ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚`as unknown as IEngineAdapter<...>` ã‚­ãƒ£ã‚¹ãƒˆã§å›é¿ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šå¾Œ `setOption` é–¢é€£ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹éš›ã«ã¯ã€ãƒ¢ãƒƒã‚¯ã«ã‚‚ `setOption: vi.fn()` ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/__tests__/edax.test.ts (2)</summary><blockquote>

`27-31`: **`mockLoader` ã®ãƒ¢ãƒƒã‚¯ãŒå„ãƒ†ã‚¹ãƒˆé–“ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„**

`mockLoader` ã¯ `describe` ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§ä¸€åº¦ã ã‘ `vi.fn()` ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ãŒã€`beforeEach` å†…ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ†ã‚¹ãƒˆãŒå¢—ãˆãŸå ´åˆã€å‘¼ã³å‡ºã—å›æ•°ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã§å½é™½æ€§/å½é™°æ€§ã‚’æ‹›ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

<details>
<summary>â™»ï¸ ææ¡ˆ: beforeEach å†…ã«ç§»å‹•ã¾ãŸã¯ãƒªã‚»ãƒƒãƒˆã‚’è¿½åŠ </summary>

```diff
  beforeEach(() => {
    currentMockWorker = null;
    vi.stubGlobal("Worker", MockWorker);
+   vi.mocked(mockLoader.loadResource).mockClear();
+   vi.mocked(mockLoader.loadResources).mockClear();
+   vi.mocked(mockLoader.revoke).mockClear();
  });
```
</details>

---

`55-67`: **ã‚¹ãƒˆãƒªãƒ¼ãƒ èª­ã¿å–ã‚Šã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã®å®Ÿè¡Œé †åºã«æ³¨æ„**

`readInfo()` ã® `for await` ãƒ«ãƒ¼ãƒ—ã¯éåŒæœŸã§é–‹å§‹ã•ã‚Œã¾ã™ãŒã€Line 63ãƒ»65 ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã¯åŒæœŸçš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚`ReadableStream` ã®å†…éƒ¨ã‚­ãƒ¥ãƒ¼ã«ã‚ˆã‚Šãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ãŸã‚ç¾æ™‚ç‚¹ã§ã¯å‹•ä½œã—ã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆã®æ„å›³ãŒæ˜ç¢ºã«ãªã‚‹ã‚ˆã†ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å‰ã«1ãƒ†ã‚£ãƒƒã‚¯å¾…ã¤ã‹ã€ã‚³ãƒ¡ãƒ³ãƒˆã§é †åºã®æ„å›³ã‚’æ˜è¨˜ã™ã‚‹ã¨å …ç‰¢æ€§ãŒä¸ŠãŒã‚Šã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-stockfish/src/stockfish.ts (1)</summary><blockquote>

`104-110`: **`Uint8Array` ã®ã‚±ãƒ¼ã‚¹ãŒæ˜ç¤ºçš„ã«ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¦ã„ãªã„**

ã‚·ã‚°ãƒãƒãƒ£ã« `Uint8Array` ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€é–¢æ•°æœ¬ä½“ã§ã¯ `Array.isArray()` ã®ãƒã‚§ãƒƒã‚¯ï¼ˆ`string[]` ç”¨ï¼‰ã¨ `else` ãƒ–ãƒ©ãƒ³ãƒï¼ˆ`string` / ãã®ä»–ç”¨ï¼‰ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚`Uint8Array` ã¯ `Array.isArray()` ã§ `false` ã‚’è¿”ã™ãŸã‚ `else` ãƒ–ãƒ©ãƒ³ãƒã«å…¥ã‚Šã¾ã™ãŒã€`postMessage` ãŒãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãå‡¦ç†ã™ã‚‹ã‹æ˜ç¤ºçš„ã«åŒºåˆ¥ã—ãŸæ–¹ãŒæ„å›³ãŒæ˜ç¢ºã§ã™ã€‚

</blockquote></details>
<details>
<summary>docs/implementation_plans/extended-adapters-design.md (1)</summary><blockquote>

`33-34`: **Branded Type ã®è¨˜æ³•ãŒã‚³ã‚¢ã® `Brand<T, K>` ãƒ˜ãƒ«ãƒ‘ãƒ¼ã¨ä¸ä¸€è‡´**

è¨­è¨ˆæ›¸ã§ã¯ `string & { __brand: "OthelloBoard" }` ã¨æ‰‹å‹•ã§è¨˜è¿°ã—ã¦ã„ã¾ã™ãŒã€ã‚³ã‚¢ã§ã¯ `Brand<T, K>` ãƒ˜ãƒ«ãƒ‘ãƒ¼ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼ˆ`EdaxParser.ts` ç­‰ï¼‰ã§ã¯ `Brand<string, "Move">` ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹å ´åˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ãã¡ã‚‰ã«åˆã‚ã›ã‚‹ã¨ä¸€è²«æ€§ãŒä¿ãŸã‚Œã¾ã™ã€‚

<details>
<summary>ğŸ“ ææ¡ˆ</summary>

```diff
-  - `type OthelloBoard = string & { __brand: "OthelloBoard" };` (64æ–‡å­—ã® 0, 1, 2 æ–‡å­—åˆ—ç­‰)
-  - `type OthelloMove = string & { __brand: "OthelloMove" };` (e4, c3 ç­‰)
+  - `type OthelloBoard = Brand<string, "OthelloBoard">;` (64æ–‡å­—ã® 0, 1, 2 æ–‡å­—åˆ—ç­‰)
+  - `type OthelloMove = Brand<string, "OthelloMove">;` (e4, c3 ç­‰)
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/mortal.ts (2)</summary><blockquote>

`62-64`: **`as Record<string, unknown>` ã‚­ãƒ£ã‚¹ãƒˆã®ä»£ã‚ã‚Šã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ã‚¬ãƒ¼ãƒ‰ã®ä½¿ç”¨ã‚’æ¤œè¨**

å‹å®‰å…¨æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã€å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°ã‚’å°å…¥ã™ã‚‹ã¨ `as` ã‚­ãƒ£ã‚¹ãƒˆã‚’é¿ã‘ã‚‰ã‚Œã¾ã™ã€‚

<details>
<summary>â™»ï¸ ææ¡ˆ</summary>

```diff
+  private isReadyMessage(data: unknown): data is { type: "ready" } {
+    return typeof data === "object" && data !== null && (data as Record<string, unknown>).type === "ready";
+  }
+
   // ä½¿ç”¨ç®‡æ‰€:
-  await this.communicator.expectMessage<{ type: string }>(
-    (data) => typeof data === "object" && data !== null && (data as Record<string, unknown>).type === "ready",
-    { signal: AbortSignal.timeout(10000) }
-  );
+  await this.communicator.expectMessage(
+    (data): data is { type: "ready" } => this.isReadyMessage(data),
+    { signal: AbortSignal.timeout(10000) }
+  );
```
</details>

---

`16-20`: **`StockfishAdapter` ã¨æ§‹é€ ãŒã»ã¼åŒä¸€ â€” å°†æ¥çš„ãªå…±é€šåŒ–ã®ä½™åœ°**

`searchRaw`ã€`cleanupPendingTask`ã€`dispose` ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒ `StockfishAdapter` ã¨ã»ã¼åŒä¸€ã§ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯å„ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ç‹¬ç«‹æ€§ã‚’ä¿ã¤ãŸã‚ã«è¨±å®¹ã•ã‚Œã¾ã™ãŒã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ•°ãŒå¢—åŠ ã™ã‚‹å ´åˆã¯ã€ã“ã‚Œã‚‰ã®å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã‚’ `BaseAdapter` ã«å¼•ãä¸Šã’ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚




Also applies to: 74-120, 122-162

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/katago.ts (3)</summary><blockquote>

`92-92`: **`unknown` ã‚’å«ã‚€ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã¯å†—é•·ã§ã™ã€‚**

`string | string[] | Uint8Array | unknown` ã®å‹å®šç¾©ã«ãŠã„ã¦ã€`unknown` ã¯ä»–ã®ã™ã¹ã¦ã®å‹ã‚’åŒ…å«ã™ã‚‹ãŸã‚ã€å®Ÿè³ªçš„ã« `unknown` ã¨åŒç¾©ã§ã™ã€‚ã“ã‚Œã§ã¯å‹å®‰å…¨æ€§ãŒå¤±ã‚ã‚Œã¾ã™ã€‚`IEngineAdapter.searchRaw` ã®ã‚·ã‚°ãƒãƒãƒ£ã«åˆã‚ã›ã‚‹ãŸã‚ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å´ã®å®šç¾©ã‚‚å«ã‚ã¦è¦‹ç›´ã—ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚



```shell
#!/bin/bash
# ISearchTask ã® searchRaw ã‚·ã‚°ãƒãƒãƒ£ã‚’ç¢ºèª
rg -n "searchRaw" --type=ts -C2
```

---

`16-189`: **3ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼é–“ã§å¤§é‡ã®ã‚³ãƒ¼ãƒ‰é‡è¤‡ãŒã‚ã‚Šã¾ã™ã€‚**

`KataGoAdapter`ã€`EdaxAdapter`ã€`YaneuraOuAdapter` ã® `searchRaw`ã€`cleanupPendingTask`ã€`stop`ã€`dispose` ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒã»ã¼åŒä¸€ã§ã™ã€‚ã“ã‚Œã¯ DRY åŸå‰‡ã«åã—ã¦ãŠã‚Šã€ãƒã‚°ä¿®æ­£æ™‚ã«å…¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã§åŒã˜ä¿®æ­£ã‚’ç¹°ã‚Šè¿”ã™å¿…è¦ãŒç”Ÿã˜ã¾ã™ã€‚

å…±é€šã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®åŸºåº•ã‚¯ãƒ©ã‚¹ï¼ˆä¾‹: `WorkerBasedAdapter`ï¼‰ã«ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ»æ¢ç´¢ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚å„ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¯ `load()` ã¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«å›ºæœ‰ã®è¨­å®šã®ã¿ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹å½¢ã«ãªã‚Šã¾ã™ã€‚



```shell
#!/bin/bash
# 3ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼é–“ã®é‡è¤‡ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¢ºèª
echo "=== searchRaw implementations ==="
for f in $(fd -e ts 'katago.ts|edax.ts|yaneuraou.ts' --type f); do
  echo "--- $f ---"
  rg -n "searchRaw|cleanupPendingTask|pendingResolve|pendingReject|infoController" "$f"
done
```

---

`146-150`: **`stop()` ã§ `cleanupPendingTask` ã‚’å…ˆã«å‘¼ã‚“ã å¾Œã« stop ã‚³ãƒãƒ³ãƒ‰ã‚’é€ä¿¡ã™ã‚‹é †åºã«æ³¨æ„ã€‚**

`cleanupPendingTask("Search aborted")` ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é–‰ã˜ã¦ã‹ã‚‰ `createStopCommand()` ã‚’ãƒ¯ãƒ¼ã‚«ãƒ¼ã«é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒ stop ã‚³ãƒãƒ³ãƒ‰å—ä¿¡å¾Œã«æœ€å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™å ´åˆã€`messageUnsubscriber` ãŒã¾ã æœ‰åŠ¹ãªã®ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯å‘¼ã°ã‚Œã¾ã™ãŒã€`pendingResolve` ã¯æ—¢ã« `null` ã®ãŸã‚çµæœã¯ç ´æ£„ã•ã‚Œã¾ã™ã€‚å‹•ä½œã¨ã—ã¦ã¯æ„å›³é€šã‚Šã§ã™ãŒã€stop ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å¾Œã«ãƒ¯ãƒ¼ã‚«ãƒ¼ã‹ã‚‰ã®å¿œç­”ã‚’å¾…ã¤å¿…è¦ãŒã‚ã‚‹å ´åˆã¯é †åºã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineBridge.ts (2)</summary><blockquote>

`164-169`: **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ã‚­ãƒ£ã‚¹ãƒˆã§ `T_OPTIONS` ãŒæ¬ è½ã—ã¦ã„ã¾ã™ã€‚**

Line 166 ã§ `IMiddleware<T_INFO, T_RESULT>[]` ã«ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã„ã¾ã™ãŒã€`EngineFacade` ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ `IMiddleware<T_INFO, T_RESULT, T_OPTIONS>[]` ã‚’æœŸå¾…ã—ã¾ã™ï¼ˆ`EngineFacade.ts` Line 51 å‚ç…§ï¼‰ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ã‚ˆã‚Š `T_OPTIONS = IBaseSearchOptions` ã¨ãªã‚‹ãŸã‚ã€`T_OPTIONS` ãŒãã‚Œä»¥å¤–ã®å‹ã®å ´åˆï¼ˆä¾‹: `IGOSearchOptions`ï¼‰ã€å‹æƒ…å ±ãŒæ­£ã—ãä¼æ¬ã—ã¾ã›ã‚“ã€‚`as unknown as` ã§éš è”½ã•ã‚Œã¦ã„ã‚‹ãŸã‚å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ãŒã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å†…ã§ `context.options` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã«å‹ãŒä¸æ­£ç¢ºã«ãªã‚Šã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-      sortedMiddlewares as unknown as IMiddleware<T_INFO, T_RESULT>[],
+      sortedMiddlewares as unknown as IMiddleware<T_INFO, T_RESULT, T_OPTIONS>[],
```
</details>

---

`209-226`: **`dispose()` å†…ã§ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã« Map ã‚’å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚**

`this.adapters.keys()` ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã« `unregisterAdapter(id)` ãŒ `this.adapters.delete(id)` ã‚’å‘¼ã³ã¾ã™ã€‚ES ä»•æ§˜ä¸Šã€ç¾åœ¨ã®ã‚¨ãƒ³ãƒˆãƒªã®å‰Šé™¤ã¯å®‰å…¨ã§ã™ãŒã€æ„å›³ãŒèª­ã¿ã«ããè„†å¼±ã§ã™ã€‚ã¾ãŸã€ãƒ«ãƒ¼ãƒ—å¾Œã® `this.adapters.clear()` (Line 220) ã¯ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒˆãƒªãŒæ—¢ã«å‰Šé™¤æ¸ˆã¿ã®ãŸã‚å†—é•·ã§ã™ã€‚

<details>
<summary>â™»ï¸ ã‚­ãƒ¼ã‚’äº‹å‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹å®‰å…¨ãªæ–¹æ³•</summary>

```diff
  async dispose(): Promise<void> {
    const disposePromises: Promise<void>[] = [];
-   for (const adapterId of this.adapters.keys()) {
+   const adapterIds = [...this.adapters.keys()];
+   for (const adapterId of adapterIds) {
      const adapter = this.adapters.get(adapterId);
      if (adapter) {
        disposePromises.push(adapter.dispose());
      }
      this.unregisterAdapter(adapterId);
    }
    await Promise.all(disposePromises);
```
</details>

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineFacade.ts (2)</summary><blockquote>

`65-78`: **`loadingPromise` ãŒæˆåŠŸæ™‚ã«ã‚‚ `finally` ã§ã‚¯ãƒªã‚¢ã•ã‚Œã‚‹ãŸã‚ã€å†å‘¼ã³å‡ºã—æ™‚ã«å†ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚**

`finally` ãƒ–ãƒ­ãƒƒã‚¯ã§ `loadingPromise = null` ã‚’è¨­å®šã—ã¦ã„ã‚‹ãŸã‚ã€æˆåŠŸå¾Œã« `load()` ã‚’å†åº¦å‘¼ã¶ã¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã® `load()` ãŒå†å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãƒ†ã‚¹ãƒˆå "atomic load" ã®æ„å›³ãŒã€Œä¸¦è¡Œå‘¼ã³å‡ºã—ã®é‡è¤‡æ’é™¤ã€ã®ã¿ã§ã‚ã‚Œã°ç¾çŠ¶ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€çœŸã®å†ªç­‰æ€§ï¼ˆæˆåŠŸå¾Œã¯å†å®Ÿè¡Œã—ãªã„ï¼‰ãŒå¿…è¦ãªå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼æ™‚ã®ã¿ã‚¯ãƒªã‚¢ã™ã‚‹ã‚ˆã†å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚

<details>
<summary>â™»ï¸ å†ªç­‰ãƒ­ãƒ¼ãƒ‰ã«ã™ã‚‹å ´åˆã®ä¿®æ­£æ¡ˆ</summary>

```diff
  async load(): Promise<void> {
    if (this.loadingPromise) return this.loadingPromise;

    this.loadingPromise = (async () => {
-     try {
        const loader = this.loaderProvider ? await this.loaderProvider() : undefined;
        await this.adapter.load(loader);
-     } finally {
-       this.loadingPromise = null;
-     }
    })();

+   this.loadingPromise.catch(() => {
+     this.loadingPromise = null;
+   });
+
    return this.loadingPromise;
  }
```
</details>

---

`241-256`: **`onTelemetry` ã®ç™»éŒ²ã”ã¨ã«ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¸ã®å€‹åˆ¥ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãŒä½œæˆã•ã‚Œã¾ã™ã€‚**

Facade ã«è¤‡æ•°ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€ãã‚Œãã‚ŒãŒã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã® `onTelemetry` ã«å€‹åˆ¥ã«ç™»éŒ²ã•ã‚Œã¾ã™ã€‚ãƒªã‚¹ãƒŠãƒ¼æ•°ãŒå¤šã„å ´åˆã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å´ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãŒå¢—åŠ ã—ã¾ã™ã€‚`emitTelemetry` ã¨åŒæ§˜ã«ã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¸ã®è³¼èª­ã¯1ã¤ã ã‘ä¿æŒã—ã€Facade å†…ã§ `telemetryListeners` ã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã»ã†ãŒåŠ¹ç‡çš„ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/EngineFacade.test.ts (2)</summary><blockquote>

`98-108`: **ãƒ¢ãƒƒã‚¯ãƒ­ãƒ¼ãƒ€ãƒ¼ã« `loadResources` ã¨ `revoke` ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚**

`IEngineLoader` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ `loadResource`ã€`loadResources`ã€`revoke` ã®3ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¦æ±‚ã—ã¾ã™ãŒã€ãƒ¢ãƒƒã‚¯ã«ã¯ `loadResource` ã®ã¿å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚`adapter.load` ãŒãƒ¢ãƒƒã‚¯ã®ãŸã‚ç¾åœ¨ã¯å•é¡Œã«ãªã‚Šã¾ã›ã‚“ãŒã€å‹ã®æ­£ç¢ºæ€§ã®ãŸã‚ã«å®Œå…¨ãªãƒ¢ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã»ã†ãŒæœ›ã¾ã—ã„ã§ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-    const mockLoader = { loadResource: vi.fn() };
+    const mockLoader = {
+      loadResource: vi.fn(),
+      loadResources: vi.fn(),
+      revoke: vi.fn(),
+    };
```
</details>

---

`171-191`: **ã‚¢ãƒˆãƒŸãƒƒã‚¯ãƒ­ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆã¯ä¸¦è¡Œå‘¼ã³å‡ºã—ã®ã¿ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚**

ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆã¯åŒæ™‚å‘¼ã³å‡ºã—ã®é‡è¤‡æ’é™¤ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ãŒã€`loadingPromise` ãŒ `finally` ã§ã‚¯ãƒªã‚¢ã•ã‚Œã‚‹ãŸã‚ã€æˆåŠŸå¾Œã®å†å‘¼ã³å‡ºã—ã§ã¯ `adapter.load` ãŒå†å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã®å‹•ä½œãŒæ„å›³çš„ã§ã‚ã‚‹ã‹ã€ã¾ãŸã¯å†ªç­‰ã§ã‚ã‚‹ã¹ãã‹ã‚’æ˜ç¢ºã«ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>

`138-145`: **`stop()` ã® `console.warn` ãŒä»–ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨ä¸æ•´åˆã§ã™ã€‚**

`KataGoAdapter` ã¨ `EdaxAdapter` ã® `stop()` ã«ã¯ `console.warn` ãŒã‚ã‚Šã¾ã›ã‚“ãŒã€`YaneuraOuAdapter` ã®ã¿ Line 141 ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«è­¦å‘Šã‚’å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼é–“ã§çµ±ä¸€ã™ã‚‹ã‹ã€ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ç™ºè¡Œã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>

</blockquote></details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->
--
author:	coderabbitai
association:	none
edited:	false
status:	commented
--
**Actionable comments posted: 11**

> [!CAUTION]
> Some comments are outside the diff and canâ€™t be posted inline due to platform limitations.
> 
> 
> 
> <details>
> <summary>âš ï¸ Outside diff range comments (3)</summary><blockquote>
> 
> <details>
> <summary>docs/ARCHITECTURE.md (1)</summary><blockquote>
> 
> `77-77`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **èª¤å­—: ã€Œãƒªã‚½ ãƒ¼ã‚¹ã€**
> 
> ä¸è¦ãªã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ã€Œãƒªã‚½ãƒ¼ã‚¹ã€ã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚
> 
> </blockquote></details>
> <details>
> <summary>packages/adapter-yaneuraou/src/USIParser.ts (1)</summary><blockquote>
> 
> `83-100`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **ç©ºæ–‡å­—åˆ—ã® `Move` ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã‚­ãƒ£ã‚¹ãƒˆã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚**
> 
> Line 90 ã§ `(parts[1] || "") as Move` ã¨ã—ã¦ã„ã¾ã™ãŒã€`bestmove` ã®å¾Œã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ¬ è½ã—ãŸä¸æ­£ãªå…¥åŠ›ã®å ´åˆã€ç©ºæ–‡å­—åˆ—ãŒ `Move` ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã«ã‚­ãƒ£ã‚¹ãƒˆã•ã‚Œã¾ã™ã€‚ä¸‹æµã®ã‚³ãƒ¼ãƒ‰ãŒç©ºã® `Move` ã‚’æƒ³å®šã—ã¦ã„ãªã„å ´åˆã€ã‚µã‚¤ãƒ¬ãƒ³ãƒˆãªä¸å…·åˆã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç©ºæ–‡å­—åˆ—ã®å ´åˆã¯ `null` ã‚’è¿”ã™ã‹ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚
> 
> 
> <details>
> <summary>ğŸ›¡ï¸ ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
>      const parts = line.split(" ");
> -    const result: ISHOGISearchResult = {
> -      bestMove: (parts[1] || "") as Move,
> -      raw: line,
> -    };
> +    const bestMove = parts[1];
> +    if (!bestMove) return null;
> +
> +    const result: ISHOGISearchResult = {
> +      bestMove: bestMove as Move,
> +      raw: line,
> +    };
> ```
> </details>
> 
> </blockquote></details>
> <details>
> <summary>packages/adapter-stockfish/src/stockfish.ts (1)</summary><blockquote>
> 
> `105-130`: _âš ï¸ Potential issue_ | _ğŸŸ  Major_
> 
> **ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²ã™ã‚‹ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã€‚**
> 
> Edax ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨åŒã˜å•é¡Œã§ã™ã€‚Line 105-111 ã§ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å¾Œã« Line 117 ã§ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²ã‚’ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å‰ã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚
> 
> <details>
> <summary>ä¿®æ­£æ¡ˆ: ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²ã‚’ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å‰ã«ç§»å‹•</summary>
> 
> ```diff
> +    this.messageUnsubscriber?.();
> +
> +    this.messageUnsubscriber = this.communicator?.onMessage((data) => {
> +      if (typeof data !== "string") return;
> +
> +      const info = this.parser.parseInfo(data);
> +      if (info) {
> +        this.infoController?.enqueue(info);
> +      }
> +
> +      const result = this.parser.parseResult(data);
> +      if (result) {
> +        this.pendingResolve?.(result);
> +        this.cleanupPendingTask();
> +      }
> +    }) || null;
> +
>      if (Array.isArray(command)) {
>        for (const cmd of command) {
>          this.communicator?.postMessage(cmd);
>        }
>      } else {
>        this.communicator?.postMessage(command);
>      }
>  
> -    // æ—¢å­˜ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’è§£é™¤ (2026 Best Practice: Task-scoped listener management)
> -    // ä»¥å‰ã®æ¢ç´¢ã‚¿ã‚¹ã‚¯ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ã«æ··å…¥ã™ã‚‹ã“ã¨ã‚’é˜²æ­¢ã€‚
> -    this.messageUnsubscriber?.();
> -
> -    this.messageUnsubscriber = this.communicator?.onMessage((data) => {
> -      if (typeof data !== "string") return;
> -
> -      const info = this.parser.parseInfo(data);
> -      if (info) {
> -        this.infoController?.enqueue(info);
> -      }
> -
> -      const result = this.parser.parseResult(data);
> -      if (result) {
> -        this.pendingResolve?.(result);
> -        this.cleanupPendingTask();
> -      }
> -    }) || null;
> ```
> </details>
> 
> </blockquote></details>
> 
> </blockquote></details>

<details>
<summary>ğŸ¤– Fix all issues with AI agents</summary>

```
In `@docs/ARCHITECTURE.md`:
- Line 14: ç•ªå·ãŒé‡è¤‡ã—ã¦ã„ã‚‹ç®‡æ‰€ã¯ãƒªã‚¹ãƒˆã®é …ç›®è¦‹å‡ºã—ã€Œ3.  **æœ€æ–°ã® Web æ¨™æº– API ã®æ´»ç”¨ (2026
Ready)**ã€ã§ã€ã“ã‚Œã‚’æ¬¡ã®é †åºã«åˆã‚ã›ã¦ã€Œ4.  **æœ€æ–°ã® Web æ¨™æº– API ã®æ´»ç”¨ (2026
Ready)**ã€ã«ä¿®æ­£ã—ã¦ãã ã•ã„ï¼ˆè©²å½“ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒã¤è¦‹å‡ºã—ã‚’æ¤œç´¢ã—ã¦æ•°å­—ã‚’æ›´æ–°ã—ã€ä»¥é™ã®ç•ªå·ä»˜ã‘ãŒã‚ã‚Œã°æ•´åˆã™ã‚‹ã‚ˆã†ã«ç¢ºèªã—ã¦ãã ã•ã„ï¼‰ã€‚

In `@packages/adapter-edax/src/edax.ts`:
- Around line 100-123: Register the message listener before sending commands to
avoid losing fast/synchronous replies: call this.messageUnsubscriber?.() to
clear any existing listener, then set this.messageUnsubscriber =
this.communicator?.onMessage(...) (the callback should still parse via
this.parser.parseInfo and parseResult, call this.infoController?.enqueue,
this.pendingResolve?.(result) and this.cleanupPendingTask()), and only after
that call this.communicator?.postMessage(...) (or iterate if command is an
array). Ensure you use the existing symbols communicator, messageUnsubscriber,
onMessage, postMessage, parser.parseInfo, parser.parseResult,
infoController.enqueue, pendingResolve, and cleanupPendingTask so the listener
is active before any Worker response.
- Line 78: The function signature for searchRaw currently uses a union that
includes unknown (searchRaw(...: string | string[] | Uint8Array | unknown)),
which collapses the union to unknown and disables type safety; remove unknown
from the union and instead provide explicit overloads or a bounded
generic/type-guarded parameter for the accepted inputs so callers are properly
typed. Update the searchRaw declaration (and any callers) to accept only string
| string[] | Uint8Array or add well-typed overloads/guards, keeping the return
type ISearchTask<IOthelloSearchInfo, IOthelloSearchResult> intact and adjusting
input validation logic inside the searchRaw implementation accordingly.

In `@packages/adapter-katago/src/__tests__/katago.test.ts`:
- Around line 30-40: The mockLoader object (mockLoader) is defined once and not
reset between tests, causing cumulative call counts on loadResource,
loadResources and revoke; fix by resetting or recreating the mocks in a
beforeEach: either move the mockLoader construction into the test suite's
beforeEach so a fresh object is created per test, or call
vi.clearAllMocks()/vi.resetAllMocks() and reapply mockImplementation for
loadResource and loadResources (or call mockReset/mockClear on
mockLoader.loadResource, mockLoader.loadResources, mockLoader.revoke) before
each test to ensure call counts and assertions (e.g., revoke assertion) are
isolated.

In `@packages/adapter-katago/src/GTPParser.ts`:
- Around line 59-65: The replacement in createSearchCommand (IGOSearchOptions
handling) currently strips semicolons via safeSgf =
options.sgf.replace(/[\r\n\0;]/g, "") which corrupts valid SGF (semicolons are
node delimiters); change the sanitization to only remove newlines and nulls
(e.g. use /[\r\n\0]/g) so semicolons are preserved, keep the resulting string
assigned to safeSgf and still use it in the commands.push(`loadsgf ${safeSgf}`)
call to prevent command-injection while preserving SGF integrity.

In `@packages/adapter-katago/src/katago.ts`:
- Around line 46-59: The sources map in katago.ts contains placeholder SRI
hashes and size=0 for the main and weights entries (properties under sources ->
main and sources -> weights, typed as IEngineSourceConfig); replace the dummy
"sha384-DummyHash..." values and the zero sizes with the real SRI hashes and
correct resource byte sizes for the katago.js and katago.bin.gz artifacts, and
ensure the loader logic that consumes sources performs Subresource Integrity
verification using those SRI values (same validation approach used by
MortalAdapter or the existing SRI check codepath) so the runtime enforces
integrity when dynamically loading these assets.
- Around line 115-138: ç¾åœ¨ã®å®Ÿè£…ã¯ã‚³ãƒãƒ³ãƒ‰é€ä¿¡(this.communicator?.postMessage)ã®å¾Œã« onMessage
ãƒãƒ³ãƒ‰ãƒ©(this.communicator?.onMessage)ã‚’ç™»éŒ²ã—ã¦ãŠã‚Šã€å¿œç­”ã‚’å–ã‚Šã“ã¼ã™å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒãƒ³ãƒ‰ãƒ©ç™»éŒ²ã‚’å…ˆã«è¡Œã†ã‚ˆã†ä¿®æ­£ã—ã¦ãã ã•ã„ï¼šã¾ãšæ—¢å­˜ã®
messageUnsubscriber ã‚’å‘¼ã³å‡ºã—ã¦ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—(this.messageUnsubscriber?.()), æ¬¡ã«
this.messageUnsubscriber = this.communicator?.onMessage(...) ã§ parser.parseInfo
/ parser.parseResult ã‚’å‡¦ç†ã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã—ã€æœ€å¾Œã«é…åˆ—/å˜ä¸€ã®ã‚³ãƒãƒ³ãƒ‰ã‚’
this.communicator?.postMessage(...)
ã§é€ä¿¡ã™ã‚‹ã€‚parser.parseInfoâ†’infoController?.enqueue ã¨
parser.parseResultâ†’pendingResolve?/cleanupPendingTask ã®æ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã¯ãã®ã¾ã¾ä½¿ã£ã¦ãã ã•ã„ã€‚

In `@packages/adapter-mortal/src/mortal.ts`:
- Around line 75-81: Calling cleanupPendingTask() in searchRaw without a reason
clears pendingReject without invoking it, leaving the previous search result
Promise forever pending; update searchRaw to call cleanupPendingTask with a
rejection reason (e.g., a cancellation EngineError or a descriptive Error) so
pendingReject is invoked, or change cleanupPendingTask itself to call
pendingReject(reason) before nulling; locate the symbols searchRaw,
cleanupPendingTask, and pendingReject to apply the fix so any existing pending
result Promise is properly rejected when a new search starts.
- Around line 96-114: The code currently sends only the first element when
command is an array and registers/removes message handlers in the wrong order;
update the block so you first remove any old handler, then register a new
handler via this.communicator?.onMessage(...) (assigning it to
this.messageUnsubscriber) and only after that send the command(s). If command is
an array, iterate over each element and call this.communicator.postMessage(item)
for each; if itâ€™s a single value call postMessage(command). Preserve the
existing parser.parseInfo/parseResult handling inside the new handler and keep
invoking this.infoController?.enqueue(info), this.pendingResolve?.(result), and
this.cleanupPendingTask() as before. Ensure you reference/modify the
communicator, postMessage, messageUnsubscriber, parser, infoController,
pendingResolve, and cleanupPendingTask symbols.

In `@packages/adapter-yaneuraou/src/yaneuraou.ts`:
- Around line 148-150: sendOptionToWorker silently drops commands when
this.communicator is uninitialized due to the optional chaining; change it to
explicitly check for communicator and throw the same NOT_READY error used in
searchRaw instead of no-op. Locate sendOptionToWorker and replace the optional
chain call this.communicator?.postMessage(this.parser.createOptionCommand(name,
value)) with an explicit guard that throws the NOT_READY error when
this.communicator is falsy, otherwise call
this.communicator.postMessage(this.parser.createOptionCommand(name, value)).

In `@packages/core/src/types.ts`:
- Around line 209-214: The IMiddleware generic parameter order is inconsistent
with project convention (should be T_OPTIONS, T_INFO, T_RESULT); update the
declaration of IMiddleware in this file to export interface
IMiddleware<T_OPTIONS = IBaseSearchOptions, T_INFO = unknown, T_RESULT =
unknown> { ... } and then update all usages, notably the IMiddleware usage in
EngineFacade.ts (the declaration at line ~51) to match the new ordering,
adjusting type argument positions wherever IMiddleware is referenced to preserve
original types. Ensure the onCommand/onInfo/onResult signatures use the renamed
generic positions (context: IMiddlewareContext<T_OPTIONS>) and run TypeScript
checks to fix any remaining mismatches.
```

</details>

<details>
<summary>ğŸ§¹ Nitpick comments (8)</summary><blockquote>

<details>
<summary>docs/TECHNICAL_SPECS.md (2)</summary><blockquote>

`12-13`: **ç¯€ç•ªå·ã®é‡è¤‡ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„**

ã€Œ1-2ã€ãŒãƒ‰ãƒ¡ã‚¤ãƒ³æ‹¡å¼µã¨ãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥ã§é‡è¤‡ã—ã¦ã„ã¾ã™ã€‚èª­ã¿ã‚„ã™ã•ã®ãŸã‚ãƒ­ãƒ¼ãƒ‰æˆ¦ç•¥å´ã¯ã€Œ1-3ã€ãªã©ã«æƒãˆã¦ãã ã•ã„ã€‚  



Also applies to: 20-20

---

`62-62`: **ã€Œã‚«ãƒãƒ¬ãƒƒã‚¸100%ã€ã¯æ ¹æ‹ ã®æ˜ç¤ºã‹è¡¨ç¾ã®ç·©å’Œã‚’æ¨å¥¨**

ãƒ†ã‚¹ãƒˆæ–¹é‡ã®è¨˜è¼‰ã¨ã—ã¦ã¯å¼·ã„æ–­å®šãªã®ã§ã€è¨ˆæ¸¬æ–¹æ³•ã®æ˜è¨˜ã‹ã€Œé«˜ã„ã‚«ãƒãƒ¬ãƒƒã‚¸ã€ç­‰ã¸ã®è¡¨ç¾èª¿æ•´ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/USIParser.ts (1)</summary><blockquote>

`35-78`: **parseInfo ã®ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã¯æ¦‚ã­æ­£ç¢ºã§ã™ã€‚**

å‹ã‚¬ãƒ¼ãƒ‰ `typeof data !== "string"` ã§éæ–‡å­—åˆ—ã‚’æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã—ã¦ãŠã‚Šã€`any` ã‚’å›é¿ã—ã¤ã¤ `IProtocolParser` ã®ã‚·ã‚°ãƒãƒãƒ£ã«é©åˆã—ã¦ã„ã¾ã™ã€‚

1ç‚¹ã ã‘æ³¨æ„: Line 57 ã§ `score` ãƒ–ãƒ­ãƒƒã‚¯å†…ã® `parts[++i]` ãŒç¯„å›²å¤–ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ãŒç†è«–ä¸Šã‚ã‚Šå¾—ã¾ã™ï¼ˆä¾‹: `info score cp` ã§å€¤ãŒæ¬ è½ã—ãŸå…¥åŠ›ï¼‰ã€‚`parseInt(undefined, 10)` ã¯ `NaN` ã‚’è¿”ã— `|| 0` ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã‚‹ãŸã‚å®Ÿå®³ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å …ç‰¢æ€§ã®è¦³ç‚¹ã‹ã‚‰ã¯å¢ƒç•Œãƒã‚§ãƒƒã‚¯ãŒã‚ã‚‹ã¨ãªãŠè‰¯ã„ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/yaneuraou.ts (2)</summary><blockquote>

`83-137`: **`searchRaw` ã® `command` å¼•æ•°ã« `unknown` ãŒå«ã¾ã‚Œã‚‹ç‚¹ã«ã¤ã„ã¦ã€‚**

ã‚·ã‚°ãƒãƒãƒ£ `string | string[] | Uint8Array | unknown` ã¯ã€`unknown` ãŒä»–ã®ã™ã¹ã¦ã®å‹ã‚’åŒ…å«ã™ã‚‹ãŸã‚ã€å®Ÿè³ªçš„ã« `unknown` ã¨ç­‰ä¾¡ã§ã™ã€‚Zero-Serialization Transfer ã®æ„å›³ï¼ˆ`IProtocolParser` ã®è¨­è¨ˆæ–¹é‡ï¼‰ã¯ç†è§£ã§ãã¾ã™ãŒã€Line 111 ã§ä»»æ„ã® `unknown` å€¤ãŒ `postMessage` ã«ãã®ã¾ã¾æ¸¡ã•ã‚Œã‚‹ãŸã‚ã€å‹å®‰å…¨æ€§ãŒå¼±ã¾ã£ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯ã‚³ã‚¢ã® `IProtocolParser` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å´ã®è¨­è¨ˆåˆ¤æ–­ã«èµ·å› ã™ã‚‹ãŸã‚ã€æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿®æ­£ã™ã‚‹ç¯„å›²ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å°†æ¥çš„ã«ã‚³ã‚¢å´ã§ `Transferable | string | string[] | Uint8Array` ã®ã‚ˆã†ãªã‚ˆã‚Šå…·ä½“çš„ãªå‹ã«çµã‚Šè¾¼ã‚€ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

---

`139-146`: **`stop()` ã§ãƒ—ãƒ­ãƒŸã‚¹æ‹’å¦ãŒã‚³ãƒãƒ³ãƒ‰é€ä¿¡ã‚ˆã‚Šå…ˆã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚**

Line 140 ã® `cleanupPendingTask("Search aborted")` ãŒ `pendingReject` ã‚’å‘¼ã³å‡ºã—ã¦ãƒ—ãƒ­ãƒŸã‚¹ã‚’æ‹’å¦ã—ãŸå¾Œã€Line 145 ã§ `stop` ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¨ãƒ³ã‚¸ãƒ³ã«é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚ã‚¨ãƒ³ã‚¸ãƒ³ãŒ `bestmove` ã‚’è¿”ã™å‰ã«ãƒ—ãƒ­ãƒŸã‚¹ãŒæ‹’å¦ã•ã‚Œã‚‹ã®ã¯æ„å›³çš„ãª abort ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¨ã—ã¦å¦¥å½“ã§ã™ãŒã€`cleanupPendingTask` å†…ã® `infoController.close()` ã«ã‚ˆã‚Šã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚‚é–‰ã˜ã‚‰ã‚Œã‚‹ãŸã‚ã€`stop` ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å¾Œã«ã‚¨ãƒ³ã‚¸ãƒ³ã‹ã‚‰å±Šãå¯èƒ½æ€§ã®ã‚ã‚‹è¿½åŠ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæœ€å¾Œã® `info` è¡Œãªã©ï¼‰ã¯å‡¦ç†ã•ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚ŒãŒæ„å›³é€šã‚Šã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€`stop` ã‚³ãƒãƒ³ãƒ‰å¾Œã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ã¤å¿…è¦ãŒã‚ã‚‹å ´åˆã¯é †åºã®è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/__tests__/EdaxParser.test.ts (1)</summary><blockquote>

`4-12`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä¸ååˆ†**

`parseInfo` ã®åŸºæœ¬ã‚±ãƒ¼ã‚¹ã®ã¿ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚`parseResult`ã€`createSearchCommand`ï¼ˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢å«ã‚€ï¼‰ã€`createOptionCommand`ã€ãŠã‚ˆã³éæ–‡å­—åˆ—å…¥åŠ›ï¼ˆ`Uint8Array`, `unknown`ï¼‰ã®ã‚¬ãƒ¼ãƒ‰å‡¦ç†ã®ãƒ†ã‚¹ãƒˆãŒæ¬ ã‘ã¦ã„ã¾ã™ã€‚

ç‰¹ã« `createSearchCommand` ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå‡¦ç†ã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«é–¢ã‚ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚



ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/__tests__/GTPParser.test.ts (1)</summary><blockquote>

`4-22`: **åŸºæœ¬ãƒ†ã‚¹ãƒˆã¯æ­£ã—ã„ã§ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ç”Ÿæˆã®ãƒ†ã‚¹ãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚**

`parseResult` ã¨ `parseInfo` ã®ãƒ†ã‚¹ãƒˆã¯æ­£ç¢ºã§ã™ã€‚`createSearchCommand`ï¼ˆç‰¹ã« SGF ã‚µãƒ‹ã‚¿ã‚¤ã‚ºï¼‰ã¨ `createOptionCommand` ã®ãƒ†ã‚¹ãƒˆè¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/__tests__/katago.test.ts (1)</summary><blockquote>

`58-75`: **ãƒ†ã‚¹ãƒˆãŒ Facade ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç›´æ¥æ“ä½œã—ã¦ã„ã¾ã™ã€‚**

`communicator` ã‚„ `_status` ã‚’ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ç›´æ¥ã‚»ãƒƒãƒˆã—ã¦ãŠã‚Šã€ãƒ†ã‚¹ãƒˆãŒå†…éƒ¨å®Ÿè£…ã«å¼·ãçµåˆã—ã¦ã„ã¾ã™ã€‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§å†…éƒ¨æ§‹é€ ãŒå¤‰ã‚ã‚‹ã¨ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã¾ã™ã€‚

ç†æƒ³çš„ã«ã¯ `load()` ã‚’çµŒç”±ã—ã¦ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ `ready` çŠ¶æ…‹ã«ã™ã‚‹æ–¹ãŒå …ç‰¢ã§ã™ãŒã€ãƒ†ã‚¹ãƒˆã®ç°¡ä¾¿ã•ã¨ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã¯ç†è§£ã§ãã¾ã™ã€‚å°†æ¥çš„ã« `load()` ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¸ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

Based on learnings: ã€ŒFacade ãƒ‘ã‚¿ãƒ¼ãƒ³ã®éµå®ˆ: åˆ©ç”¨è€…å‘ã‘ã® `IEngine` ã¨ã€å†…éƒ¨å®Ÿè£…ç”¨ã® `IEngineAdapter` ã‚’å³æ ¼ã«åˆ†ã‘ã€æ„å›³ã—ãªã„å†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãã“ã¨ã€

</blockquote></details>

</blockquote></details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->
--
author:	coderabbitai
association:	none
edited:	false
status:	commented
--
**Actionable comments posted: 10**

> [!CAUTION]
> Some comments are outside the diff and canâ€™t be posted inline due to platform limitations.
> 
> 
> 
> <details>
> <summary>âš ï¸ Outside diff range comments (4)</summary><blockquote>
> 
> <details>
> <summary>packages/core/src/__tests__/EngineFacade.test.ts (1)</summary><blockquote>
> 
> `138-138`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **å‹ã®ä¸æ•´åˆ: `IBaseSearchResult` â†’ `IMockResult`**
> 
> Line 54 ã§ã¯ `ISearchTask<IBaseSearchInfo, IMockResult>` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã“ã§ã¯ `IBaseSearchResult` ã«ãªã£ã¦ã„ã¾ã™ã€‚ãƒ¢ãƒƒã‚¯ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®æˆ»ã‚Šå€¤å‹ã¨ä¸€è‡´ã•ã›ã¦ãã ã•ã„ã€‚
> 
> 
> <details>
> <summary>ğŸ”§ ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
> -    const task = (vi.mocked(adapter.searchRaw).mock.results[0].value as ISearchTask<IBaseSearchInfo, IBaseSearchResult>);
> +    const task = (vi.mocked(adapter.searchRaw).mock.results[0].value as ISearchTask<IBaseSearchInfo, IMockResult>);
> ```
> </details>
> 
> </blockquote></details>
> <details>
> <summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>
> 
> `42-52`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ SRI ãƒãƒƒã‚·ãƒ¥ãŒæ®‹å­˜ã—ã¦ã„ã¾ã™ã€‚**
> 
> `sha384-DummyHashForValidationToPassDuringDevelopment...` ã¨ `size: 0` ã¯é–‹ç™ºç”¨ã®ä»®å€¤ã§ã™ã€‚æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹å‰ã«å®Ÿéš›ã®ãƒãƒƒã‚·ãƒ¥å€¤ã¸ã®ç½®æ›ãŒå¿…è¦ã§ã™ã€‚ç›£æŸ»ãƒ¬ãƒãƒ¼ãƒˆï¼ˆé …ç›® 2ï¼‰ã§ã‚‚æŒ‡æ‘˜ã•ã‚Œã¦ã„ã¾ã™ã€‚TODO ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦è¿½è·¡ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
> 
> ```diff
>        // Security: Valid SRI format for validation to pass during development.
>        // MUST be updated to the actual binary hash upon publication.
> +      // TODO(Phase-3): Replace with actual SRI hash and file size before release
>        sri: "sha384-DummyHashForValidationToPassDuringDevelopment1234567890abcdefghij", 
> ```
> 
> </blockquote></details>
> <details>
> <summary>packages/core/src/bridge/EngineFacade.ts (1)</summary><blockquote>
> 
> `279-296`: _âš ï¸ Potential issue_ | _ğŸŸ  Major_
> 
> **`dispose()` ã§ `telemetryListeners` ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ãªã„**
> 
> Line 288 ã§ `infoListeners.clear()` ã¯å‘¼ã°ã‚Œã¦ã„ã¾ã™ãŒã€`telemetryListeners` ã®ã‚¯ãƒªã‚¢ãŒæ¼ã‚Œã¦ã„ã¾ã™ã€‚dispose å¾Œã‚‚ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒªã‚¹ãƒŠãƒ¼ã¸ã®å‚ç…§ãŒæ®‹ã‚Šã€GC ã‚’å¦¨ã’ã¾ã™ã€‚
> 
> <details>
> <summary>ğŸ› ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
>     this.adapterUnsubscribers.clear();
>     this.infoListeners.clear();
> +   this.telemetryListeners.clear();
> 
>     await this.stop();
> ```
> </details>
> 
> </blockquote></details>
> <details>
> <summary>packages/core/src/bridge/EngineBridge.ts (1)</summary><blockquote>
> 
> `211-228`: _âš ï¸ Potential issue_ | _ğŸ”´ Critical_
> 
> **`dispose()` ã§ Map ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã« `unregisterAdapter` ã‚’å‘¼ã¶ã¨è¦ç´ ãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹å¯èƒ½æ€§**
> 
> `this.adapters.keys()` ã¯ live iterator ã‚’è¿”ã™ãŸã‚ã€`unregisterAdapter` å†…ã® `this.adapters.delete(id)` ã«ã‚ˆã£ã¦æœªè¨ªå•ã®ã‚¨ãƒ³ãƒˆãƒªãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã€ãã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­è§£é™¤ãŒè¡Œã‚ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
> 
> <details>
> <summary>ğŸ› ä¿®æ­£æ¡ˆ: ã‚­ãƒ¼ã‚’é…åˆ—ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã‹ã‚‰ã‚¤ãƒ†ãƒ¬ãƒ¼ãƒˆ</summary>
> 
> ```diff
>   async dispose(): Promise<void> {
>     const disposePromises: Promise<void>[] = [];
> -   for (const adapterId of this.adapters.keys()) {
> +   for (const adapterId of [...this.adapters.keys()]) {
>       const adapter = this.adapters.get(adapterId);
>       if (adapter) {
>         disposePromises.push(adapter.dispose());
>       }
>       this.unregisterAdapter(adapterId);
>     }
> ```
> </details>
> 
> </blockquote></details>
> 
> </blockquote></details>

<details>
<summary>ğŸ¤– Fix all issues with AI agents</summary>

```
In @.coderabbit.yaml:
- Around line 17-26: `.coderabbit.yaml` ã§æœªå®šç¾©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ `reviews.instructions`
ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã€`reviews.path_instructions` ã«ç§»è¡Œã—ã¦ãã ã•ã„ã€‚å…·ä½“çš„ã«ã¯ `reviews.instructions`
ã‚’å‰Šé™¤ã—ã€ãã®ä¸­èº«ï¼ˆæ—¥æœ¬èªã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆï¼‰ã‚’ `reviews.path_instructions` ã®é©åˆ‡ãª YAML
é…åˆ—/ãƒãƒƒãƒ”ãƒ³ã‚°å½¢å¼ã«ç§»ã—ã¦ã‚¹ã‚­ãƒ¼ãƒã«æº–æ‹ ã•ã›ã€ã‚­ãƒ¼åã¯å¿…ãš `reviews.path_instructions` ã«çµ±ä¸€ã—ã¦ãã ã•ã„ï¼ˆè©²å½“ã™ã‚‹è­˜åˆ¥å­:
reviews.instructions â†’
reviews.path_instructionsï¼‰ã€‚ã¾ãŸæ—¢å­˜ã®ãƒ«ãƒ¼ãƒ«ï¼ˆå®Œå…¨æ—¥æœ¬èªåŒ–ã€å‹å®‰å…¨æ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€i18nã€TDDï¼‰ã¯ãã®ã¾ã¾æ–°ã‚­ãƒ¼ã¸ã‚³ãƒ”ãƒ¼ã—ã€YAML
ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¨ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚

In `@docs/reviews/pr_15_audit_report.md`:
- Around line 10-13: The markdown contains literal newline escape sequences that
are being expanded (the character class and escapes like [\r\n\0;] and the
sequences "\r\n"), so edit the markdown sentence to place the entire pattern and
escape sequences inside inline code ticks (e.g., `[\r\n\0;]`) and ensure any
backslashes are escaped in the source (use double backslashes in the raw file if
your renderer requires it) so the backslash sequences render literally instead
of creating line breaks.

In `@packages/adapter-edax/src/edax.ts`:
- Around line 41-49: The sources record for the EDAX adapter contains a
placeholder SRI and size (see sources -> main, fields url, sri, size and type
IEngineSourceConfig); replace the dummy "sha384-DummyHash..." and size: 0 with
the actual SRI hash and correct byte size for the real WASM/JS bundle, and
ensure any loader/verification logic that consumes IEngineSourceConfig uses
those values for integrity checking before executing the worker-js bundle.

In `@packages/adapter-edax/src/EdaxParser.ts`:
- Line 60: The template literal in the EdaxParser command uses the
falsy-coalescing || which causes a provided depth: 0 to be ignored; update the
expression used when pushing the "go" command (the commands.push call that
references options.depth) to use the nullish coalescing operator (options.depth
?? 20) so that 0 is honored while still defaulting to 20 when depth is null or
undefined.

In `@packages/adapter-mortal/src/mortal.ts`:
- Around line 132-136: The stop() method in MortalAdapter sends a hardcoded
message instead of using the parser to build the stop command; change stop() to
call this.parser.createStopCommand() and send that via
this.communicator.postMessage (preserving the existing
this.cleanupPendingTask("Search aborted") behavior and the early return when
!this.communicator) so the adapter follows the same command-generation pattern
as KataGoAdapter.stop().
- Around line 138-143: Replace the hardcoded postMessage payload in
sendOptionToWorker with the parser-built command: call
MahjongJSONParser.createOptionCommand(name, value) and pass its result to
this.communicator.postMessage instead of the manual object; keep the existing
readiness check and EngineError throw, and mirror the same delegation pattern
used by stop() so all worker commands are created by the parser (reference
sendOptionToWorker, MahjongJSONParser.createOptionCommand, and stop()).

In `@packages/core/src/bridge/EngineFacade.ts`:
- Around line 65-78: EngineFacade.load() currently clears loadingPromise in
finally and calls adapter.load() unconditionally, causing double-loading; modify
load() to first check the adapter's current status (e.g., this.adapter.status or
an isLoaded/isReady method) and return early if the adapter is already ready, or
alternatively add a guard at adapter implementations
(Stockfish/KataGo/Mortal/Edax/YaneuraOu) so their load() no-ops when status is
ready; ensure loadingPromise is only cleared when an actual state transition
completes or on error so repeated calls during/after success do not trigger
adapter.load() again.

In `@packages/core/src/bridge/EngineLoader.ts`:
- Around line 104-123: The verifySRI function currently only validates "sha384"
and silently skips unknown algorithms; update verifySRI (and its loop over
requirements/req/algo/hashBase64) to treat any unsupported algorithm as a
verification failure by logging an error (or throwing) and returning false
instead of continuing, and add explicit branches for at least "sha256" and
"sha512" using crypto.subtle.digest with "SHA-256"/"SHA-512" and the same base64
comparison logic so all specified algos are validated.
- Around line 49-96: The current parallel load in EngineLoader uses Promise.all
and immediately revokes existing Blob URLs (this.activeBlobs.get / this.revoke)
before fetching, which leaves revoked entries gone if fetchResource or storage
operations fail; change the logic to defer revoking until after a successful
load or add rollback: for each entry (inside the entries.map async), keep the
existing blob URL in a temp variable (e.g., oldBlob), perform fetchResource,
verifySRI, createObjectURL and set this.activeBlobs.set(blobKey, url) and
results[key]=url first, and only then call this.revoke(oldBlob) and
remove/replace the map entry; alternatively, if any step fails, ensure you
restore oldBlob into this.activeBlobs (or avoid mutating activeBlobs until
success) so that fetchResource, verifySRI, storage.get/set, URL.createObjectURL,
revoke, and activeBlobs state remain consistent even when Promise.all partially
fails.

In `@packages/core/src/types.ts`:
- Line 128: The IEngineBridge.use declaration currently uses two generics (I, R)
which mismatches IMiddleware<T_OPTIONS, T_INFO, T_RESULT> and the
EngineBridge.use implementation; update the interface to use three generics in
the consistent project order and names (T_OPTIONS, T_INFO, T_RESULT) and accept
IMiddleware<T_OPTIONS, T_INFO, T_RESULT> as the parameter so the signature
matches the EngineBridge.use implementation and IMiddleware definition.
```

</details>

<details>
<summary>ğŸ§¹ Nitpick comments (9)</summary><blockquote>

<details>
<summary>packages/core/src/__tests__/EngineFacade.test.ts (2)</summary><blockquote>

`66-68`: **ä¸è¦ãªäºŒé‡ã‚­ãƒ£ã‚¹ãƒˆã®ç°¡ç•¥åŒ–**

`IMiddleware<..., IMockResult>` ã«ã‚ˆã‚Š `res` ã¯æ—¢ã« `IMockResult` å‹ã§ã™ã€‚`Record<string, unknown>` ã¸ã®ã‚­ãƒ£ã‚¹ãƒˆã‚„ `as IMockResult` ã®ã‚­ãƒ£ã‚¹ãƒˆã¯ä¸è¦ã§ã™ã€‚


<details>
<summary>â™»ï¸ ç°¡ç•¥åŒ–ã®ææ¡ˆ</summary>

```diff
-      onResult: async (res) => ({ ...(res as Record<string, unknown>), move: `${(res as IMockResult).move}_modified` } as IMockResult),
+      onResult: async (res) => ({ ...res, move: `${res.move}_modified` }),
```
</details>

---

`160-169`: **ãƒ†ã‚¹ãƒˆåˆ†é›¢ã®æ”¹å–„ææ¡ˆ: ãƒ¢ãƒƒã‚¯çŠ¶æ…‹ã®å…±æœ‰**

åŒä¸€ã® `adapter` ãƒ¢ãƒƒã‚¯ã‚’æ‰€æœ‰/éæ‰€æœ‰ã®ä¸¡ã‚±ãƒ¼ã‚¹ã§ä½¿ã„å›ã—ã¦ãŠã‚Šã€`dispose` ã®å‘¼ã³å‡ºã—å±¥æ­´ãŒå…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¾çŠ¶ã¯å®Ÿè¡Œé †åºã§æ­£ã—ãå‹•ä½œã—ã¾ã™ãŒã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿æ™‚ã«å£Šã‚Œã‚„ã™ã„ã§ã™ã€‚å„ã‚±ãƒ¼ã‚¹ã§ç‹¬ç«‹ã—ãŸã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ä½¿ã†ã‹ã€ä¸­é–“ã§ `mockClear()` ã™ã‚‹ã¨ã‚ˆã‚Šå …ç‰¢ã«ãªã‚Šã¾ã™ã€‚


<details>
<summary>â™»ï¸ æ”¹å–„æ¡ˆ: mockClear() ã®è¿½åŠ </summary>

```diff
     const adapter = createMockAdapter();
     const facade = new EngineFacade(adapter, [], undefined, false);
     await facade.dispose();
     expect(adapter.dispose).not.toHaveBeenCalled();
     
+    vi.mocked(adapter.dispose).mockClear();
     const owningFacade = new EngineFacade(adapter, [], undefined, true);
     await owningFacade.dispose();
     expect(adapter.dispose).toHaveBeenCalled();
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/USIParser.ts (1)</summary><blockquote>

`88-92`: **`bestMove` ãŒç©ºæ–‡å­—åˆ—ã«ãªã‚Šå¾—ã‚‹ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚**

`parts[1]` ãŒ `undefined` ã®å ´åˆã€`"" as Move` ãŒè¿”ã•ã‚Œã¾ã™ã€‚`bestmove ` ã®å¾Œã«æ‰‹ãŒç„¡ã„å ´åˆï¼ˆä¸æ­£ãªå…¥åŠ›ï¼‰ã€ç©ºã®ãƒ–ãƒ©ãƒ³ãƒ‡ãƒƒãƒ‰å‹ãŒãã®ã¾ã¾ä¸‹æµã«æ¸¡ã‚Šã¾ã™ã€‚æ—©æœŸã« `null` ã‚’è¿”ã™ã‹ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
     const parts = line.split(" ");
+    if (!parts[1]) return null;
     const result: ISHOGISearchResult = {
-      bestMove: (parts[1] || "") as Move,
+      bestMove: parts[1] as Move,
       raw: line,
     };
```
</details>

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineLoader.ts (1)</summary><blockquote>

`31-32`: **ã‚¤ãƒ³ãƒ•ãƒ©ã‚¤ãƒˆãƒ­ãƒƒã‚¯ã®ã‚­ãƒ¼ãŒ `engineId` ã®ã¿ã®ãŸã‚ã€ç•°ãªã‚‹ãƒªã‚½ãƒ¼ã‚¹æ§‹æˆã®å‘¼ã³å‡ºã—ãŒèª¤ã£ãŸçµæœã‚’è¿”ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**

`loadResources` ãŒåŒä¸€ `engineId` ã§ç•°ãªã‚‹ `configs` ã§å‘¼ã°ã‚ŒãŸå ´åˆã€2 å›ç›®ã®å‘¼ã³å‡ºã—ã¯ 1 å›ç›®ã® Promise ã‚’è¿”ã—ã¾ã™ã€‚é€šå¸¸ã®ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ç™ºç”Ÿã—ã«ãã„ã§ã™ãŒã€ãƒªã‚½ãƒ¼ã‚¹æ§‹æˆãŒå‹•çš„ã«å¤‰ã‚ã‚‹ã‚±ãƒ¼ã‚¹ã§ã¯ä¸æ•´åˆãŒç”Ÿã˜ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>

`86-141`: **`StockfishAdapter` ã¨ã® `searchRaw` / `cleanupPendingTask` / `stop` / `dispose` ã®å®Ÿè£…ãŒã»ã¼åŒä¸€ã§ã™ã€‚**

ä¸¡ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼é–“ã§ `searchRaw`ã€`cleanupPendingTask`ã€`stop`ã€`dispose`ã€`sendOptionToWorker` ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒé‡è¤‡ã—ã¦ã„ã¾ã™ã€‚å°†æ¥çš„ã« `BaseAdapter` ã¾ãŸã¯å…±é€šã® mixin ã«æŠ½å‡ºã™ã‚‹ã“ã¨ã§ã€ä¿å®ˆæ€§ã‚’å‘ä¸Šã§ãã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/__tests__/katago.test.ts (1)</summary><blockquote>

`59-76`: **å†…éƒ¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯ãƒ†ã‚¹ãƒˆã®è„†å¼±æ€§ã‚’æ‹›ãã¾ã™ã€‚**

`as unknown as { communicator: ...; _status: string }` ã«ã‚ˆã‚‹ã‚­ãƒ£ã‚¹ãƒˆã¯ã€ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®å†…éƒ¨å®Ÿè£…ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã«ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§é»™ã£ã¦å£Šã‚Œã¾ã™ã€‚å¯èƒ½ã§ã‚ã‚Œã°ã€`load()` ã‚’é€šã˜ãŸæ­£è¦ã®ãƒ•ãƒ­ãƒ¼ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ `BaseAdapter` ã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/mortal.ts (1)</summary><blockquote>

`110-114`: **æˆåŠŸæ™‚ã® `cleanupPendingTask()` å‘¼ã³å‡ºã—ã§ä¸è¦ãª `Error` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹**

Line 112 ã§ `pendingResolve` ãŒå‘¼ã°ã‚ŒãŸå¾Œã€Line 113 ã§ `cleanupPendingTask()` ãŒ reason ãªã—ã§å‘¼ã°ã‚Œã¾ã™ã€‚`cleanupPendingTask` (Line 160-162) ã¯ `reason ?? "Task cleaned up"` ã§å¸¸ã« `pendingReject` ã‚’å‘¼ã¶ãŸã‚ã€æ—¢ã« resolve æ¸ˆã¿ã® Promise ã«å¯¾ã—ã¦ä¸è¦ãª `Error` ãŒæ¯å›ç”Ÿæˆã•ã‚Œã¾ã™ã€‚KataGo (katago.ts Line 132) ã«ã‚‚åŒã˜å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

`pendingResolve` ã‚’å‘¼ã‚“ã å¾Œã« `pendingReject` ã‚’ null åŒ–ã™ã‚‹ã‹ã€resolve æˆåŠŸæ™‚å°‚ç”¨ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ‘ã‚¹ã‚’è¨­ã‘ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
      const result = this.parser.parseResult(data as Record<string, unknown>);
      if (result) {
+       this.pendingReject = null; // resolve æ¸ˆã¿ãªã®ã§ reject ã¯ä¸è¦
        this.pendingResolve?.(result);
        this.cleanupPendingTask();
      }
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/katago.ts (1)</summary><blockquote>

`17-200`: **3ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼é–“ã§å¤§é‡ã®ã‚³ãƒ¼ãƒ‰é‡è¤‡**

`MortalAdapter`ã€`KataGoAdapter`ã€`EdaxAdapter` ã¯ `searchRaw`ã€`stop`ã€`dispose`ã€`cleanupPendingTask` ã®å®Ÿè£…ãŒã»ã¼åŒä¸€ã§ã™ã€‚å·®ç•°ã¯ãƒ‘ãƒ¼ã‚µãƒ¼ã®å‹ã¨ `load()` ã®åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ã§ã™ã€‚

`BaseAdapter` ã«ã“ã‚Œã‚‰ã®å…±é€šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆpending task ç®¡ç†ã€info streamã€message subscriptionã€dispose ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’å¼•ãä¸Šã’ã‚‹ã‹ã€å…±é€šã® mixin/ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’å°å…¥ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»Šå¾Œã®ãƒã‚°ä¿®æ­£ãŒä¸€ç®‡æ‰€ã§æ¸ˆã¿ã€ä¸€è²«æ€§ã‚‚ä¿ãŸã‚Œã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineBridge.ts (1)</summary><blockquote>

`32-33`: **`any` ã®ä½¿ç”¨ã¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«é•å**

`eslint-disable` ã‚³ãƒ¡ãƒ³ãƒˆã§æŠ‘åˆ¶ã•ã‚Œã¦ã„ã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯ `any` ã®ä½¿ç”¨ã‚’ç¦æ­¢ã—ã¦ã„ã¾ã™ã€‚ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å‹ã« `unknown` ã‚’ä½¿ç”¨ã—ã€åˆ©ç”¨æ™‚ã«ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹æ–¹æ³•ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

ãŸã ã—ã€ãƒ˜ãƒ†ãƒ­ã‚¸ãƒ‹ã‚¢ã‚¹ãªãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®æ ¼ç´ã¯æœ¬è³ªçš„ã«å‹å®‰å…¨ã«ã™ã‚‹ã®ãŒé›£ã—ã„ãŸã‚ã€ç¾çŠ¶ã® `eslint-disable` ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚å®Ÿç”¨çš„ãªå¦¥å”æ¡ˆã¨ã—ã¦ç†è§£ã§ãã¾ã™ã€‚

As per coding guidelines: `ç¦æ­¢: any ã®ä½¿ç”¨ã€‚ä»£ã‚ã‚Šã« unknown ã¨å‹ã‚¬ãƒ¼ãƒ‰ã€ã¾ãŸã¯å¢ƒç•Œä»˜ãã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨`

</blockquote></details>

</blockquote></details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->
--
author:	coderabbitai
association:	none
edited:	false
status:	commented
--
**Actionable comments posted: 5**

> [!CAUTION]
> Some comments are outside the diff and canâ€™t be posted inline due to platform limitations.
> 
> 
> 
> <details>
> <summary>âš ï¸ Outside diff range comments (1)</summary><blockquote>
> 
> <details>
> <summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>
> 
> `113-135`: _âš ï¸ Potential issue_ | _ğŸŸ  Major_
> 
> **`communicator` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ãƒ¼ãƒ³ã«ã‚ˆã‚Šã€æ¢ç´¢ã‚¿ã‚¹ã‚¯ãŒæ°¸ä¹…ã«ãƒãƒ³ã‚°ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**
> 
> Line 88 ã§ `_status !== "ready"` ã®ã‚¬ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ãŒã€`communicator` ã«å¯¾ã—ã¦ `?.` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ (Lines 114, 131, 134)ã€ä¸‡ãŒä¸€ `communicator` ãŒ `null` ã ã£ãŸå ´åˆã€ãƒªã‚¹ãƒŠãƒ¼ã¯ç™»éŒ²ã•ã‚Œãšã‚³ãƒãƒ³ãƒ‰ã‚‚é€ä¿¡ã•ã‚Œãªã„ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€`resultPromise` ã¯æ°¸é ã« resolve/reject ã•ã‚Œã¾ã›ã‚“ã€‚`sendOptionToWorker` (Line 154-156) ã‚„ `searchRaw` å†’é ­ (Line 88-89) ã¨åŒæ§˜ã«ã€æ˜ç¤ºçš„ãªã‚¬ãƒ¼ãƒ‰ã‚’å…¥ã‚Œã‚‹ã¹ãã§ã™ã€‚
> 
> 
> 
> <details>
> <summary>ğŸ›¡ï¸ ä¿®æ­£æ¡ˆ: ã‚³ãƒãƒ³ãƒ‰é€ä¿¡å‰ã« communicator ã®å­˜åœ¨ã‚’ä¿è¨¼</summary>
> 
> ```diff
>     // æ—¢å­˜ã®ãƒªã‚¹ãƒŠãƒ¼ã‚’è§£é™¤
>     this.messageUnsubscriber?.();
> 
> +   if (!this.communicator) {
> +     throw new EngineError(EngineErrorCode.NOT_READY, "Engine is not loaded", this.id);
> +   }
> +
>     // 2026 Best Practice: å¿œç­”ã®å–ã‚Šã“ã¼ã—ã‚’é˜²ããŸã‚ã€é€ä¿¡å‰ã«ãƒªã‚¹ãƒŠãƒ¼ã‚’ç™»éŒ²
> -   this.messageUnsubscriber = this.communicator?.onMessage((data) => {
> +   this.messageUnsubscriber = this.communicator.onMessage((data) => {
>       if (typeof data !== "string") return;
> 
>       const info = this.parser.parseInfo(data);
>       if (info) {
>         this.infoController?.enqueue(info);
>       }
> 
>       const result = this.parser.parseResult(data);
>       if (result) {
>         this.pendingResolve?.(result);
>         this.cleanupPendingTask();
>       }
> -   }) || null;
> +   });
> 
> -   if (Array.isArray(command)) {
> -     for (const cmd of command) {
> -       this.communicator?.postMessage(cmd);
> -     }
> -   } else {
> -     this.communicator?.postMessage(command);
> -   }
> +   if (Array.isArray(command)) {
> +     for (const cmd of command) {
> +       this.communicator.postMessage(cmd);
> +     }
> +   } else {
> +     this.communicator.postMessage(command);
> +   }
> ```
> 
> </details>
> 
> </blockquote></details>
> 
> </blockquote></details>

<details>
<summary>ğŸ¤– Fix all issues with AI agents</summary>

```
In `@packages/adapter-katago/src/katago.ts`:
- Around line 131-135: å½“è©²ç®‡æ‰€ã§ã¯ this.parser.parseResult ã®æˆåŠŸæ™‚ã«
this.pendingResolve?.(result) ã‚’å‘¼ã‚“ã ç›´å¾Œã« cleanupPendingTask() ã‚’å‘¼ã‚“ã§ã„ã‚‹ãŸã‚ã€ã¾ã æ®‹ã£ã¦ã„ã‚‹
this.pendingReject ãŒ cleanup å†…ã§ new Error("Task cleaned up") ã‚’ä½œã£ã¦ reject
ã‚’è©¦ã¿ã¾ã™ã€‚å¯¾å‡¦ã¯ã€æˆåŠŸã§ resolve ã—ãŸç›´å¾Œã«ä¸è¦ãª reject å‚ç…§ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã‹ã‚‰ cleanupPendingTask() ã‚’å‘¼ã¶ã“ã¨ï¼ˆã¾ãŸã¯
cleanupPendingTask ã‚’ä¿®æ­£ã—ã¦æ—¢ã«è§£æ±ºæ¸ˆã¿ãªã‚‰ reject ã‚’ä½œã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ï¼‰ã€‚è©²å½“ã‚·ãƒ³ãƒœãƒ«: pendingResolve,
pendingReject, cleanupPendingTask, parseResult ã‚’ä½¿ã£ã¦å®Ÿè£…ç®‡æ‰€ã‚’è¦‹ã¤ã‘ã€resolve â†’
pendingReject = null â†’ cleanup ã®é †ã«ç›´ã—ã¦ãã ã•ã„ã€‚

In `@packages/adapter-mortal/src/mortal.ts`:
- Around line 87-94: The code creates a ReadableStream (infoStream) and assigns
this.infoController but TypeScript may not recognize ReadableStream as an
AsyncIterable for ISearchTask.info due to missing DOM lib; update the project
type defs so ReadableStream is known: either add "lib": ["ES2022","DOM"] to
tsconfig.json or add an explicit type import/ambient definition that declares
ReadableStream implements AsyncIterable<T_INFO>, then ensure the produced
infoStream is typed/returned as AsyncIterable<T_INFO> (or cast appropriately) so
ISearchTask.info, infoStream, and this.infoController usages (and the stop()
cancellation path) are type-safe.

In `@packages/adapter-stockfish/src/stockfish.ts`:
- Around line 129-135: The current send-path blindly posts the else branch value
to this.communicator?.postMessage(command) without guarding for Uint8Array vs
string; update the logic in the method that handles sending commands (the code
using the command variable and this.communicator?.postMessage) to perform
explicit type guards: treat Array.isArray(command) as before, otherwise narrow
command with typeof command === "string" to post the string, else if command
instanceof Uint8Array post the binary payload, and for any other unknown type
reject/throw or log an error (use unknown instead of any and a proper type
guard), ensuring postMessage gets only string or Uint8Array.
- Around line 85-91: searchRaw calls cleanupPendingTask("Replaced by new
search") which rejects the previous task's resultPromise and can cause unhandled
promise rejections; update cleanupPendingTask (or the code that creates the
previous task's resultPromise) to reject with a specific cancellation error
(e.g., an AbortError/TaskCancelledError) so callers can detect cancellation,
and/or attach a no-op .catch to the previous resultPromise before rejecting to
avoid unhandled rejections; ensure references to cleanupPendingTask,
resultPromise and searchRaw are updated so the previous task is rejected with a
typed cancellation error (or is safely .catch()-handled) rather than an untyped
rejection.

In `@packages/adapter-yaneuraou/src/yaneuraou.ts`:
- Around line 49-50: sri ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ€ãƒŸãƒ¼å€¤ãŒæ®‹ã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³å‰ã«å®Ÿéš›ã® SRI ãƒãƒƒã‚·ãƒ¥ã«ç½®ãæ›ãˆã¦ãã ã•ã„:
æ›´æ–°å¯¾è±¡ã¯ packages/adapter-yaneuraou/src/yaneuraou.ts ã® sri ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆç¾åœ¨
"sha384-DummyHash..."ï¼‰ã§ã€EngineLoader ã® SRI æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‚ˆã†ã«ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆï¼è¨ˆç®—ã—ãŸæ­£ã—ã„
sha384 ãƒãƒƒã‚·ãƒ¥ã«å·®ã—æ›¿ãˆã¦ãã ã•ã„ã€‚ãƒªãƒªãƒ¼ã‚¹å‰ãƒã‚§ãƒƒã‚¯ã« katagoï¼mortalï¼edax å„ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã® sri å€¤ã‚‚å«ã‚ã€ã™ã¹ã¦ã® sri
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒãƒ€ãƒŸãƒ¼ã§ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
```

</details>

<details>
<summary>ğŸ§¹ Nitpick comments (6)</summary><blockquote>

<details>
<summary>packages/adapter-katago/src/katago.ts (2)</summary><blockquote>

`67-96`: **`load()` ã®å®Ÿè£…ã¯æ¦‚ã­è‰¯å¥½ã§ã™ãŒã€ãƒªã‚½ãƒ¼ã‚¹å€¤ã®å‹ã«æ³¨æ„ã€‚**

Line 80 ã§ `Object.values(resources)` ã‚’ `blobUrls: string[]` ã«ä»£å…¥ã—ã¦ã„ã¾ã™ãŒã€`loadResources` ã®æˆ»ã‚Šå€¤ã®å‹ãŒ `Record<string, string>` ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã—å°†æ¥çš„ã«æˆ»ã‚Šå€¤ã®å‹ãŒå¤‰ã‚ã£ãŸå ´åˆã€`dispose()` å†…ã® `revoke()` å‘¼ã³å‡ºã—ãŒä¸æ­£ãªå€¤ã‚’å—ã‘å–ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€Line 87 ã® `as Record<string, unknown>` ã¯ `typeof data === "object" && data !== null` ã®å¾Œãªã®ã§å®‰å…¨ã§ã™ãŒã€ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚„å‹ã‚¬ãƒ¼ãƒ‰ã«æŠ½å‡ºã™ã‚‹ã¨ã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

---

`166-181`: **`dispose()` å¾Œã« `activeLoader` ã®å‚ç…§ãŒæ®‹ã‚‹ã€‚**

`blobUrls` ã¯ã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã™ãŒã€`activeLoader` ã¸ã®å‚ç…§ãŒ `null` ã«æˆ»ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚terminated çŠ¶æ…‹ã§ã¯æ©Ÿèƒ½ä¸Šå•é¡Œã«ã¯ãªã‚Šã«ãã„ã§ã™ãŒã€GC ã‚’åŠ©ã‘ã‚‹ãŸã‚ã« `null` ã«ã—ã¦ãŠãã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚



<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
     this.blobUrls = [];
+    this.activeLoader = null;
     this.emitStatusChange("terminated");
     this.clearListeners();
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-stockfish/src/stockfish.ts (1)</summary><blockquote>

`46-47`: **SRI ãƒãƒƒã‚·ãƒ¥ã®å†æ¤œè¨¼ TODO ãŒæ®‹ã£ã¦ã„ã¾ã™ã€‚**

ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒªãƒ¼ã‚¹å‰ã«ã“ã® TODO ã‚’è§£æ±ºã—ã¦ãã ã•ã„ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã„ã€SRI ãƒãƒƒã‚·ãƒ¥ã®æ­£å½“æ€§ã‚’æ¤œè¨¼æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


ã“ã® TODO ã®å¯¾å¿œã‚’è¿½è·¡ã™ã‚‹ãŸã‚ã« Issue ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ

As per coding guidelines: `ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ (SRI): å‹•çš„ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†éš›ã¯ã€å¿…ãš SRI ãƒãƒƒã‚·ãƒ¥ã®æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨`

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>

`175-178`: **`pendingReject` ã« `Error` ã§ã¯ãªã `EngineError` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ä¸€è²«æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚**

`resultPromise` ã®åˆ©ç”¨è€…ã¯ `error instanceof EngineError` ã§ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ã‚’åˆ¤å®šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã§ç´ ã® `Error` ã‚’ä½¿ã†ã¨ã€ä»–ã®ç®‡æ‰€ (Line 89, Line 155) ã§ `EngineError` ã‚’æŠ•ã’ã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨çŸ›ç›¾ã—ã¾ã™ã€‚



<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
   if (this.pendingReject) {
-    this.pendingReject(new Error(reason ?? "Task cleaned up"));
+    this.pendingReject(new EngineError(EngineErrorCode.INTERNAL_ERROR, reason ?? "Task cleaned up", this.id));
   }
```

</details>

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/mortal.ts (1)</summary><blockquote>

`104-116`: **`data as Record<string, unknown>` ã®å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯å‹å®‰å…¨æ€§ã‚’æãªã†**

Lines 106, 111 ã§ `data` ã‚’ `as Record<string, unknown>` ã§ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã„ã¾ã™ãŒã€`onMessage` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã® `data` ãŒå®Ÿéš›ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ä¿è¨¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚å‹ã‚¬ãƒ¼ãƒ‰ã§å®‰å…¨ã«çµã‚Šè¾¼ã‚€ã¹ãã§ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
     this.messageUnsubscriber = this.communicator?.onMessage((data) => {
-      // 2026 Best Practice: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥å‡¦ç†ã—ã€ä¸è¦ãªæ–‡å­—åˆ—åŒ–ã‚’é¿ã‘ã‚‹ã€‚
-      const info = this.parser.parseInfo(data as Record<string, unknown>);
+      // 2026 Best Practice: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥å‡¦ç†ã—ã€ä¸è¦ãªæ–‡å­—åˆ—åŒ–ã‚’é¿ã‘ã‚‹ã€‚
+      if (typeof data !== "object" || data === null) return;
+      const record = data as Record<string, unknown>;
+      const info = this.parser.parseInfo(record);
       if (info) {
         this.infoController?.enqueue(info);
       }
 
-      const result = this.parser.parseResult(data as Record<string, unknown>);
+      const result = this.parser.parseResult(record);
       if (result) {
         this.pendingResolve?.(result);
         this.cleanupPendingTask();
       }
     }) || null;
```
</details>

Based on learnings: `ç¦æ­¢: any ã®ä½¿ç”¨ã€‚ä»£ã‚ã‚Šã« unknown ã¨å‹ã‚¬ãƒ¼ãƒ‰ã€ã¾ãŸã¯å¢ƒç•Œä»˜ãã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨` â€” `as` ã«ã‚ˆã‚‹å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯å‹ã‚¬ãƒ¼ãƒ‰ã®ä»£æ›¿ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/edax.ts (1)</summary><blockquote>

`16-184`: **`EdaxAdapter` ã¨ `MortalAdapter` ã‚’å«ã‚€5ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã«å¤§ããªã‚³ãƒ¼ãƒ‰é‡è¤‡ãŒã‚ã‚‹ â€” å…±é€šãƒ­ã‚¸ãƒƒã‚¯æŠ½å‡ºã‚’æ¤œè¨**

`cleanupPendingTask` ãƒ¡ã‚½ãƒƒãƒ‰ã¯5ã¤ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼ˆedax, mortal, stockfish, yaneuraou, katagoï¼‰ã§å®Œå…¨ã«åŒä¸€ã§ã™ã€‚`searchRaw`ã€`load`ã€`dispose` ã‚‚åŒã˜æ§‹é€ ã‚’ã—ã¦ãŠã‚Šã€å·®ç•°ã¯ä¸»ã«ãƒ‘ãƒ¼ã‚µãƒ¼å‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã®æœŸå¾…å€¤ï¼ˆæ–‡å­—åˆ— vs ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã®ã¿ã§ã™ã€‚

`BaseAdapter` ã«å…±é€šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†ã€Promise ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ã§ã€ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚

</blockquote></details>

</blockquote></details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->
--
author:	coderabbitai
association:	none
edited:	false
status:	commented
--
**Actionable comments posted: 19**

> [!CAUTION]
> Some comments are outside the diff and canâ€™t be posted inline due to platform limitations.
> 
> 
> 
> <details>
> <summary>âš ï¸ Outside diff range comments (2)</summary><blockquote>
> 
> <details>
> <summary>packages/core/package.json (1)</summary><blockquote>
> 
> `4-14`: _âš ï¸ Potential issue_ | _ğŸ”´ Critical_
> 
> **`"type": "module"` è¿½åŠ æ™‚ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆè¨­å®šã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚**
> 
> `tsup --format cjs,esm` ã¯ `"type": "module"` ã®å ´åˆã€`dist/index.cjs`ï¼ˆCJSï¼‰ã¨ `dist/index.js`ï¼ˆESMï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ç¾åœ¨ã®ãƒ‘ã‚¹ãŒä¸æ•´åˆã®ãŸã‚ã€CJS ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã« ESM ã‚³ãƒ¼ãƒ‰ãŒä¾›çµ¦ã•ã‚Œã€ESM ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¾ã™ï¼š
> 
> - `"main"` ã¯ `./dist/index.js` ã§ã¯ãªã `./dist/index.cjs` ã‚’æŒ‡ã™ã¹ã
> - `"module"` ã¯ `./dist/index.mjs` ã§ã¯ãªã `./dist/index.js` ã‚’æŒ‡ã™ã¹ã  
> - `exports.import` ã¯ `./dist/index.mjs` ã§ã¯ãªã `./dist/index.js` ã‚’æŒ‡ã™ã¹ã
> - `exports.require` ã¯ `./dist/index.js` ã§ã¯ãªã `./dist/index.cjs` ã‚’æŒ‡ã™ã¹ã
> 
> <details>
> <summary>ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
>    "type": "module",
>    "description": "Core interfaces and bridge for multi-game-engines",
> -  "main": "./dist/index.js",
> -  "module": "./dist/index.mjs",
> +  "main": "./dist/index.cjs",
> +  "module": "./dist/index.js",
>    "types": "./dist/index.d.ts",
>    "exports": {
>      ".": {
>        "types": "./dist/index.d.ts",
> -      "import": "./dist/index.mjs",
> -      "require": "./dist/index.js"
> +      "import": "./dist/index.js",
> +      "require": "./dist/index.cjs"
>      }
>    }
> ```
> </details>
> 
> </blockquote></details>
> <details>
> <summary>packages/core/src/bridge/EngineFacade.ts (1)</summary><blockquote>
> 
> `279-296`: _âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_
> 
> **`dispose()` ã§ `telemetryListeners` ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**
> 
> Line 288 ã§ `infoListeners.clear()` ã¯å‘¼ã°ã‚Œã¦ã„ã¾ã™ãŒã€`telemetryListeners` ã¯ã‚¯ãƒªã‚¢ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚dispose å¾Œã‚‚ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‚ç…§ãŒä¿æŒã•ã‚Œã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚
> 
> <details>
> <summary>ğŸ› ä¿®æ­£æ¡ˆ</summary>
> 
> ```diff
>      this.adapterUnsubscribers.clear();
>      this.infoListeners.clear();
> +    this.telemetryListeners.clear();
>  
>      await this.stop();
> ```
> </details>
> 
> </blockquote></details>
> 
> </blockquote></details>

<details>
<summary>ğŸ¤– Fix all issues with AI agents</summary>

```
In `@packages/adapter-edax/src/edax.ts`:
- Around line 16-39: The load method currently leaves the adapter in "loading"
if loader.loadResource or new WorkerCommunicator throws; wrap the body of async
load(loader?: IEngineLoader) in a try/catch, perform the existing logic (resolve
scriptUrl, instantiate WorkerCommunicator, set this.messageUnsubscriber via
this.communicator.onMessage, and finally emitStatusChange("ready")) inside try,
and in catch call this.emitStatusChange("error"), perform any needed cleanup
(unsubscribe messageUnsubscriber if set and terminate/close communicator if
partially created), and rethrow or log the error as appropriate; reference
symbols: load, loader.loadResource, WorkerCommunicator, this.communicator,
this.messageUnsubscriber, and this.emitStatusChange.

In `@packages/adapter-katago/src/__tests__/GTPParser.test.ts`:
- Around line 12-15: The test's assertion is too weak: update the
GTPParser.parseResult test to use a realistic GTP response and assert the parsed
bestMove value explicitly; e.g., call parser.parseResult("= D4") (or adjust the
input handling if you intend to accept "bestmove D4") and add an assertion like
expect(result.bestMove).toBe("D4") (or the canonical trimmed value), verifying
both presence and exact value from the parseResult method on the GTPParser.
- Around line 7-10: The test uses an input that begins with "= " so
GTPParser.parseInfo (which checks line.startsWith("info ")) returns null and the
assertion toBeDefined() is too weak; update the test in GTPParser.test.ts to
pass a valid GTP info line (e.g., "info depth 10" or other form that begins with
"info ") to parser.parseInfo, then assert the returned object is non-null and
that its parsed fields match expectations (e.g., verify the depth property
equals 10) so the parsing behavior of GTPParser.parseInfo is properly validated.

In `@packages/adapter-katago/src/katago.ts`:
- Around line 16-38: Wrap the body of load() in a try/catch so exceptions from
loader.loadResource() or new WorkerCommunicator() don't leave the adapter stuck
in "loading"; on success continue to emitStatusChange("ready"), on failure
emitStatusChange("error") and perform cleanup (call any existing
this.messageUnsubscriber if set and null out
this.communicator/messageUnsubscriber). Specifically, in load() guard the call
to loader.loadResource(this.id, config) and the construction of new
WorkerCommunicator(scriptUrl) inside try, assign this.messageUnsubscriber only
after communicator is constructed, and in catch ensure you
emitStatusChange("error"), unsubscribe if messageUnsubscriber exists, and
optionally rethrow or return to stop further initialization.

In `@packages/adapter-mortal/src/mortal.ts`:
- Around line 16-38: The load() method lacks error handling so exceptions from
loader.loadResource(this.id, config) or new WorkerCommunicator(scriptUrl) leave
the adapter stuck in "loading"; wrap the body of load() in a try/catch, call
emitStatusChange("error") in the catch with the caught error details, ensure any
partially created resources are cleaned up (e.g., if communicator exists, remove
messageUnsubscriber and terminate/cleanup communicator), and rethrow or return
appropriately; apply the same pattern to KatagoAdapter's load() to mirror the
fix.

In `@packages/adapter-stockfish/src/__tests__/UCIParser.test.ts`:
- Around line 7-15: Tests only assert the raw string and miss verifying parsed
fields; update the UCIParser tests to assert parsed properties from
parser.parseInfo (check info.depth, info.score (including cp/mate shape),
info.nps, info.time, info.pv when present) and from parser.parseResult (check
result.bestMove and result.ponder when present), and add additional cases
covering variants (score as cp and mate, missing optional fields, and
presence/absence of pv/ponder) so the parser's actual extraction logic
(parseInfo and parseResult) is validated rather than only raw output.

In `@packages/adapter-stockfish/src/stockfish.ts`:
- Around line 16-38: The load() implementation in StockfishAdapter lacks error
handling and prematurely emits "ready" without confirming Worker initialization;
extract a template into BaseAdapter by adding an abstract getResourceConfig():
{url:string; sri:string; size:number} and moving the shared load logic there:
emitStatusChange("loading"), compute scriptUrl via loader?.loadResource(this.id,
config) or config.url, instantiate WorkerCommunicator(scriptUrl), subscribe with
this.messageUnsubscriber = this.communicator.onMessage(data =>
this.handleIncomingMessage(data)), then emitStatusChange("ready") inside try,
and on catch emitStatusChange("error") and rethrow as EngineError.from(err,
this.id); update StockfishAdapter to only implement getResourceConfig()
(returning its url/sri/size) and remove duplicate load logic.
- Around line 1-4: The core package referenced (symbols: BaseAdapter,
IEngineLoader, WorkerCommunicator) is importing from `@multi-game-engines/core`
but its dist build output is missing; ensure you build the core workspace
package first so ./dist/index.mjs and ./dist/index.d.ts are generated before
building adapters, and then simplify the duplicate imports in
packages/adapter-stockfish/src/stockfish.ts by merging the two import lines into
a single import from "@multi-game-engines/core" that includes BaseAdapter,
IEngineLoader, and WorkerCommunicator to remove redundancy.

In `@packages/adapter-yaneuraou/src/yaneuraou.ts`:
- Around line 17-39: The load() implementation must guard against exceptions
from loader.loadResource and the WorkerCommunicator constructor and must not
emit "ready" until the worker actually signals initialization; update the load()
in this class (and consider adding shared behavior in BaseAdapter) to wrap
resource loading and communicator creation in a try/catch, call
this.emitStatusChange("error") (or revert to a safe state) and clean up any
partially-created communicator/messageUnsubscriber on failure, and replace the
immediate this.emitStatusChange("ready") with logic that waits for a
confirmation/handshake message from the WorkerCommunicator (or an init/ready
promise from WorkerCommunicator) before calling this.emitStatusChange("ready");
ensure handleIncomingMessage and messageUnsubscriber are only registered after
successful communicator initialization.

In `@packages/core/src/__tests__/SecurityAdvisor.test.ts`:
- Around line 5-13: The test uses TextEncoder.encode().buffer which may be a
larger pooled ArrayBuffer in Node.js causing wrong hash; when building the input
for SecurityAdvisor.verifySRI, create an independent ArrayBuffer (e.g., by
copying via slice on the encoded Uint8Array or by constructing a view using the
encoded's byteOffset/byteLength) so the buffer length matches the actual encoded
bytes before passing it to SecurityAdvisor.verifySRI.

In `@packages/core/src/adapters/BaseAdapter.ts`:
- Around line 99-114: handleIncomingMessage may call this.pendingResolve(result)
but only clears this.pendingReject immediately and relies on cleanupPendingTask
to null out pendingResolve later, risking a race that could call resolve twice;
change the flow so you check for and call this.pendingResolve(result) and then
immediately set this.pendingResolve = null (and this.pendingReject = null)
before calling this.cleanupPendingTask(), keeping references to
parser.parseResult, pendingResolve, pendingReject, and cleanupPendingTask to
locate and update the code.
- Around line 66-73: The current code creates a ReadableStream and force-casts
it to AsyncIterable<T_INFO>, which breaks on Safari; instead keep the
ReadableStream (assigning this.infoController from the start and preserving
cancel -> this.stop()), then create an async generator wrapper that calls
readable.getReader() and yields values by awaiting reader.read() until done;
finally set infoStream to the result of invoking that async generator (an
AsyncIterable/AsyncIterator). Update the code around infoStream,
this.infoController and cancel so the controller is still set and stop() is
called on cancel, but expose an actual AsyncIterable<T_INFO> via the async
generator rather than using as unknown as AsyncIterable.

In `@packages/core/src/bridge/EngineBridge.ts`:
- Around line 52-58: getEngine currently constructs a new EngineFacade each call
which wraps shared adapter instances with ownsAdapter=true, causing
double-dispose bugs; change getEngine (where EngineFacade is instantiated) to
set ownsAdapter=false on the created EngineFacade (or alternatively implement a
cache keyed by adapter ID to return the same EngineFacade instance) so adapter
lifecycle is managed only by EngineBridge.dispose and not by multiple facades;
ensure any place referencing the EngineFacade construction (the
EngineFacade(...) call and subsequent facade.loadingStrategy assignment) is
updated to set ownsAdapter=false and add tests calling getEngine("stockfish")
twice then disposing to validate no double-dispose occurs.

In `@packages/core/src/bridge/EngineLoader.ts`:
- Around line 52-60: loadResources currently uses Promise.all which causes Blob
URL leaks when some loadResource calls fail; change loadResources to use
Promise.allSettled to collect per-entry results, populate and return the
successful results only (for non-fulfilled entries omit or set undefined), or
alternatively on any rejection perform a rollback by iterating over
already-resolved results and calling URL.revokeObjectURL on each value before
rethrowing; update logic around loadResource return handling accordingly so
callers can revoke or receive only fulfilled blob URLs.
- Around line 19-49: The inflightLoads race occurs because the async IIFE can
throw synchronously (e.g., when config.sri is missing) so its internal finally
runs before this.inflightLoads.set(cacheKey, promise) and leaves a rejected
promise in the map; fix by creating the promise, immediately setting
this.inflightLoads.set(cacheKey, promise), and move the cleanup to
promise.finally(() => this.inflightLoads.delete(cacheKey)) outside the IIFE
(remove the IIFE's finally block). Ensure you keep all existing awaits
(storage.get/set/delete, SecurityAdvisor.verifySRI, fetch, URL.createObjectURL)
but attach the external finally to the same promise so synchronous throws are
captured as rejected promises stored in inflightLoads.

In `@packages/core/src/capabilities/CapabilityDetector.ts`:
- Around line 9-14: The webNN/webGPU checks in CapabilityDetector currently
access navigator directly and can throw ReferenceError in environments without
navigator; update the checks for the webNN and webGPU properties to guard
navigator the same way opfs does (e.g., use typeof navigator !== "undefined" &&
"ml" in navigator for webNN and typeof navigator !== "undefined" && "gpu" in
navigator for webGPU) so the CapabilityDetector initialization (the keys webNN
and webGPU) safely handles Node/worker contexts.

In `@packages/core/src/capabilities/SecurityAdvisor.ts`:
- Around line 33-40: checkStatus currently never sets
ISecurityStatus.missingHeaders; update SecurityAdvisor.checkStatus to detect
missing COOP/COEP headers by performing a same-origin fetch of the current
document (guarded by typeof window !== "undefined" and availability of fetch)
and inspect response.headers for 'cross-origin-opener-policy' and
'cross-origin-embedder-policy' (add each missing header name into a
missingHeaders:string[]), then include missingHeaders in the returned
ISecurityStatus object (keep existing isCrossOriginIsolated, canUseThreads,
sriSupported logic and only set missingHeaders when fetch succeeds and any
expected header is absent).
- Around line 10-31: The verifySRI implementation in SecurityAdvisor.verifySRI
must enforce W3C SRI's "strongest algorithm only" rule: parse all hash tokens
from sri, determine the strongest algorithm present (prefer sha512 > sha384 >
sha256), then only attempt verification against hashes that use that strongest
algorithm; ignore weaker ones. Update verifySRI to first collect algorithms from
each token, pick the highest-precedence algo (using the existing algoMap keys),
then compute and compare digests only for tokens whose algo equals that chosen
strongest algorithm, returning true if any of those match and false otherwise.

In `@packages/core/src/workers/WorkerCommunicator.ts`:
- Around line 86-115: expectMessage creates an expectation object but never
removes the AbortSignal listener or clears the timeout when the expectation
resolves, causing leaks; modify expectMessage so the expectation stores the
cleanup routine and ensure cleanup is invoked whenever the expectation is
settled (both inside the timeout handler, the abort listener, and when the
expectation's resolve/reject are called from handleMessage), and implement the
cleanup to remove the abort listener from options.signal and clear the timeout
handle (created when options.timeoutMs is set); specifically update the
expectation structure in expectMessage to include the cleanup function,
wrap/replace the resolve/reject passed into the expectation so they call cleanup
before resolving/rejecting, and ensure handleMessage calls the stored
resolve/reject on the expectation (or calls the cleanup) so listeners and timers
are always cleared.
```

</details>

<details>
<summary>ğŸ§¹ Nitpick comments (27)</summary><blockquote>

<details>
<summary>packages/adapter-yaneuraou/src/__tests__/yaneuraou.test.ts (2)</summary><blockquote>

`12-14`: **`vi.stubGlobal` ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒæœªå®Ÿæ–½**

`afterEach` ã§ `vi.unstubAllGlobals()` ã‚’å‘¼ã°ãªã„ã¨ã€åŒä¸€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ä»–ãƒ†ã‚¹ãƒˆã‚„ï¼ˆè¨­å®šæ¬¡ç¬¬ã§ï¼‰ä»–ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ãƒ–ãŒæ¼ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

<details>
<summary>â™»ï¸ ææ¡ˆ</summary>

```diff
   beforeEach(() => {
     vi.stubGlobal("Worker", MockWorker);
   });
+
+  afterEach(() => {
+    vi.unstubAllGlobals();
+  });
```

Line 1 ã® import ã« `afterEach` ã‚’è¿½åŠ ã—ã¦ãã ã•ã„:

```diff
-import { describe, it, expect, vi, beforeEach } from "vitest";
+import { describe, it, expect, vi, beforeEach, afterEach } from "vitest";
```
</details>

---

`21-25`: **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ã®ä¸­é–“çŠ¶æ…‹ï¼ˆ`"loading"`ï¼‰ãŒæœªæ¤œè¨¼**

`load()` ã¯å†…éƒ¨ã§ `"loading"` â†’ `"ready"` ã¨é·ç§»ã™ã‚‹ã¯ãšã§ã™ãŒã€ãƒ†ã‚¹ãƒˆã§ã¯æœ€çµ‚çŠ¶æ…‹ã® `"ready"` ã®ã¿ç¢ºèªã—ã¦ã„ã¾ã™ã€‚`onStatusChange` ãƒªã‚¹ãƒŠãƒ¼ã§é·ç§»é †åºã‚‚æ¤œè¨¼ã™ã‚‹ã¨ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®å›å¸°æ¤œçŸ¥ã«å½¹ç«‹ã¡ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/OPFSStorage.test.ts (1)</summary><blockquote>

`1-9`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒæœ€å°é™ã§ã™ãŒã€ç¾æ™‚ç‚¹ã§ã¯ stub å®Ÿè£…ã«è¦‹åˆã£ã¦ã„ã¾ã™ã€‚**

`OPFSStorage` ãŒæœ¬æ ¼å®Ÿè£…ã•ã‚ŒãŸéš›ã«ã€`get`/`set`/`delete`/`has`/`clear` ã®å„ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/capabilities/CapabilityDetector.ts (1)</summary><blockquote>

`30-33`: **WASM SIMD ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ `true` ã¯åˆç†çš„ã§ã™ãŒã€å°†æ¥ã®ä¿å®ˆæ€§ã®ãŸã‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¼·åŒ–ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚**

2026å¹´æ™‚ç‚¹ã§ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ãŒ SIMD ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã¯æ­£ã—ã„ã§ã™ãŒã€Node.js ã®å¤ã„ãƒ“ãƒ«ãƒ‰ã‚„çµ„ã¿è¾¼ã¿ç’°å¢ƒã§ã¯éå¯¾å¿œã®å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç’°å¢ƒãŒãƒ–ãƒ©ã‚¦ã‚¶é™å®šã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/BaseAdapter.test.ts (1)</summary><blockquote>

`37-63`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã¯åŸºæœ¬çš„ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã«é™å®šã•ã‚Œã¦ã„ã¾ã™ã€‚**

ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆã¯åˆæœŸçŠ¶æ…‹ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´é€šçŸ¥ã€ãƒªã‚¹ãƒŠãƒ¼è§£é™¤ã®3ã‚±ãƒ¼ã‚¹ã®ã¿ã§ã™ã€‚BaseAdapterã®å®Ÿè£…ã«ã¯å¤šæ•°ã®æœªãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã—ã¾ã™ï¼š
- `dispose()`ã€`stop()`ã€`setOption()`ã€`searchRaw()` ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ»æ“ä½œãƒ¡ã‚½ãƒƒãƒ‰
- `onProgress()` ã¨ `onTelemetry()` ã®ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²ãƒ»é€šçŸ¥
- `handleIncomingMessage()`ã€`sendSearchCommand()`ã€`cleanupPendingTask()`ã€`clearListeners()` ãªã©ã®å†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ã‚«ãƒãƒ¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/SecurityAdvisor.test.ts (1)</summary><blockquote>

`4-14`: **SRI æ¤œè¨¼ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä¸ååˆ†ã§ã™ã€‚**

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šé‡è¦ãª `verifySRI` ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã—ã¦ã€æ­£å¸¸ç³» 1 ã‚±ãƒ¼ã‚¹ã®ã¿ã§ã¯ä¸è¶³ã§ã™ã€‚æœ€ä½é™ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ ã™ã¹ãã§ã™:

- **ç•°å¸¸ç³»**: æ”¹ã–ã‚“ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ `false` ã‚’è¿”ã™ã“ã¨
- **ä¸æ­£ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: ç„¡åŠ¹ãª SRI æ–‡å­—åˆ—ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **ãƒãƒ«ãƒãƒãƒƒã‚·ãƒ¥**: PR ã®ç›®çš„ã«å«ã¾ã‚Œã‚‹ multi-hash SRI æ¤œè¨¼

Based on learnings: "Implement SRI (Subresource Integrity) verification and COOP/COEP header diagnostics as core essential elements"

</blockquote></details>
<details>
<summary>packages/core/src/storage/OPFSStorage.ts (1)</summary><blockquote>

`3-12`: **OPFS ã®å®Ÿè£…ãŒãƒ¢ãƒƒã‚¯ã«ç½®ãæ›ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚**

`OPFSStorage` ã¨ `IndexedDBStorage` ãŒå®Œå…¨ã«åŒä¸€ã®ãƒ¢ãƒƒã‚¯å®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚PR ã®ç›®çš„ã«ã€Œæœ€æ–° Web æ¨™æº–ã®æ¡ç”¨å„ªå…ˆã€ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€OPFS ã¯æœ¬æ¥å„ªå…ˆã—ã¦å®Ÿè£…ã™ã¹ãã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã™ã€‚

ãƒ¢ãƒƒã‚¯ã®ã¾ã¾ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹å ´åˆã€å°‘ãªãã¨ã‚‚ä»¥ä¸‹ã‚’æ¤œè¨ã—ã¦ãã ã•ã„:
1. TODO ã‚³ãƒ¡ãƒ³ãƒˆã§å®Ÿè£…äºˆå®šã‚’æ˜ç¤ºã™ã‚‹
2. `StorageFactory` ç­‰ã§ OPFS ãŒé¸æŠã•ã‚ŒãŸå ´åˆã«ã€ãƒ¢ãƒƒã‚¯ã§ã‚ã‚‹æ—¨ã®è­¦å‘Šã‚’ãƒ­ã‚°å‡ºåŠ›ã™ã‚‹

Based on learnings: "æœ€æ–° Web æ¨™æº–ã®æ¡ç”¨å„ªå…ˆ: WASI, WebGPU, WebNN, OPFS, AbortSignal, AsyncIterable ã‚’æœ€å„ªå…ˆã§æ¡ç”¨ã™ã‚‹ã“ã¨"

</blockquote></details>
<details>
<summary>packages/core/src/storage/IndexedDBStorage.ts (1)</summary><blockquote>

`3-12`: **`OPFSStorage` ã¨å®Œå…¨ã«åŒä¸€ã®ãƒ¢ãƒƒã‚¯å®Ÿè£…ã§ã™ã€‚**

`OPFSStorage.ts` ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã¨åŒæ§˜ã®æ‡¸å¿µãŒã‚ã‚Šã¾ã™ã€‚ä¸¡ãƒ•ã‚¡ã‚¤ãƒ«ãŒåŒä¸€ã®ãƒ¢ãƒƒã‚¯ã§ã‚ã‚‹ãŸã‚ã€å…±é€šã® `MockStorage` åŸºåº•ã‚¯ãƒ©ã‚¹ã‚„ `NoopStorage` ã¨ã—ã¦ä¸€ã¤ã«ã¾ã¨ã‚ã€å„ã‚¯ãƒ©ã‚¹ãŒç¶™æ‰¿ã™ã‚‹å½¢ã«ã™ã‚‹ã“ã¨ã§é‡è¤‡ã‚’æ’é™¤ã§ãã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/IndexedDBStorage.test.ts (1)</summary><blockquote>

`4-9`: **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆã®ã¿ã®ãƒ†ã‚¹ãƒˆã§ã¯å®Ÿè³ªçš„ãªã‚«ãƒãƒ¬ãƒƒã‚¸ãŒã‚ã‚Šã¾ã›ã‚“ã€‚**

å®Ÿè£…ãŒãƒ¢ãƒƒã‚¯ã§ã‚ã‚‹ç¾æ™‚ç‚¹ã§ã¯ã“ã®ãƒ†ã‚¹ãƒˆã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€å®Ÿè£…ãŒè¿½åŠ ã•ã‚ŒãŸéš›ã«ãƒ†ã‚¹ãƒˆã®æ‹¡å……ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã€TODO ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã™ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/WorkerCommunicator.test.ts (1)</summary><blockquote>

`45-50`: **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ†ã‚¹ãƒˆãŒå®Ÿæ™‚é–“ã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚**

`timeoutMs: 100` ã§å®Ÿéš›ã« 100ms å¾…æ©Ÿã—ã¦ã„ã¾ã™ã€‚ç¾çŠ¶ã¯è¨±å®¹ç¯„å›²ã§ã™ãŒã€CI ç’°å¢ƒã§ã®å®‰å®šæ€§ã‚’è€ƒæ…®ã™ã‚‹ã¨ `vi.useFakeTimers()` + `vi.advanceTimersByTime()` ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆå…¨ä½“ã®å®Ÿè¡Œé€Ÿåº¦ã«ã‚‚å¯„ä¸ã—ã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/workers/WorkerCommunicator.ts (2)</summary><blockquote>

`32-57`: **`expectMessage` ã§ãƒãƒƒãƒã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ `onMessage` ãƒªã‚¹ãƒŠãƒ¼ã«é€šçŸ¥ã•ã‚Œã¾ã›ã‚“ã€‚**

Line 39 ã® `return` ã«ã‚ˆã‚Šã€expectation ã«ãƒãƒƒãƒã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒªã‚¹ãƒŠãƒ¼ã¸ã®é€šçŸ¥ã¨ãƒãƒƒãƒ•ã‚¡ã¸ã®è¿½åŠ ãŒã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚ã“ã‚ŒãŒæ„å›³çš„ãªè¨­è¨ˆã§ã‚ã‚Œã°ã€JSDoc ã«ãã®æ—¨ã‚’æ˜è¨˜ã—ã¦ãã ã•ã„ã€‚`onMessage` ã‚’ã€Œå…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç›£è¦–ã€ã¨ã—ã¦ä½¿ã†æ¶ˆè²»è€…ã«ã¨ã£ã¦ã¯äºˆæœŸã—ãªã„å‹•ä½œã«ãªã‚Šå¾—ã¾ã™ã€‚

---

`59-68`: **`handleError` ãŒé€šå¸¸ã® `Error` ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€`expectMessage` ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã® `EngineError` ã¨ä¸æ•´åˆã§ã™ã€‚**

Line 63 ã§ `new Error(message)` ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ãŒã€Line 102 ã§ã¯ `new EngineError(EngineErrorCode.SEARCH_TIMEOUT, ...)` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚æ¶ˆè²»è€…ãŒ `instanceof EngineError` ã§åˆ†å²ã™ã‚‹å ´åˆã€Worker ã‚¨ãƒ©ãƒ¼èµ·å› ã® rejection ãŒæ¼ã‚Œã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-    const error = new Error(message);
+    const error = new EngineError(EngineErrorCode.UNKNOWN_ERROR, message);
```
</details>

</blockquote></details>
<details>
<summary>packages/core/src/__tests__/EngineFacade.test.ts (1)</summary><blockquote>

`160-169`: **æ‰€æœ‰æ¨©ãƒ†ã‚¹ãƒˆã§ãƒ¢ãƒƒã‚¯ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ†ã‚¹ãƒˆãŒè„†å¼±ã§ã™ã€‚**

Line 162 ã¨ Line 166 ã§åŒã˜ `adapter` ãƒ¢ãƒƒã‚¯ã‚’å†åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒã€`adapter.dispose` ã®ãƒ¢ãƒƒã‚¯ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ç¾çŠ¶ã¯å‹•ä½œã—ã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆã®ç‹¬ç«‹æ€§ã‚’ä¿ã¤ãŸã‚ã€2ã¤ã®ã‚±ãƒ¼ã‚¹ã‚’åˆ†é›¢ã™ã‚‹ã‹ã€ãƒ¢ãƒƒã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚


<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ: ãƒ¢ãƒƒã‚¯ãƒªã‚»ãƒƒãƒˆã‚’è¿½åŠ </summary>

```diff
   it("should dispose adapter only if it owns it", async () => {
-    const adapter = createMockAdapter();
-    const facade = new EngineFacade(adapter, [], undefined, false);
+    const adapter1 = createMockAdapter();
+    const facade = new EngineFacade(adapter1, [], undefined, false);
     await facade.dispose();
-    expect(adapter.dispose).not.toHaveBeenCalled();
+    expect(adapter1.dispose).not.toHaveBeenCalled();
     
-    const owningFacade = new EngineFacade(adapter, [], undefined, true);
+    const adapter2 = createMockAdapter();
+    const owningFacade = new EngineFacade(adapter2, [], undefined, true);
     await owningFacade.dispose();
-    expect(adapter.dispose).toHaveBeenCalled();
+    expect(adapter2.dispose).toHaveBeenCalled();
   });
```
</details>

</blockquote></details>
<details>
<summary>packages/core/src/types.ts (2)</summary><blockquote>

`147-163`: **ç¹°ã‚Šè¿”ã—å‡ºç¾ã™ã‚‹ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®å°å…¥ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚**

`string | string[] | Uint8Array | Record<string, unknown>` ãŒ `searchRaw`ã€`createSearchCommand`ã€`createStopCommand`ã€`createOptionCommand`ã€`IMiddleware.onCommand` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»æˆ»ã‚Šå€¤ã«åˆè¨ˆ 7 å›ä»¥ä¸Šç¹°ã‚Šè¿”ã•ã‚Œã¦ã„ã¾ã™ã€‚å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’å®šç¾©ã™ã‚‹ã¨ã€å¤‰æ›´æ™‚ã®ä¸€è²«æ€§ãŒä¿ã¦ã¾ã™ã€‚


<details>
<summary>â™»ï¸ å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹å°å…¥æ¡ˆ</summary>

```diff
+/** ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿å‹ */
+export type ProtocolData = string | string[] | Uint8Array | Record<string, unknown>;
+
 export interface IProtocolParser<T_OPTIONS, T_INFO, T_RESULT> {
-  parseInfo(data: string | Uint8Array | Record<string, unknown>): T_INFO | null;
-  parseResult(data: string | Uint8Array | Record<string, unknown>): T_RESULT | null;
-  createSearchCommand(options: T_OPTIONS): string | string[] | Uint8Array | Record<string, unknown>;
-  createStopCommand(): string | Uint8Array | Record<string, unknown>;
-  createOptionCommand(name: string, value: string | number | boolean): string | Uint8Array | Record<string, unknown>;
+  parseInfo(data: ProtocolData): T_INFO | null;
+  parseResult(data: ProtocolData): T_RESULT | null;
+  createSearchCommand(options: T_OPTIONS): ProtocolData;
+  createStopCommand(): ProtocolData;
+  createOptionCommand(name: string, value: string | number | boolean): ProtocolData;
 }
```

`IMiddleware.onCommand` ã‚„ `IEngineAdapter.searchRaw` ã§ã‚‚åŒæ§˜ã« `ProtocolData` ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
</details>

---

`115-132`: **`IEngineBridge` ã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹å‘½åãŒä»–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ä¸ä¸€è‡´ã€‚**

`registerAdapter`ã€`getEngine`ã€`use` ã§ `O`, `I`, `R` ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ç´„ã§ã¯ `T_OPTIONS`, `T_INFO`, `T_RESULT` ã§ã™ã€‚å‹å®‰å…¨æ€§ã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ãŒã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å…¨ä½“ã®ä¸€è²«æ€§ã®ãŸã‚ã«çµ±ä¸€ã‚’æ¨å¥¨ã—ã¾ã™ã€‚


<details>
<summary>â™»ï¸ å‘½åçµ±ä¸€æ¡ˆ</summary>

```diff
-  registerAdapter<O extends IBaseSearchOptions, I extends IBaseSearchInfo, R extends IBaseSearchResult>(adapter: IEngineAdapter<O, I, R>): void;
+  registerAdapter<T_OPTIONS extends IBaseSearchOptions, T_INFO extends IBaseSearchInfo, T_RESULT extends IBaseSearchResult>(adapter: IEngineAdapter<T_OPTIONS, T_INFO, T_RESULT>): void;
```

`getEngine` ã¨ `use` ã‚‚åŒæ§˜ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
</details>

As per coding guidelines: `Ensure consistent ordering of generics (T_OPTIONS, T_INFO, T_RESULT) across the entire project for type safety`

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/__tests__/mortal.test.ts (2)</summary><blockquote>

`4-9`: **`MockWorker` ãŒã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆé–“ã§é‡è¤‡ã—ã¦ã„ã¾ã™ã€‚**

`edax.test.ts`ã€`katago.test.ts`ã€`mortal.test.ts` ã§åŒä¸€ã® `MockWorker` ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚å…±æœ‰ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¸ã®æŠ½å‡ºã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

---

`11-14`: **`afterEach` ã§ã® `vi.unstubAllGlobals()` ãŒæ¬ è½ã—ã¦ã„ã¾ã™ã€‚**

`vi.stubGlobal("Worker", ...)` ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚’å·®ã—æ›¿ãˆã¦ã„ã¾ã™ãŒã€ãƒ†ã‚¹ãƒˆé–“ã®åˆ†é›¢ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã« `afterEach` ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã¹ãã§ã™ã€‚


<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
+import { describe, it, expect, vi, beforeEach, afterEach } from "vitest";
 ...
 describe("MortalAdapter", () => {
   beforeEach(() => {
     vi.stubGlobal("Worker", MockWorker);
   });
+
+  afterEach(() => {
+    vi.unstubAllGlobals();
+  });
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/edax.ts (1)</summary><blockquote>

`1-2`: **åŒä¸€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’çµ±åˆã—ã¦ãã ã•ã„ã€‚**


<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-import { BaseAdapter } from "@multi-game-engines/core";
-import { IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
+import { BaseAdapter, IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-edax/src/__tests__/edax.test.ts (1)</summary><blockquote>

`11-14`: **`afterEach` ã§ã® `vi.unstubAllGlobals()` ãŒæ¬ è½ã—ã¦ã„ã¾ã™ã€‚**

`mortal.test.ts` ã¨åŒæ§˜ã«ã€ãƒ†ã‚¹ãƒˆé–“ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹æ±šæŸ“ã‚’é˜²ããŸã‚ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚


<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
+import { describe, it, expect, vi, beforeEach, afterEach } from "vitest";
 ...
 describe("EdaxAdapter", () => {
   beforeEach(() => {
     vi.stubGlobal("Worker", MockWorker);
   });
+
+  afterEach(() => {
+    vi.unstubAllGlobals();
+  });
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-mortal/src/mortal.ts (1)</summary><blockquote>

`1-2`: **ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®çµ±åˆã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚**

`@multi-game-engines/core` ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒ2è¡Œã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-import { BaseAdapter } from "@multi-game-engines/core";
-import { IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
+import { BaseAdapter, IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-stockfish/src/__tests__/stockfish.test.ts (1)</summary><blockquote>

`11-25`: **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒå¤§å¹…ã«å‰Šæ¸›ã•ã‚Œã¦ã„ã‚‹ç‚¹ã«æ³¨æ„ã€‚**

ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ãƒ­ãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã¿ã®ãƒ†ã‚¹ãƒˆã«ç°¡ç´ åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ï¼ˆãƒ­ãƒ¼ãƒ‰å¤±æ•—ã€Worker ã‚¨ãƒ©ãƒ¼ï¼‰ã‚„ `search`/`stop` ã®ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆãŒã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æœ€ä½é™ã€ãƒ­ãƒ¼ãƒ‰å¤±æ•—æ™‚ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

ã¾ãŸã€`vi.stubGlobal` ã®å¾©å…ƒå‡¦ç†ï¼ˆ`afterEach` ã§ã® `vi.unstubAllGlobals()`ï¼‰ãŒãªã„ãŸã‚ã€ä»–ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒ¼ã‚¯ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

<details>
<summary>â™»ï¸ afterEach ã®è¿½åŠ </summary>

```diff
  beforeEach(() => {
    vi.stubGlobal("Worker", MockWorker);
  });
+
+  afterEach(() => {
+    vi.unstubAllGlobals();
+  });
```
</details>

</blockquote></details>
<details>
<summary>packages/adapter-katago/src/katago.ts (2)</summary><blockquote>

`1-2`: **ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®çµ±åˆã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚**

`MortalAdapter` ã¨åŒæ§˜ã€`@multi-game-engines/core` ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’1è¡Œã«ã¾ã¨ã‚ã‚‰ã‚Œã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-import { BaseAdapter } from "@multi-game-engines/core";
-import { IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
+import { BaseAdapter, IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
```
</details>

---

`6-38`: **`MortalAdapter` ã¨ `KatagoAdapter` ã® `load()` ãƒ¡ã‚½ãƒƒãƒ‰ãŒã»ã¼åŒä¸€ã€‚**

ä¸¡ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã® `load()` ã¯ URL ã¨ã‚³ãƒ³ãƒ•ã‚£ã‚°ã®å€¤ä»¥å¤–ã¯å®Œå…¨ã«åŒä¸€ã®ãƒ­ã‚¸ãƒƒã‚¯ã§ã™ã€‚`BaseAdapter` ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦å…±é€šåŒ–ã™ã‚‹ã‹ã€ã‚³ãƒ³ãƒ•ã‚£ã‚°ã®ã¿ã‚’å®£è¨€ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¸ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

ä¾‹ãˆã°ã€`BaseAdapter` ã« `protected abstract getSourceConfig(): { url: string; sri: string; size: number }` ã‚’å®šç¾©ã—ã€`load()` ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’åŸºåº•ã‚¯ãƒ©ã‚¹ã«ç§»å‹•ã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

</blockquote></details>
<details>
<summary>packages/adapter-yaneuraou/src/yaneuraou.ts (1)</summary><blockquote>

`1-5`: **åŒä¸€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’çµ±åˆã—ã¦ãã ã•ã„ã€‚**

`@multi-game-engines/core` ã¨ `./USIParser.js` ã‹ã‚‰ã® import ãŒãã‚Œãã‚Œ 2 è¡Œã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
-import { BaseAdapter } from "@multi-game-engines/core";
-import { IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
-import { ISHOGISearchInfo, ISHOGISearchResult } from "./USIParser.js";
-import { ISHOGISearchOptions } from "./usi-types.js";
-import { USIParser } from "./USIParser.js";
+import { BaseAdapter, IEngineLoader, WorkerCommunicator } from "@multi-game-engines/core";
+import { ISHOGISearchInfo, ISHOGISearchResult, USIParser } from "./USIParser.js";
+import { ISHOGISearchOptions } from "./usi-types.js";
```
</details>

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineFacade.ts (1)</summary><blockquote>

`49-55`: **ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®ä½ç½®å¼•æ•°ãŒå¤šãã€å‘¼ã³å‡ºã—å´ã§æ„å‘³ã‚’èª­ã¿å–ã‚Šã«ãã„æ§‹æˆã§ã™ã€‚**

4 ã¤ã®ä½ç½®å¼•æ•°ã®ã†ã¡ã€ç‰¹ã« `loaderProvider` ã¨ `ownsAdapter` ã¯æ„å‘³ãŒåˆ†ã‹ã‚Šã«ãã„ã§ã™ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¼•æ•°ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¾ã¨ã‚ã‚‹ã¨å¯èª­æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

```ts
// ä½¿ç”¨ä¾‹:
// new EngineFacade(adapter, middlewares, { loaderProvider: ..., ownsAdapter: false })
```

</blockquote></details>
<details>
<summary>packages/core/src/bridge/EngineBridge.ts (1)</summary><blockquote>

`61-66`: **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å…±æœ‰å‚ç…§ã«ã‚ˆã‚Šã€å¾Œã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ãŒæ—¢å­˜ã®ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚**

`this.middlewares` é…åˆ—ã®å‚ç…§ãŒå…¨ã¦ã®ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã«æ¸¡ã•ã‚Œã‚‹ãŸã‚ã€`use()` ã§è¿½åŠ ã•ã‚ŒãŸãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯æ—¢ã«ç”Ÿæˆæ¸ˆã¿ã®ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã®æ¢ç´¢ã«ã‚‚é©ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚ŒãŒæ„å›³çš„ã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ãŒã€æ„å›³ã›ã¬å‰¯ä½œç”¨ã®å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ˜ç¤ºçš„ã«æ–‡æ›¸åŒ–ã™ã‚‹ã‹ã€ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã«ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆ`[...this.middlewares]`ï¼‰ã‚’æ¸¡ã™ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚

</blockquote></details>
<details>
<summary>packages/core/src/adapters/BaseAdapter.ts (1)</summary><blockquote>

`129-136`: **`stop()` ãŒãƒ—ãƒ­ãƒŸã‚¹ã‚’ reject ã—ãŸå¾Œã«åœæ­¢ã‚³ãƒãƒ³ãƒ‰ã‚’é€ä¿¡ã™ã‚‹é †åºãŒé€†ã§ã™ã€‚**

`cleanupPendingTask("Search aborted")` ã¯ `pendingReject` ã‚’å‘¼ã³å‡ºã—ã¦ãƒ—ãƒ­ãƒŸã‚¹ã‚’ reject ã—ã¾ã™ãŒã€ãã®å¾Œã« `createStopCommand()` ã‚’ Worker ã«é€ä¿¡ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€å‘¼ã³å‡ºã—å´ã«ã¯ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ãŸå¾Œã§ã‚¨ãƒ³ã‚¸ãƒ³ãŒã¾ã å‡¦ç†ä¸­ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

åœæ­¢ã‚³ãƒãƒ³ãƒ‰ã‚’å…ˆã«é€ä¿¡ã—ã€å¿œç­”ï¼ˆã¾ãŸã¯çŸ­ã„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰ã‚’å¾…ã£ã¦ã‹ã‚‰ reject ã™ã‚‹ã‹ã€å°‘ãªãã¨ã‚‚ã‚³ãƒãƒ³ãƒ‰é€ä¿¡ã¨ reject ã®é †åºã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

<details>
<summary>â™»ï¸ ä¿®æ­£æ¡ˆ</summary>

```diff
  async stop(): Promise<void> {
-   this.cleanupPendingTask("Search aborted");
    if (!this.communicator) return;
    this.communicator.postMessage(this.parser.createStopCommand());
+   this.cleanupPendingTask("Search aborted");
  }
```
</details>

</blockquote></details>

</blockquote></details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->
--
