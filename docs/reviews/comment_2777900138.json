{
  "ID": "PRRC_kwDORJ0gd86lk2Rq",
  "Body": "_âš ï¸ Potential issue_ | _ğŸŸ  Major_\n\n**ã‚¨ãƒ©ãƒ¼æ™‚ã« `process.exit(1)` ãŒå‘¼ã°ã‚Œãšã€å¸¸ã«çµ‚äº†ã‚³ãƒ¼ãƒ‰ 0 ã§çµ‚äº†ã—ã¾ã™ã€‚**\n\n`mask` / `fill` ä¸¡ãƒ¢ãƒ¼ãƒ‰ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã« `console.error` + `return` ã®ã¿ã§ `process.exit(1)` ã‚’å‘¼ã‚“ã§ã„ã¾ã›ã‚“ã€‚CI ã‚„ pre-commit ãƒ•ãƒƒã‚¯ã‹ã‚‰å‘¼ã°ã‚ŒãŸå ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒæ¤œçŸ¥ã•ã‚Œãšã«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒæˆåŠŸæ‰±ã„ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€`mode` ãŒ `\"mask\"` ã§ã‚‚ `\"fill\"` ã§ã‚‚ãªã„å ´åˆã€ä½•ã‚‚èµ·ããšã‚µã‚¤ãƒ¬ãƒ³ãƒˆã«çµ‚äº†ã—ã¾ã™ã€‚\n\n<details>\n<summary>ğŸ›¡ï¸ ä¿®æ­£æ¡ˆ</summary>\n\n```diff\n   if (mode === \"mask\") {\n     if (!fs.existsSync(CONFIG_PATH)) {\n       console.error(\n         'mcp_config.json not found. Use \"fill\" mode to generate it from example first.',\n       );\n-      return;\n+      process.exit(1);\n     }\n     const config = JSON.parse(fs.readFileSync(CONFIG_PATH, \"utf-8\"));\n     const masked = processObject(config, \"mask\");\n     fs.writeFileSync(EXAMPLE_PATH, JSON.stringify(masked, null, 2) + \"\\n\");\n     console.log(\"Generated mcp_config.example.json with masked tokens.\");\n-  }\n+  } else if (mode === \"fill\") {\n-  if (mode === \"fill\") {\n     if (!fs.existsSync(EXAMPLE_PATH)) {\n       console.error(\"mcp_config.example.json not found.\");\n-      return;\n+      process.exit(1);\n     }\n     const example = JSON.parse(fs.readFileSync(EXAMPLE_PATH, \"utf-8\"));\n     const filled = processObject(example, \"fill\");\n     fs.writeFileSync(CONFIG_PATH, JSON.stringify(filled, null, 2) + \"\\n\");\n     console.log(\"Synchronized mcp_config.json with environment variables.\");\n+  } else {\n+    console.error(`Unknown mode: ${mode}. Use \"mask\" or \"fill\".`);\n+    process.exit(1);\n   }\n```\n</details>\n\n<!-- suggestion_start -->\n\n<details>\n<summary>ğŸ“ Committable suggestion</summary>\n\n> â€¼ï¸ **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n  if (mode === \"mask\") {\n    if (!fs.existsSync(CONFIG_PATH)) {\n      console.error(\n        'mcp_config.json not found. Use \"fill\" mode to generate it from example first.',\n      );\n      process.exit(1);\n    }\n    const config = JSON.parse(fs.readFileSync(CONFIG_PATH, \"utf-8\"));\n    const masked = processObject(config, \"mask\");\n    fs.writeFileSync(EXAMPLE_PATH, JSON.stringify(masked, null, 2) + \"\\n\");\n    console.log(\"Generated mcp_config.example.json with masked tokens.\");\n  } else if (mode === \"fill\") {\n    if (!fs.existsSync(EXAMPLE_PATH)) {\n      console.error(\"mcp_config.example.json not found.\");\n      process.exit(1);\n    }\n    const example = JSON.parse(fs.readFileSync(EXAMPLE_PATH, \"utf-8\"));\n    const filled = processObject(example, \"fill\");\n    fs.writeFileSync(CONFIG_PATH, JSON.stringify(filled, null, 2) + \"\\n\");\n    console.log(\"Synchronized mcp_config.json with environment variables.\");\n  } else {\n    console.error(`Unknown mode: ${mode}. Use \"mask\" or \"fill\".`);\n    process.exit(1);\n  }\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>ğŸ¤– Prompt for AI Agents</summary>\n\n```\nIn `@scripts/sync-mcp-tokens.js` around lines 53 - 75, When mode is \"mask\" or\n\"fill\" ensure missing-file failures call process.exit(1) after logging (replace\nthe console.error + return in both blocks with a console.error(...) followed by\nprocess.exit(1)); additionally, add a final else branch for the mode check that\nlogs an error about the invalid mode (including the value of mode) and then\ncalls process.exit(1); update references in this file to CONFIG_PATH,\nEXAMPLE_PATH, processObject, and mode so the script exits with a non-zero code\non errors.\n```\n\n</details>\n\n<!-- fingerprinting:phantom:medusa:phoenix -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
  "Path": "scripts/sync-mcp-tokens.js",
  "Line": 75,
  "Author": {
    "Login": "coderabbitai"
  },
  "CreatedAt": "2026-02-07T18:19:58Z",
  "UpdatedAt": "2026-02-07T18:20:00Z",
  "URL": "https://github.com/hdkz-dev/multi-game-engines/pull/7#discussion_r2777900138"
}
