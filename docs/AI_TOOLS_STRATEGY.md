# AI ツール戦略とコスト比較 (AI_TOOLS_STRATEGY.md)

本プロジェクトでは、複数の AI ツールを適材適所で組み合わせる「AI Ensemble 開発」を採用し、人間一人では到達不可能な品質とスピードの両立を目指します。

## 📊 AI ツール一覧とコスト比較

| 領域             | ツール            | 役割                         | コスト (OSS/個人)  | 導入状況    |
| :--------------- | :---------------- | :--------------------------- | :----------------- | :---------- |
| **司令塔**       | **Gemini CLI**    | 創造・実装・ドキュメント     | **無料** (API枠内) | ✅ 導入済   |
| **論理監査**     | **CodeRabbit**    | 行単位の意図・ロジック査読   | **無料** (OSS)     | ✅ 導入済   |
| **静的解析**     | **DeepSource**    | アンチパターン検出・自動修正 | **無料** (OSS)     | ✅ 導入済   |
| **セキュリティ** | **Snyk**          | 脆弱性・依存関係スキャン     | **無料** (Free)    | ✅ 導入済   |
| **可視化**       | **Mermaid.js**    | アーキテクチャの自動図解     | **無料**           | ✅ 導入済   |
| **テスト強化**   | **qodo (Codium)** | エッジケース・テスト生成     | **無料**           | ⏳ 導入中   |
| **性能監視**     | **CodSpeed**      | 継続的ベンチマーク           | **無料** (OSS)     | 🚀 究極提案 |
| **品質サイト**   | **TypeDoc**       | 自己修復型 API ドキュメント  | **無料**           | 🚀 究極提案 |
| **実機検証**     | **Playwright**    | マルチブラウザ E2E 検証      | **無料**           | 🚀 究極提案 |
| **自動運用**     | **Renovate**      | 依存関係の自動アップデート   | **無料**           | 🚀 究極提案 |

---

## 🎯 ツール別の詳細役割 (Other Information)

### 1. 創造と構築: Gemini CLI (Jules)

- **強み**: 大規模な文脈理解、複数ファイルにまたがる設計。
- **弱み**: ハルシネーション（もっともらしい嘘）。他の監査ツールで補完必須。

### 2. リリース自動化: Release-Please (Google製)

- **役割**: Conventional Commits に基づき、バージョンアップ PR と CHANGELOG を自動生成。
- **効果**: リリース作業のヒューマンエラーをゼロ化。

### 3. 可観測性: OpenTelemetry (OTel)

- **役割**: `IEngine` の実行時メトリクス（NPS, Latency）を標準形式で記録。
- **効果**: ブラウザ上のサイレントな性能劣化をデータで捕捉。

---

## 🚀 究極のベストプラクティスへの昇華 (The Zenith Tier)

### 1. 継続的ベンチマーク (Continuous Benchmarking)

わずかなコード変更による「探索速度 (NPS)」の低下を PR の時点で検知。ゲームエンジンにおいて、パフォーマンスは機能と同等に重要。

### 2. 自己修復型ドキュメント (Self-Healing Docs)

TSDoc から API サイトを自動生成し、GitHub Pages へ公開。「ドキュメントと実装の不一致」を物理的に排除。

### 3. ブラウザ・マトリクス検証 (Browser Matrix Testing)

Chromium, Firefox, WebKit の各エンジン上で WASM 動作を自動検証。ブラウザ固有のストレージ制約や命令セットの差異を事前に把握。

### 4. Contract-driven Safety (実行時契約の強制)

`Zod` 等を用い、Worker 通信境界で「値の正当性」をランタイムで保証。コンパイル後の型消去による脆弱性を排除。

---

## 🤖 サブエージェント・アーキテクチャ (Sub-Agent Architecture)

メインエージェントが専門特化した「内部スキル」や「外部エージェント」へタスクを委譲する階層構造を採用。

1.  **Captain**: Gemini CLI (全体指揮)
2.  **Internal Experts**: `codebase_investigator`, `security-auditor` 等
3.  **External Auditors**: CodeRabbit, DeepSource, Snyk 等

---

## 🛠 導入・運用ガイドライン

- **コスト**: 全て **OSS 向け無料枠** を活用。有料化が必要な際は ADR で決定。
- **安全性**: AI モデルの学習に使用されない設定（Opt-out）を優先。
- **優先順位**: 同種の指摘は `DeepSource` (形式) ＞ `CodeRabbit` (意図) の順で処理。
