# プロジェクト運営方針 (Project Management Policy)

## 1. 開発の進め方

本プロジェクトは、AI エージェントと人間の共同作業を前提とした「ドキュメント駆動開発」を採用します。
コードを書く前に、必ず `docs/implementation_plans/` に計画書を作成し、合意を得るものとします。

## 2. 検討プロセスと意思決定

- **検討方針**: 常に最新の Web 標準（WASM, OPFS, WebNN 等）を優先し、特定のフレームワークに依存しない設計を追求します。
- **意思決定の記録**: 重要な設計変更は `docs/DECISION_LOG.md` または `docs/adr/` に記録します。

## 3. ブランチ・PR 運用

- `main` ブランチは常に保護され、直接のプッシュは禁止です。
- 全ての変更は PR を経由し、セルフレビューまたは相互レビューを行います。
- コミットメッセージは `feat:`, `fix:`, `docs:`, `refactor:` などのプレフィックスを使用します。

## 4. ブランチの同期とコンフリクト解決 (2026 Best Practices)

履歴の線形性と品質を維持するため、以下の同期ポリシーを徹底します。

### 4-1. 頻繁なアップストリーム同期

- **作業開始前**: `git pull --rebase origin main` を実行し、常に最新の基盤上で開発を開始してください。
- **作業中**: 長期間の作業になる場合、少なくとも 1 日 1 回は `main` の変更を取り込むことが義務付けられます。これにより、コンフリクトを最小の単位で解決します。

### 4-2. Rebase & Merge ポリシー

- **フィーチャーブランチ**: 個人ブランチでは原則 `rebase` を使用し、履歴を線形に保ちます。
- **PR マージ**: GitHub 上でのマージは `Squash and merge` を基本とし、`main` の履歴を機能単位でクリーンに保ちます。

### 4-3. コンフリクト解決のガイドライン

- **AI アシストの活用**: コンフリクトが発生した場合、AI (Cursor/Gemini) に「設計思想 (`ARCHITECTURE.md`) に合致する解決策」を問合せてください。
- **git rerere の有効化**: 繰り返される競合解決を自動化するため、以下の設定を推奨します。
  ```bash
  git config --global rerere.enabled true
  ```
- **論理的整合性の検証**: コンフリクト解決後は、必ず `pnpm typecheck` と `pnpm test` を実行し、意味論的な破壊（Silent failure）が起きていないか検証してください。
