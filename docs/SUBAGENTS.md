# Sub-agents Directory

このプロジェクト（`multi-game-engines`）では、専門特化した **サブエージェント (Sub-agents)** を活用して開発を自律的に進めます。各エージェントは特定の領域に特化した知識とツールセットを持ち、メインエージェントからの委譲を受けて動作します。

## 1. エージェント一覧

| 名前                   | 役割                                               | 呼び出しトリガー                                     |
| :--------------------- | :------------------------------------------------- | :--------------------------------------------------- |
| **architecture_guard** | アーキテクチャ原則（Facade, 型安全）の遵守チェック | アーキテクチャの確認、型安全性のチェック依頼時       |
| **security_auditor**   | セキュリティ監査、整合性検証、メモリ管理の確認     | セキュリティ、SRI、メモリリークの懸念がある時        |
| **portless_operator**  | Portless 環境下でのブラウザ検証、サーバー操作      | ブラウザでの動作確認、E2Eテストの実行時              |
| **code_reviewer**      | CodeRabbit によるコードレビュー、バグ検出          | コミット前のレビュー、PR 準備、品質監査時            |
| **design_architect**   | Kiro 原則に基づく ADR、仕様書作成、新規設計        | 新規機能の設計、ADR 作成、ドキュメント更新時         |
| **refactor_assistant** | 型安全性向上、依存関係整理、リファクタリング       | リファクタリング、コード改善、型整理の依頼時         |
| **frontend_architect** | React/Next.js のパフォーマンス最適化、設計         | UI コンポーネント開発、フロントエンド最適化依頼時    |
| **wasm_specialist**    | WASM/WebWorker/低レイヤー/メモリ管理               | エンジンブリッジ実装、低レイヤー最適化、メモリ管理時 |
| **package_manager**    | Monorepo/依存関係/リリース/i18n 管理               | パッケージ追加、多言語対応、依存関係整理、リリース時 |

## 2. 使用方法

メインエージェント（Gemini CLI）は、ユーザーの依頼内容に応じて最適なサブエージェントを自動的に選択し、タスクを委譲します。
特定の専門家に相談したい場合は、以下のように明示的に指示することも可能です。

- 「`architecture_guard` を使って、このパッケージのインターフェースが適切か確認して」
- 「`portless_operator` でダッシュボードの表示を確認して」
- 「`code_reviewer` に今の変更をレビューさせて」

## 3. 技術原則の遵守

全てのサブエージェントは、プロジェクトルートの `AGENTS.md` に記載された **「究極のベストプラクティス」** を共通の行動指針としています。

- **any の完全排除**
- **Facade パターンの徹底**
- **Branded Types の使用**
- **Security First (Refuse by Exception)**
- **SRI 必須化**
- **究極のメモリ管理 (WeakMap/WeakRef)**

## 4. エージェントの定義

各エージェントの定義ファイル（システムプロンプト、使用可能ツール等）は `.gemini/agents/` 配下に配置されています。
設定の変更や新しいエージェントの追加は、このディレクトリのファイルを編集することで行えます。
