# ADR-045: Absolute Zenith Quality Audit の完遂と整合性同期

## ステータス

承認済み

## 日付

2026-02-23

## コンテキスト

プロジェクトが「Zenith Tier」品質に到達するためには、エラーポリシー、リソース管理、および E2E テストの安定性が最高水準で一致している必要があります。これまでの開発で生じた細かな不整合や、レビューで指摘された課題を解決する包括的な監査を実施しました。

## 決定

1. **セキュリティポリシーの統一**: `ProtocolValidator.assertNoInjection` におけるエラーコードを `SECURITY_ERROR` に統一し、"Refuse by Exception" 原則を全ドメインに適用します。
2. **リソース管理の安全性向上**:
   - `EngineLoader` のキャッシュキーセパレータを `:` に戻し、ID 衝突を防止します。
   - `IndexedDBStorage` に `onblocked` タイムアウトを導入し、ハングを防止します。
3. **E2E テストの安定化**:
   - `networkidle` 依存を排除し、複数エンジン共存下での Locator 競合を解消します。
4. **型契約の厳格化**: `IEngine` と `EngineFacade` の関係性を整理し、内部アダプターへのアクセスを安全に制御します。

## 結果

- プロジェクト全域の実装、テスト、アクセシビリティが Zenith Tier 標準で完全に同期されました。
- 非常に安定した CI パスと、堅牢な実行時安全性が確保されました。
