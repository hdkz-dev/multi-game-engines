# ADR-020: 双方向ミドルウェアと searchRaw の導入

## コンテキスト
以前の設計ではミドルウェアはエンジンの出力（info, result）のインターセプトしか考慮されていませんでした。しかし、エンジンの入力（command）をログ出力したり、パラメータを動的に変換したりするニーズがありました。

## 決定
1. `IMiddleware` に `onCommand` メソッドを追加し、双方向のインターセプトを可能にしました。
2. アダプターから `search(options)` の責務を分離し、Facade がオプションからコマンドを生成した後に `searchRaw(command)` を呼び出すフローを基本としました。

## 結果
- 入出力全てのパイプラインをミドルウェアで完全に制御可能になりました。
- 探索開始時に前のタスクを自動停止するなどの高度なオーケストレーションが Facade 層で一貫して行えるようになりました。
