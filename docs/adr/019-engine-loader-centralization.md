# ADR-019: EngineLoader によるリソース管理の集約

## コンテキスト
これまで各エンジンアダプターが個別に `fetch` やキャッシュ（ストレージへの保存）を実装する設計でした。しかし、これでは SRI (Subresource Integrity) 検証や OPFS へのキャッシュロジックが重複し、保守性が低下する懸念がありました。

## 決定
リソースのダウンロード、SRI検証、ストレージへのキャッシュ、および Blob URL のライフサイクル管理を一手に引き受ける `EngineLoader` サービスを Core パッケージに導入します。

**追記 (2026-02-11):**
セキュリティ担保のため、`EngineLoader` は `sri` ハッシュが提供されない場合、リソースのロードを拒否（例外送出）するように厳格化します。開発時であっても例外を認めず、常に整合性を検証します。

## 結果
- アダプターの実装がシンプルになり、ソース定義のみに集中できるようになりました。
- セキュリティ検証（SRI）がアーキテクチャレベルで強制され、信頼性が向上しました。
- ブラウザのメモリ管理（Blob URL の revoke）がより確実に行えるようになりました。
