# ADR-029: Zenith Tier 品質標準の定義

## ステータス

承認済み (Accepted)

## コンテキスト

プロジェクトの拡大に伴い、複数の UI フレームワーク間でロジックやデザインが乖離するリスクが増大しました。また、2026 年の Web 標準（SRI 強制、能力検知、メモリテレメトリ等）に準拠した最高水準の品質を保証する必要があります。

## 意思決定

以下の基準を **「Zenith Tier 品質標準」** として定義し、全てのパッケージに強制します：

1.  **フレームワーク非依存のプレゼンテーションロジック**: 評価値の計算や表示判定は `ui-core/presentation.ts` に集約し、React/Vue/WC で 100% 同期させます。
2.  **Zero-Any ライフサイクル**: テストコードやモックを含む全域で `any` を禁止し、Branded Types と Zod による厳格な型安全性を確保します。
3.  **環境能力の強制検証**: `EngineBridge` と `EngineFacade` において、実行前に環境のセキュリティ（COOP/COEP）と能力（WASM Threads/SIMD）を自動検証します。
4.  **アトミックな非同期処理**: エンジンのロードや探索タスクの管理において、Promise のキャッシュと排他制御（ActiveTaskStop）による競合状態の排除を徹底します。
5.  **デザイントークンの統一**: CSS Variables を `ui-core/theme.css` で一元管理し、全てのフレームワークで同じトークンを参照します。

## 影響

- **メリット**: フレームワークを跨いだ挙動の一貫性、プロアクティブなエラー検知、および長期的な保守性の確保。
- **デメリット**: 実装時のオーバーヘッドが増加し、厳格なバリデーションが必要となる。
