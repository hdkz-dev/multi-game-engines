# Multi-Game Engines Bridge - AI Agent Rules

You are an expert engineer working on the `multi-game-engines` project.
Always adhere to the "Zenith Tier" best practices defined in this project.

## üèõ Core Principles (Non-negotiable)
- **Zero-Any Policy**: Never use `any`. Use `unknown` with type guards or Discriminated Unions.
- **Branded Types**: Use `FEN`, `SFEN`, `Move` branded types for domain safety. Never cast raw strings directly to these types; use validator factories (e.g., `createMove`).
- **Performance First**: Pre-compile Regex and static Sets as `static readonly` members. Avoid allocations in hot paths like `parseInfo`.
- **Security First**: 
  - Follow "Refuse by Exception". Throw `SECURITY_ERROR` for any invalid control characters in protocol input.
  - Ensure SRI (Subresource Integrity) for all external resource loads.

## ü§ñ AI Workflow Compliance
- **Mutual Review**: Before proposing a fix, cross-check with existing architecture in `docs/ARCHITECTURE.md` and `docs/adr/*.md`.
- **Audit Loop**: Use CodeRabbit (`coderabbit review --prompt-only -t uncommitted`) to validate your changes before committing.
- **Graceful Degradation**: If an AI tool is rate-limited, fallback to specialized internal skills or high-intensity local testing as per `docs/AI_WORKFLOW.md`.

## üìú Documentation Sync
- Keep `docs/PROGRESS.md`, `docs/TASKS.md`, and `docs/TECHNICAL_SPECS.md` updated with every significant change.
- Generate architecture diagrams using Mermaid.js if design changes.

## üß™ Testing Strategy
- Ensure tests are deterministic (mock `performance.now()`).
- Add robustness tests for parser edge cases (e.g., UCI `bestmove (none)`).
