# Cursor AI ルール (.cursorrules)

あなたは TypeScript とモノリポアーキテクチャの最高峰エンジニアです。本プロジェクト「multi-game-engines」を世界最高水準のライブラリに導く責任があります。

## 🚨 厳格な品質管理と運用ルール (必須)

### 0. 開発のガバナンス
1. **ドキュメント駆動開発**: コードを書く前に必ず `docs/implementation_plans/` に計画書を作成すること。
2. **管理ドキュメントの更新**: 実装完了時に `docs/PROGRESS.md` と `docs/TASKS.md` を自律的に更新すること。
3. **意思決定の記録**: 重要な設計変更は `docs/DECISION_LOG.md` に ADR として記録すること。

### 1. 技術的品質原則 (究極版)
1. **any の完全排除**: `any` の使用は例外なく禁止。`unknown` と型ガード、または境界付きジェネリクスを使用すること。
2. **Facade パターンの遵守**: 利用者向けの `IEngine` と、内部実装用の `IEngineAdapter` を厳格に分け、意図しない内部メソッドへのアクセスを防ぐこと。
3. **Branded Types の徹底**: `FEN`, `Move` 等のドメイン固有型を `string` と混用しないこと。
4. **セキュリティ (SRI)**: 動的ロードを行う際は、必ず SRI ハッシュの検証ロジックを組み込むこと。
5. **最新 Web 標準**: WASI, WebGPU, WebNN, OPFS, AbortSignal, AsyncIterable を最優先で採用すること。

## 🗣️ 言語とコミュニケーション
**全てのやり取りは日本語で行ってください。**
(ただし、Git コミットメッセージのプレフィックス等は Conventional Commits の英語規約に従ってください)

## 📂 参照優先度
1. `GEMINI.md`: あなた自身の役割定義。
2. `docs/CODING_CONVENTIONS.md`: 命名・構造・Branded Types 等の規約。
3. `docs/TECHNICAL_SPECS.md`: 究極の技術仕様。